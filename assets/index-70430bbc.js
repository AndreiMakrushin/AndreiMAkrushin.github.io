function th(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in e)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(e,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function lo(e,t){const n=Object.create(null),i=e.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return t?r=>!!n[r.toLowerCase()]:r=>!!n[r]}const Se={},Mn=[],mt=()=>{},nh=()=>!1,ih=/^on[^a-z]/,Ts=e=>ih.test(e),co=e=>e.startsWith("onUpdate:"),Ne=Object.assign,uo=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},sh=Object.prototype.hasOwnProperty,le=(e,t)=>sh.call(e,t),X=Array.isArray,zn=e=>Di(e)==="[object Map]",Yn=e=>Di(e)==="[object Set]",ta=e=>Di(e)==="[object Date]",Z=e=>typeof e=="function",Oe=e=>typeof e=="string",Dn=e=>typeof e=="symbol",Ee=e=>e!==null&&typeof e=="object",Hl=e=>(Ee(e)||Z(e))&&Z(e.then)&&Z(e.catch),Wl=Object.prototype.toString,Di=e=>Wl.call(e),rh=e=>Di(e).slice(8,-1),ql=e=>Di(e)==="[object Object]",ho=e=>Oe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,as=lo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Cs=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},oh=/-(\w)/g,Ct=Cs(e=>e.replace(oh,(t,n)=>n?n.toUpperCase():"")),ah=/\B([A-Z])/g,Gn=Cs(e=>e.replace(ah,"-$1").toLowerCase()),Os=Cs(e=>e.charAt(0).toUpperCase()+e.slice(1)),nr=Cs(e=>e?`on${Os(e)}`:""),yn=(e,t)=>!Object.is(e,t),ls=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},gs=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},vs=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let na;const Cr=()=>na||(na=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function $s(e){if(X(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=Oe(i)?hh(i):$s(i);if(r)for(const s in r)t[s]=r[s]}return t}else if(Oe(e)||Ee(e))return e}const lh=/;(?![^(]*\))/g,ch=/:([^]+)/,uh=/\/\*[^]*?\*\//g;function hh(e){const t={};return e.replace(uh,"").split(lh).forEach(n=>{if(n){const i=n.split(ch);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Je(e){let t="";if(Oe(e))t=e;else if(X(e))for(let n=0;n<e.length;n++){const i=Je(e[n]);i&&(t+=i+" ")}else if(Ee(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const dh="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",fh=lo(dh);function Vl(e){return!!e||e===""}function ph(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=wn(e[i],t[i]);return n}function wn(e,t){if(e===t)return!0;let n=ta(e),i=ta(t);if(n||i)return n&&i?e.getTime()===t.getTime():!1;if(n=Dn(e),i=Dn(t),n||i)return e===t;if(n=X(e),i=X(t),n||i)return n&&i?ph(e,t):!1;if(n=Ee(e),i=Ee(t),n||i){if(!n||!i)return!1;const r=Object.keys(e).length,s=Object.keys(t).length;if(r!==s)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!wn(e[o],t[o]))return!1}}return String(e)===String(t)}function fo(e,t){return e.findIndex(n=>wn(n,t))}const ie=e=>Oe(e)?e:e==null?"":X(e)||Ee(e)&&(e.toString===Wl||!Z(e.toString))?JSON.stringify(e,Kl,2):String(e),Kl=(e,t)=>t&&t.__v_isRef?Kl(e,t.value):zn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,r])=>(n[`${i} =>`]=r,n),{})}:Yn(t)?{[`Set(${t.size})`]:[...t.values()]}:Ee(t)&&!X(t)&&!ql(t)?String(t):t;let tt;class Jl{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=tt,!t&&tt&&(this.index=(tt.scopes||(tt.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=tt;try{return tt=this,t()}finally{tt=n}}}on(){tt=this}off(){tt=this.parent}stop(t){if(this._active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function Xl(e){return new Jl(e)}function mh(e,t=tt){t&&t.active&&t.effects.push(e)}function Yl(){return tt}function gh(e){tt&&tt.cleanups.push(e)}const po=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Gl=e=>(e.w&nn)>0,Ql=e=>(e.n&nn)>0,vh=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=nn},yh=e=>{const{deps:t}=e;if(t.length){let n=0;for(let i=0;i<t.length;i++){const r=t[i];Gl(r)&&!Ql(r)?r.delete(e):t[n++]=r,r.w&=~nn,r.n&=~nn}t.length=n}},ys=new WeakMap;let hi=0,nn=1;const Or=30;let ft;const mn=Symbol(""),$r=Symbol("");class mo{constructor(t,n=null,i){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,mh(this,i)}run(){if(!this.active)return this.fn();let t=ft,n=Zt;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=ft,ft=this,Zt=!0,nn=1<<++hi,hi<=Or?vh(this):ia(this),this.fn()}finally{hi<=Or&&yh(this),nn=1<<--hi,ft=this.parent,Zt=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){ft===this?this.deferStop=!0:this.active&&(ia(this),this.onStop&&this.onStop(),this.active=!1)}}function ia(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Zt=!0;const Zl=[];function Qn(){Zl.push(Zt),Zt=!1}function Zn(){const e=Zl.pop();Zt=e===void 0?!0:e}function Ge(e,t,n){if(Zt&&ft){let i=ys.get(e);i||ys.set(e,i=new Map);let r=i.get(n);r||i.set(n,r=po()),ec(r)}}function ec(e,t){let n=!1;hi<=Or?Ql(e)||(e.n|=nn,n=!Gl(e)):n=!e.has(ft),n&&(e.add(ft),ft.deps.push(e))}function Dt(e,t,n,i,r,s){const o=ys.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(n==="length"&&X(e)){const l=Number(i);o.forEach((c,u)=>{(u==="length"||!Dn(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),t){case"add":X(e)?ho(n)&&a.push(o.get("length")):(a.push(o.get(mn)),zn(e)&&a.push(o.get($r)));break;case"delete":X(e)||(a.push(o.get(mn)),zn(e)&&a.push(o.get($r)));break;case"set":zn(e)&&a.push(o.get(mn));break}if(a.length===1)a[0]&&kr(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);kr(po(l))}}function kr(e,t){const n=X(e)?e:[...e];for(const i of n)i.computed&&sa(i);for(const i of n)i.computed||sa(i)}function sa(e,t){(e!==ft||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}function wh(e,t){var n;return(n=ys.get(e))==null?void 0:n.get(t)}const bh=lo("__proto__,__v_isRef,__isVue"),tc=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Dn)),ra=_h();function _h(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const i=ue(this);for(let s=0,o=this.length;s<o;s++)Ge(i,"get",s+"");const r=i[t](...n);return r===-1||r===!1?i[t](...n.map(ue)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Qn();const i=ue(this)[t].apply(this,n);return Zn(),i}}),e}function xh(e){const t=ue(this);return Ge(t,"has",e),t.hasOwnProperty(e)}class nc{constructor(t=!1,n=!1){this._isReadonly=t,this._shallow=n}get(t,n,i){const r=this._isReadonly,s=this._shallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return s;if(n==="__v_raw"&&i===(r?s?Mh:oc:s?rc:sc).get(t))return t;const o=X(t);if(!r){if(o&&le(ra,n))return Reflect.get(ra,n,i);if(n==="hasOwnProperty")return xh}const a=Reflect.get(t,n,i);return(Dn(n)?tc.has(n):bh(n))||(r||Ge(t,"get",n),s)?a:Ce(a)?o&&ho(n)?a:a.value:Ee(a)?r?lc(a):_n(a):a}}class ic extends nc{constructor(t=!1){super(!1,t)}set(t,n,i,r){let s=t[n];if(Un(s)&&Ce(s)&&!Ce(i))return!1;if(!this._shallow&&(!ws(i)&&!Un(i)&&(s=ue(s),i=ue(i)),!X(t)&&Ce(s)&&!Ce(i)))return s.value=i,!0;const o=X(t)&&ho(n)?Number(n)<t.length:le(t,n),a=Reflect.set(t,n,i,r);return t===ue(r)&&(o?yn(i,s)&&Dt(t,"set",n,i):Dt(t,"add",n,i)),a}deleteProperty(t,n){const i=le(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&i&&Dt(t,"delete",n,void 0),r}has(t,n){const i=Reflect.has(t,n);return(!Dn(n)||!tc.has(n))&&Ge(t,"has",n),i}ownKeys(t){return Ge(t,"iterate",X(t)?"length":mn),Reflect.ownKeys(t)}}class Eh extends nc{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Sh=new ic,Rh=new Eh,Ah=new ic(!0),go=e=>e,ks=e=>Reflect.getPrototypeOf(e);function qi(e,t,n=!1,i=!1){e=e.__v_raw;const r=ue(e),s=ue(t);n||(yn(t,s)&&Ge(r,"get",t),Ge(r,"get",s));const{has:o}=ks(r),a=i?go:n?wo:Ci;if(o.call(r,t))return a(e.get(t));if(o.call(r,s))return a(e.get(s));e!==r&&e.get(t)}function Vi(e,t=!1){const n=this.__v_raw,i=ue(n),r=ue(e);return t||(yn(e,r)&&Ge(i,"has",e),Ge(i,"has",r)),e===r?n.has(e):n.has(e)||n.has(r)}function Ki(e,t=!1){return e=e.__v_raw,!t&&Ge(ue(e),"iterate",mn),Reflect.get(e,"size",e)}function oa(e){e=ue(e);const t=ue(this);return ks(t).has.call(t,e)||(t.add(e),Dt(t,"add",e,e)),this}function aa(e,t){t=ue(t);const n=ue(this),{has:i,get:r}=ks(n);let s=i.call(n,e);s||(e=ue(e),s=i.call(n,e));const o=r.call(n,e);return n.set(e,t),s?yn(t,o)&&Dt(n,"set",e,t):Dt(n,"add",e,t),this}function la(e){const t=ue(this),{has:n,get:i}=ks(t);let r=n.call(t,e);r||(e=ue(e),r=n.call(t,e)),i&&i.call(t,e);const s=t.delete(e);return r&&Dt(t,"delete",e,void 0),s}function ca(){const e=ue(this),t=e.size!==0,n=e.clear();return t&&Dt(e,"clear",void 0,void 0),n}function Ji(e,t){return function(i,r){const s=this,o=s.__v_raw,a=ue(o),l=t?go:e?wo:Ci;return!e&&Ge(a,"iterate",mn),o.forEach((c,u)=>i.call(r,l(c),l(u),s))}}function Xi(e,t,n){return function(...i){const r=this.__v_raw,s=ue(r),o=zn(s),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=r[e](...i),u=n?go:t?wo:Ci;return!t&&Ge(s,"iterate",l?$r:mn),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function Ht(e){return function(...t){return e==="delete"?!1:this}}function Th(){const e={get(s){return qi(this,s)},get size(){return Ki(this)},has:Vi,add:oa,set:aa,delete:la,clear:ca,forEach:Ji(!1,!1)},t={get(s){return qi(this,s,!1,!0)},get size(){return Ki(this)},has:Vi,add:oa,set:aa,delete:la,clear:ca,forEach:Ji(!1,!0)},n={get(s){return qi(this,s,!0)},get size(){return Ki(this,!0)},has(s){return Vi.call(this,s,!0)},add:Ht("add"),set:Ht("set"),delete:Ht("delete"),clear:Ht("clear"),forEach:Ji(!0,!1)},i={get(s){return qi(this,s,!0,!0)},get size(){return Ki(this,!0)},has(s){return Vi.call(this,s,!0)},add:Ht("add"),set:Ht("set"),delete:Ht("delete"),clear:Ht("clear"),forEach:Ji(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=Xi(s,!1,!1),n[s]=Xi(s,!0,!1),t[s]=Xi(s,!1,!0),i[s]=Xi(s,!0,!0)}),[e,n,t,i]}const[Ch,Oh,$h,kh]=Th();function vo(e,t){const n=t?e?kh:$h:e?Oh:Ch;return(i,r,s)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?i:Reflect.get(le(n,r)&&r in i?n:i,r,s)}const Ph={get:vo(!1,!1)},jh={get:vo(!1,!0)},Ih={get:vo(!0,!1)},sc=new WeakMap,rc=new WeakMap,oc=new WeakMap,Mh=new WeakMap;function zh(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Lh(e){return e.__v_skip||!Object.isExtensible(e)?0:zh(rh(e))}function _n(e){return Un(e)?e:yo(e,!1,Sh,Ph,sc)}function ac(e){return yo(e,!1,Ah,jh,rc)}function lc(e){return yo(e,!0,Rh,Ih,oc)}function yo(e,t,n,i,r){if(!Ee(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=r.get(e);if(s)return s;const o=Lh(e);if(o===0)return e;const a=new Proxy(e,o===2?i:n);return r.set(e,a),a}function en(e){return Un(e)?en(e.__v_raw):!!(e&&e.__v_isReactive)}function Un(e){return!!(e&&e.__v_isReadonly)}function ws(e){return!!(e&&e.__v_isShallow)}function cc(e){return en(e)||Un(e)}function ue(e){const t=e&&e.__v_raw;return t?ue(t):e}function Ps(e){return gs(e,"__v_skip",!0),e}const Ci=e=>Ee(e)?_n(e):e,wo=e=>Ee(e)?lc(e):e;function uc(e){Zt&&ft&&(e=ue(e),ec(e.dep||(e.dep=po())))}function hc(e,t){e=ue(e);const n=e.dep;n&&kr(n)}function Ce(e){return!!(e&&e.__v_isRef===!0)}function ce(e){return dc(e,!1)}function Dh(e){return dc(e,!0)}function dc(e,t){return Ce(e)?e:new Uh(e,t)}class Uh{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:ue(t),this._value=n?t:Ci(t)}get value(){return uc(this),this._value}set value(t){const n=this.__v_isShallow||ws(t)||Un(t);t=n?t:ue(t),yn(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:Ci(t),hc(this))}}function F(e){return Ce(e)?e.value:e}const Nh={get:(e,t,n)=>F(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return Ce(r)&&!Ce(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function fc(e){return en(e)?e:new Proxy(e,Nh)}function Fh(e){const t=X(e)?new Array(e.length):{};for(const n in e)t[n]=Hh(e,n);return t}class Bh{constructor(t,n,i){this._object=t,this._key=n,this._defaultValue=i,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return wh(ue(this._object),this._key)}}function Hh(e,t,n){const i=e[t];return Ce(i)?i:new Bh(e,t,n)}class Wh{constructor(t,n,i,r){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new mo(t,()=>{this._dirty||(this._dirty=!0,hc(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const t=ue(this);return uc(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function qh(e,t,n=!1){let i,r;const s=Z(e);return s?(i=e,r=mt):(i=e.get,r=e.set),new Wh(i,r,s||!r,n)}function tn(e,t,n,i){let r;try{r=i?e(...i):e()}catch(s){Ui(s,t,n)}return r}function gt(e,t,n,i){if(Z(e)){const s=tn(e,t,n,i);return s&&Hl(s)&&s.catch(o=>{Ui(o,t,n)}),s}const r=[];for(let s=0;s<e.length;s++)r.push(gt(e[s],t,n,i));return r}function Ui(e,t,n,i=!0){const r=t?t.vnode:null;if(t){let s=t.parent;const o=t.proxy,a=n;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,o,a)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){tn(l,null,10,[e,o,a]);return}}Vh(e,n,r,i)}function Vh(e,t,n,i=!0){console.error(e)}let Oi=!1,Pr=!1;const He=[];let Rt=0;const Ln=[];let Mt=null,un=0;const pc=Promise.resolve();let bo=null;function _o(e){const t=bo||pc;return e?t.then(this?e.bind(this):e):t}function Kh(e){let t=Rt+1,n=He.length;for(;t<n;){const i=t+n>>>1,r=He[i],s=$i(r);s<e||s===e&&r.pre?t=i+1:n=i}return t}function js(e){(!He.length||!He.includes(e,Oi&&e.allowRecurse?Rt+1:Rt))&&(e.id==null?He.push(e):He.splice(Kh(e.id),0,e),mc())}function mc(){!Oi&&!Pr&&(Pr=!0,bo=pc.then(vc))}function Jh(e){const t=He.indexOf(e);t>Rt&&He.splice(t,1)}function Xh(e){X(e)?Ln.push(...e):(!Mt||!Mt.includes(e,e.allowRecurse?un+1:un))&&Ln.push(e),mc()}function ua(e,t=Oi?Rt+1:0){for(;t<He.length;t++){const n=He[t];n&&n.pre&&(He.splice(t,1),t--,n())}}function gc(e){if(Ln.length){const t=[...new Set(Ln)];if(Ln.length=0,Mt){Mt.push(...t);return}for(Mt=t,Mt.sort((n,i)=>$i(n)-$i(i)),un=0;un<Mt.length;un++)Mt[un]();Mt=null,un=0}}const $i=e=>e.id==null?1/0:e.id,Yh=(e,t)=>{const n=$i(e)-$i(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function vc(e){Pr=!1,Oi=!0,He.sort(Yh);const t=mt;try{for(Rt=0;Rt<He.length;Rt++){const n=He[Rt];n&&n.active!==!1&&tn(n,null,14)}}finally{Rt=0,He.length=0,gc(),Oi=!1,bo=null,(He.length||Ln.length)&&vc()}}function Gh(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||Se;let r=n;const s=t.startsWith("update:"),o=s&&t.slice(7);if(o&&o in i){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=i[u]||Se;d&&(r=n.map(f=>Oe(f)?f.trim():f)),h&&(r=n.map(vs))}let a,l=i[a=nr(t)]||i[a=nr(Ct(t))];!l&&s&&(l=i[a=nr(Gn(t))]),l&&gt(l,e,6,r);const c=i[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,gt(c,e,6,r)}}function yc(e,t,n=!1){const i=t.emitsCache,r=i.get(e);if(r!==void 0)return r;const s=e.emits;let o={},a=!1;if(!Z(e)){const l=c=>{const u=yc(c,t,!0);u&&(a=!0,Ne(o,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!a?(Ee(e)&&i.set(e,null),null):(X(s)?s.forEach(l=>o[l]=null):Ne(o,s),Ee(e)&&i.set(e,o),o)}function Is(e,t){return!e||!Ts(t)?!1:(t=t.slice(2).replace(/Once$/,""),le(e,t[0].toLowerCase()+t.slice(1))||le(e,Gn(t))||le(e,t))}let Le=null,Ms=null;function bs(e){const t=Le;return Le=e,Ms=e&&e.type.__scopeId||null,t}function Qh(e){Ms=e}function Zh(){Ms=null}function ge(e,t=Le,n){if(!t||e._n)return e;const i=(...r)=>{i._d&&xa(-1);const s=bs(t);let o;try{o=e(...r)}finally{bs(s),i._d&&xa(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function ir(e){const{type:t,vnode:n,proxy:i,withProxy:r,props:s,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:d,setupState:f,ctx:m,inheritAttrs:v}=e;let b,R;const x=bs(e);try{if(n.shapeFlag&4){const C=r||i;b=Et(u.call(C,C,h,s,f,d,m)),R=l}else{const C=t;b=Et(C.length>1?C(s,{attrs:l,slots:a,emit:c}):C(s,null)),R=t.props?l:ed(l)}}catch(C){yi.length=0,Ui(C,e,1),b=$(sn)}let T=b;if(R&&v!==!1){const C=Object.keys(R),{shapeFlag:z}=T;C.length&&z&7&&(o&&C.some(co)&&(R=td(R,o)),T=Nn(T,R))}return n.dirs&&(T=Nn(T),T.dirs=T.dirs?T.dirs.concat(n.dirs):n.dirs),n.transition&&(T.transition=n.transition),b=T,bs(x),b}const ed=e=>{let t;for(const n in e)(n==="class"||n==="style"||Ts(n))&&((t||(t={}))[n]=e[n]);return t},td=(e,t)=>{const n={};for(const i in e)(!co(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function nd(e,t,n){const{props:i,children:r,component:s}=e,{props:o,children:a,patchFlag:l}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?ha(i,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==i[d]&&!Is(c,d))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?ha(i,o,c):!0:!!o;return!1}function ha(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(t[s]!==e[s]&&!Is(n,s))return!0}return!1}function id({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const sd=e=>e.__isSuspense;function rd(e,t){t&&t.pendingBranch?X(e)?t.effects.push(...e):t.effects.push(e):Xh(e)}const Yi={};function vt(e,t,n){return wc(e,t,n)}function wc(e,t,{immediate:n,deep:i,flush:r,onTrack:s,onTrigger:o}=Se){var a;const l=Yl()===((a=Me)==null?void 0:a.scope)?Me:null;let c,u=!1,h=!1;if(Ce(e)?(c=()=>e.value,u=ws(e)):en(e)?(c=()=>e,i=!0):X(e)?(h=!0,u=e.some(C=>en(C)||ws(C)),c=()=>e.map(C=>{if(Ce(C))return C.value;if(en(C))return pn(C);if(Z(C))return tn(C,l,2)})):Z(e)?t?c=()=>tn(e,l,2):c=()=>{if(!(l&&l.isUnmounted))return d&&d(),gt(e,l,3,[f])}:c=mt,t&&i){const C=c;c=()=>pn(C())}let d,f=C=>{d=x.onStop=()=>{tn(C,l,4)}},m;if(Bn)if(f=mt,t?n&&gt(t,l,3,[c(),h?[]:void 0,f]):c(),r==="sync"){const C=Qd();m=C.__watcherHandles||(C.__watcherHandles=[])}else return mt;let v=h?new Array(e.length).fill(Yi):Yi;const b=()=>{if(x.active)if(t){const C=x.run();(i||u||(h?C.some((z,U)=>yn(z,v[U])):yn(C,v)))&&(d&&d(),gt(t,l,3,[C,v===Yi?void 0:h&&v[0]===Yi?[]:v,f]),v=C)}else x.run()};b.allowRecurse=!!t;let R;r==="sync"?R=b:r==="post"?R=()=>Xe(b,l&&l.suspense):(b.pre=!0,l&&(b.id=l.uid),R=()=>js(b));const x=new mo(c,R);t?n?b():v=x.run():r==="post"?Xe(x.run.bind(x),l&&l.suspense):x.run();const T=()=>{x.stop(),l&&l.scope&&uo(l.scope.effects,x)};return m&&m.push(T),T}function od(e,t,n){const i=this.proxy,r=Oe(e)?e.includes(".")?bc(i,e):()=>i[e]:e.bind(i,i);let s;Z(t)?s=t:(s=t.handler,n=t);const o=Me;Fn(this);const a=wc(r,s.bind(i),n);return o?Fn(o):gn(),a}function bc(e,t){const n=t.split(".");return()=>{let i=e;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}function pn(e,t){if(!Ee(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),Ce(e))pn(e.value,t);else if(X(e))for(let n=0;n<e.length;n++)pn(e[n],t);else if(Yn(e)||zn(e))e.forEach(n=>{pn(n,t)});else if(ql(e))for(const n in e)pn(e[n],t);return e}function zs(e,t){const n=Le;if(n===null)return e;const i=Fs(n)||n.proxy,r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[o,a,l,c=Se]=t[s];o&&(Z(o)&&(o={mounted:o,updated:o}),o.deep&&pn(a),r.push({dir:o,instance:i,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function on(e,t,n,i){const r=e.dirs,s=t&&t.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let l=a.dir[i];l&&(Qn(),gt(l,n,8,[e.el,a,e,t]),Zn())}}/*! #__NO_SIDE_EFFECTS__ */function we(e,t){return Z(e)?(()=>Ne({name:e.name},t,{setup:e}))():e}const mi=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function ad(e){Z(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:i,delay:r=200,timeout:s,suspensible:o=!0,onError:a}=e;let l=null,c,u=0;const h=()=>(u++,l=null,d()),d=()=>{let f;return l||(f=l=t().catch(m=>{if(m=m instanceof Error?m:new Error(String(m)),a)return new Promise((v,b)=>{a(m,()=>v(h()),()=>b(m),u+1)});throw m}).then(m=>f!==l&&l?l:(m&&(m.__esModule||m[Symbol.toStringTag]==="Module")&&(m=m.default),c=m,m)))};return we({name:"AsyncComponentWrapper",__asyncLoader:d,get __asyncResolved(){return c},setup(){const f=Me;if(c)return()=>sr(c,f);const m=x=>{l=null,Ui(x,f,13,!i)};if(o&&f.suspense||Bn)return d().then(x=>()=>sr(x,f)).catch(x=>(m(x),()=>i?$(i,{error:x}):null));const v=ce(!1),b=ce(),R=ce(!!r);return r&&setTimeout(()=>{R.value=!1},r),s!=null&&setTimeout(()=>{if(!v.value&&!b.value){const x=new Error(`Async component timed out after ${s}ms.`);m(x),b.value=x}},s),d().then(()=>{v.value=!0,f.parent&&xo(f.parent.vnode)&&js(f.parent.update)}).catch(x=>{m(x),b.value=x}),()=>{if(v.value&&c)return sr(c,f);if(b.value&&i)return $(i,{error:b.value});if(n&&!R.value)return $(n)}}})}function sr(e,t){const{ref:n,props:i,children:r,ce:s}=t.vnode,o=$(e,i,r);return o.ref=n,o.ce=s,delete t.vnode.ce,o}const xo=e=>e.type.__isKeepAlive;function ld(e,t){_c(e,"a",t)}function cd(e,t){_c(e,"da",t)}function _c(e,t,n=Me){const i=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Ls(t,i,n),n){let r=n.parent;for(;r&&r.parent;)xo(r.parent.vnode)&&ud(i,t,n,r),r=r.parent}}function ud(e,t,n,i){const r=Ls(t,e,i,!0);xc(()=>{uo(i[t],r)},n)}function Ls(e,t,n=Me,i=!1){if(n){const r=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;Qn(),Fn(n);const a=gt(t,n,e,o);return gn(),Zn(),a});return i?r.unshift(s):r.push(s),s}}const Bt=e=>(t,n=Me)=>(!Bn||e==="sp")&&Ls(e,(...i)=>t(...i),n),hd=Bt("bm"),ei=Bt("m"),dd=Bt("bu"),fd=Bt("u"),Eo=Bt("bum"),xc=Bt("um"),pd=Bt("sp"),md=Bt("rtg"),gd=Bt("rtc");function vd(e,t=Me){Ls("ec",e,t)}const So="components";function Ut(e,t){return Sc(So,e,!0,t)||e}const Ec=Symbol.for("v-ndc");function _s(e){return Oe(e)?Sc(So,e,!1)||e:e||Ec}function Sc(e,t,n=!0,i=!1){const r=Le||Me;if(r){const s=r.type;if(e===So){const a=Xd(s,!1);if(a&&(a===t||a===Ct(t)||a===Os(Ct(t))))return s}const o=da(r[e]||s[e],t)||da(r.appContext[e],t);return!o&&i?s:o}}function da(e,t){return e&&(e[t]||e[Ct(t)]||e[Os(Ct(t))])}function nt(e,t,n,i){let r;const s=n&&n[i];if(X(e)||Oe(e)){r=new Array(e.length);for(let o=0,a=e.length;o<a;o++)r[o]=t(e[o],o,void 0,s&&s[o])}else if(typeof e=="number"){r=new Array(e);for(let o=0;o<e;o++)r[o]=t(o+1,o,void 0,s&&s[o])}else if(Ee(e))if(e[Symbol.iterator])r=Array.from(e,(o,a)=>t(o,a,void 0,s&&s[a]));else{const o=Object.keys(e);r=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];r[a]=t(e[c],c,a,s&&s[a])}}else r=[];return n&&(n[i]=r),r}function $t(e,t,n={},i,r){if(Le.isCE||Le.parent&&mi(Le.parent)&&Le.parent.isCE)return t!=="default"&&(n.name=t),$("slot",n,i&&i());let s=e[t];s&&s._c&&(s._d=!1),O();const o=s&&Rc(s(n)),a=ee(xe,{key:n.key||o&&o.key||`_${t}`},o||(i?i():[]),o&&e._===1?64:-2);return!r&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function Rc(e){return e.some(t=>Es(t)?!(t.type===sn||t.type===xe&&!Rc(t.children)):!0)?e:null}const jr=e=>e?Dc(e)?Fs(e)||e.proxy:jr(e.parent):null,gi=Ne(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>jr(e.parent),$root:e=>jr(e.root),$emit:e=>e.emit,$options:e=>Ro(e),$forceUpdate:e=>e.f||(e.f=()=>js(e.update)),$nextTick:e=>e.n||(e.n=_o.bind(e.proxy)),$watch:e=>od.bind(e)}),rr=(e,t)=>e!==Se&&!e.__isScriptSetup&&le(e,t),yd={get({_:e},t){const{ctx:n,setupState:i,data:r,props:s,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const f=o[t];if(f!==void 0)switch(f){case 1:return i[t];case 2:return r[t];case 4:return n[t];case 3:return s[t]}else{if(rr(i,t))return o[t]=1,i[t];if(r!==Se&&le(r,t))return o[t]=2,r[t];if((c=e.propsOptions[0])&&le(c,t))return o[t]=3,s[t];if(n!==Se&&le(n,t))return o[t]=4,n[t];Ir&&(o[t]=0)}}const u=gi[t];let h,d;if(u)return t==="$attrs"&&Ge(e,"get",t),u(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(n!==Se&&le(n,t))return o[t]=4,n[t];if(d=l.config.globalProperties,le(d,t))return d[t]},set({_:e},t,n){const{data:i,setupState:r,ctx:s}=e;return rr(r,t)?(r[t]=n,!0):i!==Se&&le(i,t)?(i[t]=n,!0):le(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:r,propsOptions:s}},o){let a;return!!n[o]||e!==Se&&le(e,o)||rr(t,o)||(a=s[0])&&le(a,o)||le(i,o)||le(gi,o)||le(r.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:le(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function fa(e){return X(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Ir=!0;function wd(e){const t=Ro(e),n=e.proxy,i=e.ctx;Ir=!1,t.beforeCreate&&pa(t.beforeCreate,e,"bc");const{data:r,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:m,activated:v,deactivated:b,beforeDestroy:R,beforeUnmount:x,destroyed:T,unmounted:C,render:z,renderTracked:U,renderTriggered:G,errorCaptured:q,serverPrefetch:B,expose:se,inheritAttrs:ve,components:Pe,directives:We,filters:bt}=t;if(c&&bd(c,i,null),o)for(const Y in o){const te=o[Y];Z(te)&&(i[Y]=te.bind(n))}if(r){const Y=r.call(n,n);Ee(Y)&&(e.data=_n(Y))}if(Ir=!0,s)for(const Y in s){const te=s[Y],je=Z(te)?te.bind(n,n):Z(te.get)?te.get.bind(n,n):mt,ct=!Z(te)&&Z(te.set)?te.set.bind(n):mt,Qe=Re({get:je,set:ct});Object.defineProperty(i,Y,{enumerable:!0,configurable:!0,get:()=>Qe.value,set:Ve=>Qe.value=Ve})}if(a)for(const Y in a)Ac(a[Y],i,n,Y);if(l){const Y=Z(l)?l.call(n):l;Reflect.ownKeys(Y).forEach(te=>{cs(te,Y[te])})}u&&pa(u,e,"c");function re(Y,te){X(te)?te.forEach(je=>Y(je.bind(n))):te&&Y(te.bind(n))}if(re(hd,h),re(ei,d),re(dd,f),re(fd,m),re(ld,v),re(cd,b),re(vd,q),re(gd,U),re(md,G),re(Eo,x),re(xc,C),re(pd,B),X(se))if(se.length){const Y=e.exposed||(e.exposed={});se.forEach(te=>{Object.defineProperty(Y,te,{get:()=>n[te],set:je=>n[te]=je})})}else e.exposed||(e.exposed={});z&&e.render===mt&&(e.render=z),ve!=null&&(e.inheritAttrs=ve),Pe&&(e.components=Pe),We&&(e.directives=We)}function bd(e,t,n=mt){X(e)&&(e=Mr(e));for(const i in e){const r=e[i];let s;Ee(r)?"default"in r?s=rt(r.from||i,r.default,!0):s=rt(r.from||i):s=rt(r),Ce(s)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[i]=s}}function pa(e,t,n){gt(X(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function Ac(e,t,n,i){const r=i.includes(".")?bc(n,i):()=>n[i];if(Oe(e)){const s=t[e];Z(s)&&vt(r,s)}else if(Z(e))vt(r,e.bind(n));else if(Ee(e))if(X(e))e.forEach(s=>Ac(s,t,n,i));else{const s=Z(e.handler)?e.handler.bind(n):t[e.handler];Z(s)&&vt(r,s,e)}}function Ro(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let l;return a?l=a:!r.length&&!n&&!i?l=t:(l={},r.length&&r.forEach(c=>xs(l,c,o,!0)),xs(l,t,o)),Ee(t)&&s.set(t,l),l}function xs(e,t,n,i=!1){const{mixins:r,extends:s}=t;s&&xs(e,s,n,!0),r&&r.forEach(o=>xs(e,o,n,!0));for(const o in t)if(!(i&&o==="expose")){const a=_d[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const _d={data:ma,props:ga,emits:ga,methods:di,computed:di,beforeCreate:Ke,created:Ke,beforeMount:Ke,mounted:Ke,beforeUpdate:Ke,updated:Ke,beforeDestroy:Ke,beforeUnmount:Ke,destroyed:Ke,unmounted:Ke,activated:Ke,deactivated:Ke,errorCaptured:Ke,serverPrefetch:Ke,components:di,directives:di,watch:Ed,provide:ma,inject:xd};function ma(e,t){return t?e?function(){return Ne(Z(e)?e.call(this,this):e,Z(t)?t.call(this,this):t)}:t:e}function xd(e,t){return di(Mr(e),Mr(t))}function Mr(e){if(X(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Ke(e,t){return e?[...new Set([].concat(e,t))]:t}function di(e,t){return e?Ne(Object.create(null),e,t):t}function ga(e,t){return e?X(e)&&X(t)?[...new Set([...e,...t])]:Ne(Object.create(null),fa(e),fa(t??{})):t}function Ed(e,t){if(!e)return t;if(!t)return e;const n=Ne(Object.create(null),e);for(const i in t)n[i]=Ke(e[i],t[i]);return n}function Tc(){return{app:null,config:{isNativeTag:nh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Sd=0;function Rd(e,t){return function(i,r=null){Z(i)||(i=Ne({},i)),r!=null&&!Ee(r)&&(r=null);const s=Tc(),o=new WeakSet;let a=!1;const l=s.app={_uid:Sd++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:Zd,get config(){return s.config},set config(c){},use(c,...u){return o.has(c)||(c&&Z(c.install)?(o.add(c),c.install(l,...u)):Z(c)&&(o.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,h){if(!a){const d=$(i,r);return d.appContext=s,u&&t?t(d,c):e(d,c,h),a=!0,l._container=c,c.__vue_app__=l,Fs(d.component)||d.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l},runWithContext(c){ki=l;try{return c()}finally{ki=null}}};return l}}let ki=null;function cs(e,t){if(Me){let n=Me.provides;const i=Me.parent&&Me.parent.provides;i===n&&(n=Me.provides=Object.create(i)),n[e]=t}}function rt(e,t,n=!1){const i=Me||Le;if(i||ki){const r=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:ki._context.provides;if(r&&e in r)return r[e];if(arguments.length>1)return n&&Z(t)?t.call(i&&i.proxy):t}}function Ad(){return!!(Me||Le||ki)}function Td(e,t,n,i=!1){const r={},s={};gs(s,Us,1),e.propsDefaults=Object.create(null),Cc(e,t,r,s);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);n?e.props=i?r:ac(r):e.type.props?e.props=r:e.props=s,e.attrs=s}function Cd(e,t,n,i){const{props:r,attrs:s,vnode:{patchFlag:o}}=e,a=ue(r),[l]=e.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(Is(e.emitsOptions,d))continue;const f=t[d];if(l)if(le(s,d))f!==s[d]&&(s[d]=f,c=!0);else{const m=Ct(d);r[m]=zr(l,a,m,f,e,!1)}else f!==s[d]&&(s[d]=f,c=!0)}}}else{Cc(e,t,r,s)&&(c=!0);let u;for(const h in a)(!t||!le(t,h)&&((u=Gn(h))===h||!le(t,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(r[h]=zr(l,a,h,void 0,e,!0)):delete r[h]);if(s!==a)for(const h in s)(!t||!le(t,h))&&(delete s[h],c=!0)}c&&Dt(e,"set","$attrs")}function Cc(e,t,n,i){const[r,s]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(as(l))continue;const c=t[l];let u;r&&le(r,u=Ct(l))?!s||!s.includes(u)?n[u]=c:(a||(a={}))[u]=c:Is(e.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(s){const l=ue(n),c=a||Se;for(let u=0;u<s.length;u++){const h=s[u];n[h]=zr(r,l,h,c[h],e,!le(c,h))}}return o}function zr(e,t,n,i,r,s){const o=e[n];if(o!=null){const a=le(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Z(l)){const{propsDefaults:c}=r;n in c?i=c[n]:(Fn(r),i=c[n]=l.call(null,t),gn())}else i=l}o[0]&&(s&&!a?i=!1:o[1]&&(i===""||i===Gn(n))&&(i=!0))}return i}function Oc(e,t,n=!1){const i=t.propsCache,r=i.get(e);if(r)return r;const s=e.props,o={},a=[];let l=!1;if(!Z(e)){const u=h=>{l=!0;const[d,f]=Oc(h,t,!0);Ne(o,d),f&&a.push(...f)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!s&&!l)return Ee(e)&&i.set(e,Mn),Mn;if(X(s))for(let u=0;u<s.length;u++){const h=Ct(s[u]);va(h)&&(o[h]=Se)}else if(s)for(const u in s){const h=Ct(u);if(va(h)){const d=s[u],f=o[h]=X(d)||Z(d)?{type:d}:Ne({},d);if(f){const m=ba(Boolean,f.type),v=ba(String,f.type);f[0]=m>-1,f[1]=v<0||m<v,(m>-1||le(f,"default"))&&a.push(h)}}}const c=[o,a];return Ee(e)&&i.set(e,c),c}function va(e){return e[0]!=="$"}function ya(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function wa(e,t){return ya(e)===ya(t)}function ba(e,t){return X(t)?t.findIndex(n=>wa(n,e)):Z(t)&&wa(t,e)?0:-1}const $c=e=>e[0]==="_"||e==="$stable",Ao=e=>X(e)?e.map(Et):[Et(e)],Od=(e,t,n)=>{if(t._n)return t;const i=ge((...r)=>Ao(t(...r)),n);return i._c=!1,i},kc=(e,t,n)=>{const i=e._ctx;for(const r in e){if($c(r))continue;const s=e[r];if(Z(s))t[r]=Od(r,s,i);else if(s!=null){const o=Ao(s);t[r]=()=>o}}},Pc=(e,t)=>{const n=Ao(t);e.slots.default=()=>n},$d=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=ue(t),gs(t,"_",n)):kc(t,e.slots={})}else e.slots={},t&&Pc(e,t);gs(e.slots,Us,1)},kd=(e,t,n)=>{const{vnode:i,slots:r}=e;let s=!0,o=Se;if(i.shapeFlag&32){const a=t._;a?n&&a===1?s=!1:(Ne(r,t),!n&&a===1&&delete r._):(s=!t.$stable,kc(t,r)),o=t}else t&&(Pc(e,t),o={default:1});if(s)for(const a in r)!$c(a)&&o[a]==null&&delete r[a]};function Lr(e,t,n,i,r=!1){if(X(e)){e.forEach((d,f)=>Lr(d,t&&(X(t)?t[f]:t),n,i,r));return}if(mi(i)&&!r)return;const s=i.shapeFlag&4?Fs(i.component)||i.component.proxy:i.el,o=r?null:s,{i:a,r:l}=e,c=t&&t.r,u=a.refs===Se?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(Oe(c)?(u[c]=null,le(h,c)&&(h[c]=null)):Ce(c)&&(c.value=null)),Z(l))tn(l,a,12,[o,u]);else{const d=Oe(l),f=Ce(l);if(d||f){const m=()=>{if(e.f){const v=d?le(h,l)?h[l]:u[l]:l.value;r?X(v)&&uo(v,s):X(v)?v.includes(s)||v.push(s):d?(u[l]=[s],le(h,l)&&(h[l]=u[l])):(l.value=[s],e.k&&(u[e.k]=l.value))}else d?(u[l]=o,le(h,l)&&(h[l]=o)):f&&(l.value=o,e.k&&(u[e.k]=o))};o?(m.id=-1,Xe(m,n)):m()}}}const Xe=rd;function Pd(e){return jd(e)}function jd(e,t){const n=Cr();n.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=mt,insertStaticContent:m}=e,v=(p,g,y,_=null,A=null,k=null,L=!1,j=null,I=!!g.dynamicChildren)=>{if(p===g)return;p&&!oi(p,g)&&(_=S(p),Ve(p,A,k,!0),p=null),g.patchFlag===-2&&(I=!1,g.dynamicChildren=null);const{type:P,ref:K,shapeFlag:N}=g;switch(P){case Ds:b(p,g,y,_);break;case sn:R(p,g,y,_);break;case or:p==null&&x(g,y,_,L);break;case xe:Pe(p,g,y,_,A,k,L,j,I);break;default:N&1?z(p,g,y,_,A,k,L,j,I):N&6?We(p,g,y,_,A,k,L,j,I):(N&64||N&128)&&P.process(p,g,y,_,A,k,L,j,I,M)}K!=null&&A&&Lr(K,p&&p.ref,k,g||p,!g)},b=(p,g,y,_)=>{if(p==null)i(g.el=a(g.children),y,_);else{const A=g.el=p.el;g.children!==p.children&&c(A,g.children)}},R=(p,g,y,_)=>{p==null?i(g.el=l(g.children||""),y,_):g.el=p.el},x=(p,g,y,_)=>{[p.el,p.anchor]=m(p.children,g,y,_,p.el,p.anchor)},T=({el:p,anchor:g},y,_)=>{let A;for(;p&&p!==g;)A=d(p),i(p,y,_),p=A;i(g,y,_)},C=({el:p,anchor:g})=>{let y;for(;p&&p!==g;)y=d(p),r(p),p=y;r(g)},z=(p,g,y,_,A,k,L,j,I)=>{L=L||g.type==="svg",p==null?U(g,y,_,A,k,L,j,I):B(p,g,A,k,L,j,I)},U=(p,g,y,_,A,k,L,j)=>{let I,P;const{type:K,props:N,shapeFlag:J,transition:Q,dirs:ne}=p;if(I=p.el=o(p.type,k,N&&N.is,N),J&8?u(I,p.children):J&16&&q(p.children,I,null,_,A,k&&K!=="foreignObject",L,j),ne&&on(p,null,_,"created"),G(I,p,p.scopeId,L,_),N){for(const ye in N)ye!=="value"&&!as(ye)&&s(I,ye,null,N[ye],k,p.children,_,A,Fe);"value"in N&&s(I,"value",null,N.value),(P=N.onVnodeBeforeMount)&&xt(P,_,p)}ne&&on(p,null,_,"beforeMount");const be=Id(A,Q);be&&Q.beforeEnter(I),i(I,g,y),((P=N&&N.onVnodeMounted)||be||ne)&&Xe(()=>{P&&xt(P,_,p),be&&Q.enter(I),ne&&on(p,null,_,"mounted")},A)},G=(p,g,y,_,A)=>{if(y&&f(p,y),_)for(let k=0;k<_.length;k++)f(p,_[k]);if(A){let k=A.subTree;if(g===k){const L=A.vnode;G(p,L,L.scopeId,L.slotScopeIds,A.parent)}}},q=(p,g,y,_,A,k,L,j,I=0)=>{for(let P=I;P<p.length;P++){const K=p[P]=j?Jt(p[P]):Et(p[P]);v(null,K,g,y,_,A,k,L,j)}},B=(p,g,y,_,A,k,L)=>{const j=g.el=p.el;let{patchFlag:I,dynamicChildren:P,dirs:K}=g;I|=p.patchFlag&16;const N=p.props||Se,J=g.props||Se;let Q;y&&an(y,!1),(Q=J.onVnodeBeforeUpdate)&&xt(Q,y,g,p),K&&on(g,p,y,"beforeUpdate"),y&&an(y,!0);const ne=A&&g.type!=="foreignObject";if(P?se(p.dynamicChildren,P,j,y,_,ne,k):L||te(p,g,j,null,y,_,ne,k,!1),I>0){if(I&16)ve(j,g,N,J,y,_,A);else if(I&2&&N.class!==J.class&&s(j,"class",null,J.class,A),I&4&&s(j,"style",N.style,J.style,A),I&8){const be=g.dynamicProps;for(let ye=0;ye<be.length;ye++){const $e=be[ye],ut=N[$e],Rn=J[$e];(Rn!==ut||$e==="value")&&s(j,$e,ut,Rn,A,p.children,y,_,Fe)}}I&1&&p.children!==g.children&&u(j,g.children)}else!L&&P==null&&ve(j,g,N,J,y,_,A);((Q=J.onVnodeUpdated)||K)&&Xe(()=>{Q&&xt(Q,y,g,p),K&&on(g,p,y,"updated")},_)},se=(p,g,y,_,A,k,L)=>{for(let j=0;j<g.length;j++){const I=p[j],P=g[j],K=I.el&&(I.type===xe||!oi(I,P)||I.shapeFlag&70)?h(I.el):y;v(I,P,K,null,_,A,k,L,!0)}},ve=(p,g,y,_,A,k,L)=>{if(y!==_){if(y!==Se)for(const j in y)!as(j)&&!(j in _)&&s(p,j,y[j],null,L,g.children,A,k,Fe);for(const j in _){if(as(j))continue;const I=_[j],P=y[j];I!==P&&j!=="value"&&s(p,j,P,I,L,g.children,A,k,Fe)}"value"in _&&s(p,"value",y.value,_.value)}},Pe=(p,g,y,_,A,k,L,j,I)=>{const P=g.el=p?p.el:a(""),K=g.anchor=p?p.anchor:a("");let{patchFlag:N,dynamicChildren:J,slotScopeIds:Q}=g;Q&&(j=j?j.concat(Q):Q),p==null?(i(P,y,_),i(K,y,_),q(g.children,y,K,A,k,L,j,I)):N>0&&N&64&&J&&p.dynamicChildren?(se(p.dynamicChildren,J,y,A,k,L,j),(g.key!=null||A&&g===A.subTree)&&To(p,g,!0)):te(p,g,y,K,A,k,L,j,I)},We=(p,g,y,_,A,k,L,j,I)=>{g.slotScopeIds=j,p==null?g.shapeFlag&512?A.ctx.activate(g,y,_,L,I):bt(g,y,_,A,k,L,I):qe(p,g,I)},bt=(p,g,y,_,A,k,L)=>{const j=p.component=Wd(p,_,A);if(xo(p)&&(j.ctx.renderer=M),qd(j),j.asyncDep){if(A&&A.registerDep(j,re),!p.el){const I=j.subTree=$(sn);R(null,I,g,y)}return}re(j,p,g,y,A,k,L)},qe=(p,g,y)=>{const _=g.component=p.component;if(nd(p,g,y))if(_.asyncDep&&!_.asyncResolved){Y(_,g,y);return}else _.next=g,Jh(_.update),_.update();else g.el=p.el,_.vnode=g},re=(p,g,y,_,A,k,L)=>{const j=()=>{if(p.isMounted){let{next:K,bu:N,u:J,parent:Q,vnode:ne}=p,be=K,ye;an(p,!1),K?(K.el=ne.el,Y(p,K,L)):K=ne,N&&ls(N),(ye=K.props&&K.props.onVnodeBeforeUpdate)&&xt(ye,Q,K,ne),an(p,!0);const $e=ir(p),ut=p.subTree;p.subTree=$e,v(ut,$e,h(ut.el),S(ut),p,A,k),K.el=$e.el,be===null&&id(p,$e.el),J&&Xe(J,A),(ye=K.props&&K.props.onVnodeUpdated)&&Xe(()=>xt(ye,Q,K,ne),A)}else{let K;const{el:N,props:J}=g,{bm:Q,m:ne,parent:be}=p,ye=mi(g);if(an(p,!1),Q&&ls(Q),!ye&&(K=J&&J.onVnodeBeforeMount)&&xt(K,be,g),an(p,!0),N&&pe){const $e=()=>{p.subTree=ir(p),pe(N,p.subTree,p,A,null)};ye?g.type.__asyncLoader().then(()=>!p.isUnmounted&&$e()):$e()}else{const $e=p.subTree=ir(p);v(null,$e,y,_,p,A,k),g.el=$e.el}if(ne&&Xe(ne,A),!ye&&(K=J&&J.onVnodeMounted)){const $e=g;Xe(()=>xt(K,be,$e),A)}(g.shapeFlag&256||be&&mi(be.vnode)&&be.vnode.shapeFlag&256)&&p.a&&Xe(p.a,A),p.isMounted=!0,g=y=_=null}},I=p.effect=new mo(j,()=>js(P),p.scope),P=p.update=()=>I.run();P.id=p.uid,an(p,!0),P()},Y=(p,g,y)=>{g.component=p;const _=p.vnode.props;p.vnode=g,p.next=null,Cd(p,g.props,_,y),kd(p,g.children,y),Qn(),ua(),Zn()},te=(p,g,y,_,A,k,L,j,I=!1)=>{const P=p&&p.children,K=p?p.shapeFlag:0,N=g.children,{patchFlag:J,shapeFlag:Q}=g;if(J>0){if(J&128){ct(P,N,y,_,A,k,L,j,I);return}else if(J&256){je(P,N,y,_,A,k,L,j,I);return}}Q&8?(K&16&&Fe(P,A,k),N!==P&&u(y,N)):K&16?Q&16?ct(P,N,y,_,A,k,L,j,I):Fe(P,A,k,!0):(K&8&&u(y,""),Q&16&&q(N,y,_,A,k,L,j,I))},je=(p,g,y,_,A,k,L,j,I)=>{p=p||Mn,g=g||Mn;const P=p.length,K=g.length,N=Math.min(P,K);let J;for(J=0;J<N;J++){const Q=g[J]=I?Jt(g[J]):Et(g[J]);v(p[J],Q,y,null,A,k,L,j,I)}P>K?Fe(p,A,k,!0,!1,N):q(g,y,_,A,k,L,j,I,N)},ct=(p,g,y,_,A,k,L,j,I)=>{let P=0;const K=g.length;let N=p.length-1,J=K-1;for(;P<=N&&P<=J;){const Q=p[P],ne=g[P]=I?Jt(g[P]):Et(g[P]);if(oi(Q,ne))v(Q,ne,y,null,A,k,L,j,I);else break;P++}for(;P<=N&&P<=J;){const Q=p[N],ne=g[J]=I?Jt(g[J]):Et(g[J]);if(oi(Q,ne))v(Q,ne,y,null,A,k,L,j,I);else break;N--,J--}if(P>N){if(P<=J){const Q=J+1,ne=Q<K?g[Q].el:_;for(;P<=J;)v(null,g[P]=I?Jt(g[P]):Et(g[P]),y,ne,A,k,L,j,I),P++}}else if(P>J)for(;P<=N;)Ve(p[P],A,k,!0),P++;else{const Q=P,ne=P,be=new Map;for(P=ne;P<=J;P++){const Ze=g[P]=I?Jt(g[P]):Et(g[P]);Ze.key!=null&&be.set(Ze.key,P)}let ye,$e=0;const ut=J-ne+1;let Rn=!1,Qo=0;const ri=new Array(ut);for(P=0;P<ut;P++)ri[P]=0;for(P=Q;P<=N;P++){const Ze=p[P];if($e>=ut){Ve(Ze,A,k,!0);continue}let _t;if(Ze.key!=null)_t=be.get(Ze.key);else for(ye=ne;ye<=J;ye++)if(ri[ye-ne]===0&&oi(Ze,g[ye])){_t=ye;break}_t===void 0?Ve(Ze,A,k,!0):(ri[_t-ne]=P+1,_t>=Qo?Qo=_t:Rn=!0,v(Ze,g[_t],y,null,A,k,L,j,I),$e++)}const Zo=Rn?Md(ri):Mn;for(ye=Zo.length-1,P=ut-1;P>=0;P--){const Ze=ne+P,_t=g[Ze],ea=Ze+1<K?g[Ze+1].el:_;ri[P]===0?v(null,_t,y,ea,A,k,L,j,I):Rn&&(ye<0||P!==Zo[ye]?Qe(_t,y,ea,2):ye--)}}},Qe=(p,g,y,_,A=null)=>{const{el:k,type:L,transition:j,children:I,shapeFlag:P}=p;if(P&6){Qe(p.component.subTree,g,y,_);return}if(P&128){p.suspense.move(g,y,_);return}if(P&64){L.move(p,g,y,M);return}if(L===xe){i(k,g,y);for(let N=0;N<I.length;N++)Qe(I[N],g,y,_);i(p.anchor,g,y);return}if(L===or){T(p,g,y);return}if(_!==2&&P&1&&j)if(_===0)j.beforeEnter(k),i(k,g,y),Xe(()=>j.enter(k),A);else{const{leave:N,delayLeave:J,afterLeave:Q}=j,ne=()=>i(k,g,y),be=()=>{N(k,()=>{ne(),Q&&Q()})};J?J(k,ne,be):be()}else i(k,g,y)},Ve=(p,g,y,_=!1,A=!1)=>{const{type:k,props:L,ref:j,children:I,dynamicChildren:P,shapeFlag:K,patchFlag:N,dirs:J}=p;if(j!=null&&Lr(j,null,y,p,!0),K&256){g.ctx.deactivate(p);return}const Q=K&1&&J,ne=!mi(p);let be;if(ne&&(be=L&&L.onVnodeBeforeUnmount)&&xt(be,g,p),K&6)Wi(p.component,y,_);else{if(K&128){p.suspense.unmount(y,_);return}Q&&on(p,null,g,"beforeUnmount"),K&64?p.type.remove(p,g,y,A,M,_):P&&(k!==xe||N>0&&N&64)?Fe(P,g,y,!1,!0):(k===xe&&N&384||!A&&K&16)&&Fe(I,g,y),_&&En(p)}(ne&&(be=L&&L.onVnodeUnmounted)||Q)&&Xe(()=>{be&&xt(be,g,p),Q&&on(p,null,g,"unmounted")},y)},En=p=>{const{type:g,el:y,anchor:_,transition:A}=p;if(g===xe){Sn(y,_);return}if(g===or){C(p);return}const k=()=>{r(y),A&&!A.persisted&&A.afterLeave&&A.afterLeave()};if(p.shapeFlag&1&&A&&!A.persisted){const{leave:L,delayLeave:j}=A,I=()=>L(y,k);j?j(p.el,k,I):I()}else k()},Sn=(p,g)=>{let y;for(;p!==g;)y=d(p),r(p),p=y;r(g)},Wi=(p,g,y)=>{const{bum:_,scope:A,update:k,subTree:L,um:j}=p;_&&ls(_),A.stop(),k&&(k.active=!1,Ve(L,p,g,y)),j&&Xe(j,g),Xe(()=>{p.isUnmounted=!0},g),g&&g.pendingBranch&&!g.isUnmounted&&p.asyncDep&&!p.asyncResolved&&p.suspenseId===g.pendingId&&(g.deps--,g.deps===0&&g.resolve())},Fe=(p,g,y,_=!1,A=!1,k=0)=>{for(let L=k;L<p.length;L++)Ve(p[L],g,y,_,A)},S=p=>p.shapeFlag&6?S(p.component.subTree):p.shapeFlag&128?p.suspense.next():d(p.anchor||p.el),D=(p,g,y)=>{p==null?g._vnode&&Ve(g._vnode,null,null,!0):v(g._vnode||null,p,g,null,null,null,y),ua(),gc(),g._vnode=p},M={p:v,um:Ve,m:Qe,r:En,mt:bt,mc:q,pc:te,pbc:se,n:S,o:e};let W,pe;return t&&([W,pe]=t(M)),{render:D,hydrate:W,createApp:Rd(D,W)}}function an({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Id(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function To(e,t,n=!1){const i=e.children,r=t.children;if(X(i)&&X(r))for(let s=0;s<i.length;s++){const o=i[s];let a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=Jt(r[s]),a.el=o.el),n||To(o,a)),a.type===Ds&&(a.el=o.el)}}function Md(e){const t=e.slice(),n=[0];let i,r,s,o,a;const l=e.length;for(i=0;i<l;i++){const c=e[i];if(c!==0){if(r=n[n.length-1],e[r]<c){t[i]=r,n.push(i);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,e[n[a]]<c?s=a+1:o=a;c<e[n[s]]&&(s>0&&(t[i]=n[s-1]),n[s]=i)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=t[o];return n}const zd=e=>e.__isTeleport,vi=e=>e&&(e.disabled||e.disabled===""),_a=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Dr=(e,t)=>{const n=e&&e.to;return Oe(n)?t?t(n):null:n},Ld={__isTeleport:!0,process(e,t,n,i,r,s,o,a,l,c){const{mc:u,pc:h,pbc:d,o:{insert:f,querySelector:m,createText:v,createComment:b}}=c,R=vi(t.props);let{shapeFlag:x,children:T,dynamicChildren:C}=t;if(e==null){const z=t.el=v(""),U=t.anchor=v("");f(z,n,i),f(U,n,i);const G=t.target=Dr(t.props,m),q=t.targetAnchor=v("");G&&(f(q,G),o=o||_a(G));const B=(se,ve)=>{x&16&&u(T,se,ve,r,s,o,a,l)};R?B(n,U):G&&B(G,q)}else{t.el=e.el;const z=t.anchor=e.anchor,U=t.target=e.target,G=t.targetAnchor=e.targetAnchor,q=vi(e.props),B=q?n:U,se=q?z:G;if(o=o||_a(U),C?(d(e.dynamicChildren,C,B,r,s,o,a),To(e,t,!0)):l||h(e,t,B,se,r,s,o,a,!1),R)q?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Gi(t,n,z,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const ve=t.target=Dr(t.props,m);ve&&Gi(t,ve,null,c,0)}else q&&Gi(t,U,G,c,1)}Ic(t)},remove(e,t,n,i,{um:r,o:{remove:s}},o){const{shapeFlag:a,children:l,anchor:c,targetAnchor:u,target:h,props:d}=e;if(h&&s(u),o&&s(c),a&16){const f=o||!vi(d);for(let m=0;m<l.length;m++){const v=l[m];r(v,t,n,f,!!v.dynamicChildren)}}},move:Gi,hydrate:Dd};function Gi(e,t,n,{o:{insert:i},m:r},s=2){s===0&&i(e.targetAnchor,t,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=e,h=s===2;if(h&&i(o,t,n),(!h||vi(u))&&l&16)for(let d=0;d<c.length;d++)r(c[d],t,n,2);h&&i(a,t,n)}function Dd(e,t,n,i,r,s,{o:{nextSibling:o,parentNode:a,querySelector:l}},c){const u=t.target=Dr(t.props,l);if(u){const h=u._lpa||u.firstChild;if(t.shapeFlag&16)if(vi(t.props))t.anchor=c(o(e),t,a(e),n,i,r,s),t.targetAnchor=h;else{t.anchor=o(e);let d=h;for(;d;)if(d=o(d),d&&d.nodeType===8&&d.data==="teleport anchor"){t.targetAnchor=d,u._lpa=t.targetAnchor&&o(t.targetAnchor);break}c(h,t,u,n,i,r,s)}Ic(t)}return t.anchor&&o(t.anchor)}const jc=Ld;function Ic(e){const t=e.ctx;if(t&&t.ut){let n=e.children[0].el;for(;n&&n!==e.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",t.uid),n=n.nextSibling;t.ut()}}const xe=Symbol.for("v-fgt"),Ds=Symbol.for("v-txt"),sn=Symbol.for("v-cmt"),or=Symbol.for("v-stc"),yi=[];let pt=null;function O(e=!1){yi.push(pt=e?null:[])}function Ud(){yi.pop(),pt=yi[yi.length-1]||null}let Pi=1;function xa(e){Pi+=e}function Mc(e){return e.dynamicChildren=Pi>0?pt||Mn:null,Ud(),Pi>0&&pt&&pt.push(e),e}function H(e,t,n,i,r,s){return Mc(w(e,t,n,i,r,s,!0))}function ee(e,t,n,i,r){return Mc($(e,t,n,i,r,!0))}function Es(e){return e?e.__v_isVNode===!0:!1}function oi(e,t){return e.type===t.type&&e.key===t.key}const Us="__vInternal",zc=({key:e})=>e??null,us=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Oe(e)||Ce(e)||Z(e)?{i:Le,r:e,k:t,f:!!n}:e:null);function w(e,t=null,n=null,i=0,r=null,s=e===xe?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&zc(t),ref:t&&us(t),scopeId:Ms,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Le};return a?(Co(l,n),s&128&&e.normalize(l)):n&&(l.shapeFlag|=Oe(n)?8:16),Pi>0&&!o&&pt&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&pt.push(l),l}const $=Nd;function Nd(e,t=null,n=null,i=0,r=null,s=!1){if((!e||e===Ec)&&(e=sn),Es(e)){const a=Nn(e,t,!0);return n&&Co(a,n),Pi>0&&!s&&pt&&(a.shapeFlag&6?pt[pt.indexOf(e)]=a:pt.push(a)),a.patchFlag|=-2,a}if(Yd(e)&&(e=e.__vccOpts),t){t=Fd(t);let{class:a,style:l}=t;a&&!Oe(a)&&(t.class=Je(a)),Ee(l)&&(cc(l)&&!X(l)&&(l=Ne({},l)),t.style=$s(l))}const o=Oe(e)?1:sd(e)?128:zd(e)?64:Ee(e)?4:Z(e)?2:0;return w(e,t,n,i,r,o,s,!0)}function Fd(e){return e?cc(e)||Us in e?Ne({},e):e:null}function Nn(e,t,n=!1){const{props:i,ref:r,patchFlag:s,children:o}=e,a=t?Ns(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&zc(a),ref:t&&t.ref?n&&r?X(r)?r.concat(us(t)):[r,us(t)]:us(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==xe?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Nn(e.ssContent),ssFallback:e.ssFallback&&Nn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Lc(e=" ",t=0){return $(Ds,null,e,t)}function Te(e="",t=!1){return t?(O(),ee(sn,null,e)):$(sn,null,e)}function Et(e){return e==null||typeof e=="boolean"?$(sn):X(e)?$(xe,null,e.slice()):typeof e=="object"?Jt(e):$(Ds,null,String(e))}function Jt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Nn(e)}function Co(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(X(t))n=16;else if(typeof t=="object")if(i&65){const r=t.default;r&&(r._c&&(r._d=!1),Co(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!(Us in t)?t._ctx=Le:r===3&&Le&&(Le.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Z(t)?(t={default:t,_ctx:Le},n=32):(t=String(t),i&64?(n=16,t=[Lc(t)]):n=8);e.children=t,e.shapeFlag|=n}function Ns(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const r in i)if(r==="class")t.class!==i.class&&(t.class=Je([t.class,i.class]));else if(r==="style")t.style=$s([t.style,i.style]);else if(Ts(r)){const s=t[r],o=i[r];o&&s!==o&&!(X(s)&&s.includes(o))&&(t[r]=s?[].concat(s,o):o)}else r!==""&&(t[r]=i[r])}return t}function xt(e,t,n,i=null){gt(e,t,7,[n,i])}const Bd=Tc();let Hd=0;function Wd(e,t,n){const i=e.type,r=(t?t.appContext:e.appContext)||Bd,s={uid:Hd++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new Jl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Oc(i,r),emitsOptions:yc(i,r),emit:null,emitted:null,propsDefaults:Se,inheritAttrs:i.inheritAttrs,ctx:Se,data:Se,props:Se,attrs:Se,slots:Se,refs:Se,setupState:Se,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=Gh.bind(null,s),e.ce&&e.ce(s),s}let Me=null,Oo,An,Ea="__VUE_INSTANCE_SETTERS__";(An=Cr()[Ea])||(An=Cr()[Ea]=[]),An.push(e=>Me=e),Oo=e=>{An.length>1?An.forEach(t=>t(e)):An[0](e)};const Fn=e=>{Oo(e),e.scope.on()},gn=()=>{Me&&Me.scope.off(),Oo(null)};function Dc(e){return e.vnode.shapeFlag&4}let Bn=!1;function qd(e,t=!1){Bn=t;const{props:n,children:i}=e.vnode,r=Dc(e);Td(e,n,r,t),$d(e,i);const s=r?Vd(e,t):void 0;return Bn=!1,s}function Vd(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Ps(new Proxy(e.ctx,yd));const{setup:i}=n;if(i){const r=e.setupContext=i.length>1?Jd(e):null;Fn(e),Qn();const s=tn(i,e,0,[e.props,r]);if(Zn(),gn(),Hl(s)){if(s.then(gn,gn),t)return s.then(o=>{Sa(e,o,t)}).catch(o=>{Ui(o,e,0)});e.asyncDep=s}else Sa(e,s,t)}else Uc(e,t)}function Sa(e,t,n){Z(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ee(t)&&(e.setupState=fc(t)),Uc(e,n)}let Ra;function Uc(e,t,n){const i=e.type;if(!e.render){if(!t&&Ra&&!i.render){const r=i.template||Ro(e).template;if(r){const{isCustomElement:s,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=i,c=Ne(Ne({isCustomElement:s,delimiters:a},o),l);i.render=Ra(r,c)}}e.render=i.render||mt}{Fn(e),Qn();try{wd(e)}finally{Zn(),gn()}}}function Kd(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return Ge(e,"get","$attrs"),t[n]}}))}function Jd(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return Kd(e)},slots:e.slots,emit:e.emit,expose:t}}function Fs(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(fc(Ps(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in gi)return gi[n](e)},has(t,n){return n in t||n in gi}}))}function Xd(e,t=!0){return Z(e)?e.displayName||e.name:e.name||t&&e.__name}function Yd(e){return Z(e)&&"__vccOpts"in e}const Re=(e,t)=>qh(e,t,Bn);function Nc(e,t,n){const i=arguments.length;return i===2?Ee(t)&&!X(t)?Es(t)?$(e,null,[t]):$(e,t):$(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&Es(n)&&(n=[n]),$(e,t,n))}const Gd=Symbol.for("v-scx"),Qd=()=>rt(Gd),Zd="3.3.7",ef="http://www.w3.org/2000/svg",hn=typeof document<"u"?document:null,Aa=hn&&hn.createElement("template"),tf={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t?hn.createElementNS(ef,e):hn.createElement(e,n?{is:n}:void 0);return e==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:e=>hn.createTextNode(e),createComment:e=>hn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>hn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,r,s){const o=n?n.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===s||!(r=r.nextSibling)););else{Aa.innerHTML=i?`<svg>${e}</svg>`:e;const a=Aa.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},nf=Symbol("_vtc");function sf(e,t,n){const i=e[nf];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const $o=Symbol("_vod"),ko={beforeMount(e,{value:t},{transition:n}){e[$o]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):ai(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),ai(e,!0),i.enter(e)):i.leave(e,()=>{ai(e,!1)}):ai(e,t))},beforeUnmount(e,{value:t}){ai(e,t)}};function ai(e,t){e.style.display=t?e[$o]:"none"}function rf(e,t,n){const i=e.style,r=Oe(n);if(n&&!r){if(t&&!Oe(t))for(const s in t)n[s]==null&&Ur(i,s,"");for(const s in n)Ur(i,s,n[s])}else{const s=i.display;r?t!==n&&(i.cssText=n):t&&e.removeAttribute("style"),$o in e&&(i.display=s)}}const Ta=/\s*!important$/;function Ur(e,t,n){if(X(n))n.forEach(i=>Ur(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=of(e,t);Ta.test(n)?e.setProperty(Gn(i),n.replace(Ta,""),"important"):e[i]=n}}const Ca=["Webkit","Moz","ms"],ar={};function of(e,t){const n=ar[t];if(n)return n;let i=Ct(t);if(i!=="filter"&&i in e)return ar[t]=i;i=Os(i);for(let r=0;r<Ca.length;r++){const s=Ca[r]+i;if(s in e)return ar[t]=s}return t}const Oa="http://www.w3.org/1999/xlink";function af(e,t,n,i,r){if(i&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(Oa,t.slice(6,t.length)):e.setAttributeNS(Oa,t,n);else{const s=fh(t);n==null||s&&!Vl(n)?e.removeAttribute(t):e.setAttribute(t,s?"":n)}}function lf(e,t,n,i,r,s,o){if(t==="innerHTML"||t==="textContent"){i&&o(i,r,s),e[t]=n??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){e._value=n;const c=a==="OPTION"?e.getAttribute("value"):e.value,u=n??"";c!==u&&(e.value=u),n==null&&e.removeAttribute(t);return}let l=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=Vl(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(t)}function zt(e,t,n,i){e.addEventListener(t,n,i)}function cf(e,t,n,i){e.removeEventListener(t,n,i)}const $a=Symbol("_vei");function uf(e,t,n,i,r=null){const s=e[$a]||(e[$a]={}),o=s[t];if(i&&o)o.value=i;else{const[a,l]=hf(t);if(i){const c=s[t]=pf(i,r);zt(e,a,c,l)}else o&&(cf(e,a,o,l),s[t]=void 0)}}const ka=/(?:Once|Passive|Capture)$/;function hf(e){let t;if(ka.test(e)){t={};let i;for(;i=e.match(ka);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Gn(e.slice(2)),t]}let lr=0;const df=Promise.resolve(),ff=()=>lr||(df.then(()=>lr=0),lr=Date.now());function pf(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;gt(mf(i,n.value),t,5,[i])};return n.value=e,n.attached=ff(),n}function mf(e,t){if(X(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>r=>!r._stopped&&i&&i(r))}else return t}const Pa=/^on[a-z]/,gf=(e,t,n,i,r=!1,s,o,a,l)=>{t==="class"?sf(e,i,r):t==="style"?rf(e,n,i):Ts(t)?co(t)||uf(e,t,n,i,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):vf(e,t,i,r))?lf(e,t,i,s,o,a,l):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),af(e,t,i,r))};function vf(e,t,n,i){return i?!!(t==="innerHTML"||t==="textContent"||t in e&&Pa.test(t)&&Z(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Pa.test(t)&&Oe(n)?!1:t in e}const rn=e=>{const t=e.props["onUpdate:modelValue"]||!1;return X(t)?n=>ls(t,n):t};function yf(e){e.target.composing=!0}function ja(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ot=Symbol("_assign"),Ia={created(e,{modifiers:{lazy:t,trim:n,number:i}},r){e[ot]=rn(r);const s=i||r.props&&r.props.type==="number";zt(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),s&&(a=vs(a)),e[ot](a)}),n&&zt(e,"change",()=>{e.value=e.value.trim()}),t||(zt(e,"compositionstart",yf),zt(e,"compositionend",ja),zt(e,"change",ja))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:i,number:r}},s){if(e[ot]=rn(s),e.composing||document.activeElement===e&&e.type!=="range"&&(n||i&&e.value.trim()===t||(r||e.type==="number")&&vs(e.value)===t))return;const o=t??"";e.value!==o&&(e.value=o)}},wf={deep:!0,created(e,t,n){e[ot]=rn(n),zt(e,"change",()=>{const i=e._modelValue,r=Hn(e),s=e.checked,o=e[ot];if(X(i)){const a=fo(i,r),l=a!==-1;if(s&&!l)o(i.concat(r));else if(!s&&l){const c=[...i];c.splice(a,1),o(c)}}else if(Yn(i)){const a=new Set(i);s?a.add(r):a.delete(r),o(a)}else o(Fc(e,s))})},mounted:Ma,beforeUpdate(e,t,n){e[ot]=rn(n),Ma(e,t,n)}};function Ma(e,{value:t,oldValue:n},i){e._modelValue=t,X(t)?e.checked=fo(t,i.props.value)>-1:Yn(t)?e.checked=t.has(i.props.value):t!==n&&(e.checked=wn(t,Fc(e,!0)))}const bf={created(e,{value:t},n){e.checked=wn(t,n.props.value),e[ot]=rn(n),zt(e,"change",()=>{e[ot](Hn(e))})},beforeUpdate(e,{value:t,oldValue:n},i){e[ot]=rn(i),t!==n&&(e.checked=wn(t,i.props.value))}},_f={deep:!0,created(e,{value:t,modifiers:{number:n}},i){const r=Yn(t);zt(e,"change",()=>{const s=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?vs(Hn(o)):Hn(o));e[ot](e.multiple?r?new Set(s):s:s[0])}),e[ot]=rn(i)},mounted(e,{value:t}){za(e,t)},beforeUpdate(e,t,n){e[ot]=rn(n)},updated(e,{value:t}){za(e,t)}};function za(e,t){const n=e.multiple;if(!(n&&!X(t)&&!Yn(t))){for(let i=0,r=e.options.length;i<r;i++){const s=e.options[i],o=Hn(s);if(n)X(t)?s.selected=fo(t,o)>-1:s.selected=t.has(o);else if(wn(Hn(s),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Hn(e){return"_value"in e?e._value:e.value}function Fc(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const xf={created(e,t,n){Qi(e,t,n,null,"created")},mounted(e,t,n){Qi(e,t,n,null,"mounted")},beforeUpdate(e,t,n,i){Qi(e,t,n,i,"beforeUpdate")},updated(e,t,n,i){Qi(e,t,n,i,"updated")}};function Ef(e,t){switch(e){case"SELECT":return _f;case"TEXTAREA":return Ia;default:switch(t){case"checkbox":return wf;case"radio":return bf;default:return Ia}}}function Qi(e,t,n,i,r){const o=Ef(e.tagName,n.props&&n.props.type)[r];o&&o(e,t,n,i)}const Sf=["ctrl","shift","alt","meta"],Rf={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Sf.some(n=>e[`${n}Key`]&&!t.includes(n))},Af=(e,t)=>(n,...i)=>{for(let r=0;r<t.length;r++){const s=Rf[t[r]];if(s&&s(n,t))return}return e(n,...i)},Tf=Ne({patchProp:gf},tf);let La;function Cf(){return La||(La=Pd(Tf))}const Of=(...e)=>{const t=Cf().createApp(...e),{mount:n}=t;return t.mount=i=>{const r=$f(i);if(!r)return;const s=t._component;!Z(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t};function $f(e){return Oe(e)?document.querySelector(e):e}var kf=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let Bc;const Bs=e=>Bc=e,Hc=Symbol();function Nr(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var wi;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(wi||(wi={}));function Pf(){const e=Xl(!0),t=e.run(()=>ce({}));let n=[],i=[];const r=Ps({install(s){Bs(r),r._a=s,s.provide(Hc,r),s.config.globalProperties.$pinia=r,i.forEach(o=>n.push(o)),i=[]},use(s){return!this._a&&!kf?i.push(s):n.push(s),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return r}const Wc=()=>{};function Da(e,t,n,i=Wc){e.push(t);const r=()=>{const s=e.indexOf(t);s>-1&&(e.splice(s,1),i())};return!n&&Yl()&&gh(r),r}function Tn(e,...t){e.slice().forEach(n=>{n(...t)})}const jf=e=>e();function Fr(e,t){e instanceof Map&&t instanceof Map&&t.forEach((n,i)=>e.set(i,n)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const i=t[n],r=e[n];Nr(r)&&Nr(i)&&e.hasOwnProperty(n)&&!Ce(i)&&!en(i)?e[n]=Fr(r,i):e[n]=i}return e}const If=Symbol();function Mf(e){return!Nr(e)||!e.hasOwnProperty(If)}const{assign:Kt}=Object;function zf(e){return!!(Ce(e)&&e.effect)}function Lf(e,t,n,i){const{state:r,actions:s,getters:o}=t,a=n.state.value[e];let l;function c(){a||(n.state.value[e]=r?r():{});const u=Fh(n.state.value[e]);return Kt(u,s,Object.keys(o||{}).reduce((h,d)=>(h[d]=Ps(Re(()=>{Bs(n);const f=n._s.get(e);return o[d].call(f,f)})),h),{}))}return l=qc(e,c,t,n,i,!0),l}function qc(e,t,n={},i,r,s){let o;const a=Kt({actions:{}},n),l={deep:!0};let c,u,h=[],d=[],f;const m=i.state.value[e];!s&&!m&&(i.state.value[e]={}),ce({});let v;function b(q){let B;c=u=!1,typeof q=="function"?(q(i.state.value[e]),B={type:wi.patchFunction,storeId:e,events:f}):(Fr(i.state.value[e],q),B={type:wi.patchObject,payload:q,storeId:e,events:f});const se=v=Symbol();_o().then(()=>{v===se&&(c=!0)}),u=!0,Tn(h,B,i.state.value[e])}const R=s?function(){const{state:B}=n,se=B?B():{};this.$patch(ve=>{Kt(ve,se)})}:Wc;function x(){o.stop(),h=[],d=[],i._s.delete(e)}function T(q,B){return function(){Bs(i);const se=Array.from(arguments),ve=[],Pe=[];function We(re){ve.push(re)}function bt(re){Pe.push(re)}Tn(d,{args:se,name:q,store:z,after:We,onError:bt});let qe;try{qe=B.apply(this&&this.$id===e?this:z,se)}catch(re){throw Tn(Pe,re),re}return qe instanceof Promise?qe.then(re=>(Tn(ve,re),re)).catch(re=>(Tn(Pe,re),Promise.reject(re))):(Tn(ve,qe),qe)}}const C={_p:i,$id:e,$onAction:Da.bind(null,d),$patch:b,$reset:R,$subscribe(q,B={}){const se=Da(h,q,B.detached,()=>ve()),ve=o.run(()=>vt(()=>i.state.value[e],Pe=>{(B.flush==="sync"?u:c)&&q({storeId:e,type:wi.direct,events:f},Pe)},Kt({},l,B)));return se},$dispose:x},z=_n(C);i._s.set(e,z);const G=(i._a&&i._a.runWithContext||jf)(()=>i._e.run(()=>(o=Xl()).run(t)));for(const q in G){const B=G[q];if(Ce(B)&&!zf(B)||en(B))s||(m&&Mf(B)&&(Ce(B)?B.value=m[q]:Fr(B,m[q])),i.state.value[e][q]=B);else if(typeof B=="function"){const se=T(q,B);G[q]=se,a.actions[q]=B}}return Kt(z,G),Kt(ue(z),G),Object.defineProperty(z,"$state",{get:()=>i.state.value[e],set:q=>{b(B=>{Kt(B,q)})}}),i._p.forEach(q=>{Kt(z,o.run(()=>q({store:z,app:i._a,pinia:i,options:a})))}),m&&s&&n.hydrate&&n.hydrate(z.$state,m),c=!0,u=!0,z}function Df(e,t,n){let i,r;const s=typeof t=="function";typeof e=="string"?(i=e,r=s?n:t):(r=e,i=e.id);function o(a,l){const c=Ad();return a=a||(c?rt(Hc,null):null),a&&Bs(a),a=Bc,a._s.has(i)||(s?qc(i,t,r,a):Lf(i,r,a)),a._s.get(i)}return o.$id=i,o}/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const jn=typeof window<"u";function Uf(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const me=Object.assign;function cr(e,t){const n={};for(const i in t){const r=t[i];n[i]=yt(r)?r.map(e):e(r)}return n}const bi=()=>{},yt=Array.isArray,Nf=/\/$/,Ff=e=>e.replace(Nf,"");function ur(e,t,n="/"){let i,r={},s="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=t.slice(0,l),s=t.slice(l+1,a>-1?a:t.length),r=e(s)),a>-1&&(i=i||t.slice(0,a),o=t.slice(a,t.length)),i=qf(i??t,n),{fullPath:i+(s&&"?")+s+o,path:i,query:r,hash:o}}function Bf(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Ua(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Hf(e,t,n){const i=t.matched.length-1,r=n.matched.length-1;return i>-1&&i===r&&Wn(t.matched[i],n.matched[r])&&Vc(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Wn(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Vc(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Wf(e[n],t[n]))return!1;return!0}function Wf(e,t){return yt(e)?Na(e,t):yt(t)?Na(t,e):e===t}function Na(e,t){return yt(t)?e.length===t.length&&e.every((n,i)=>n===t[i]):e.length===1&&e[0]===t}function qf(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),i=e.split("/"),r=i[i.length-1];(r===".."||r===".")&&i.push("");let s=n.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+i.slice(o-(o===i.length?1:0)).join("/")}var ji;(function(e){e.pop="pop",e.push="push"})(ji||(ji={}));var _i;(function(e){e.back="back",e.forward="forward",e.unknown=""})(_i||(_i={}));function Vf(e){if(!e)if(jn){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Ff(e)}const Kf=/^[^#]+#/;function Jf(e,t){return e.replace(Kf,"#")+t}function Xf(e,t){const n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-n.left-(t.left||0),top:i.top-n.top-(t.top||0)}}const Hs=()=>({left:window.pageXOffset,top:window.pageYOffset});function Yf(e){let t;if("el"in e){const n=e.el,i=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=Xf(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function Fa(e,t){return(history.state?history.state.position-t:-1)+e}const Br=new Map;function Gf(e,t){Br.set(e,t)}function Qf(e){const t=Br.get(e);return Br.delete(e),t}let Zf=()=>location.protocol+"//"+location.host;function Kc(e,t){const{pathname:n,search:i,hash:r}=t,s=e.indexOf("#");if(s>-1){let a=r.includes(e.slice(s))?e.slice(s).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),Ua(l,"")}return Ua(n,e)+i+r}function ep(e,t,n,i){let r=[],s=[],o=null;const a=({state:d})=>{const f=Kc(e,location),m=n.value,v=t.value;let b=0;if(d){if(n.value=f,t.value=d,o&&o===m){o=null;return}b=v?d.position-v.position:0}else i(f);r.forEach(R=>{R(n.value,m,{delta:b,type:ji.pop,direction:b?b>0?_i.forward:_i.back:_i.unknown})})};function l(){o=n.value}function c(d){r.push(d);const f=()=>{const m=r.indexOf(d);m>-1&&r.splice(m,1)};return s.push(f),f}function u(){const{history:d}=window;d.state&&d.replaceState(me({},d.state,{scroll:Hs()}),"")}function h(){for(const d of s)d();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function Ba(e,t,n,i=!1,r=!1){return{back:e,current:t,forward:n,replaced:i,position:window.history.length,scroll:r?Hs():null}}function tp(e){const{history:t,location:n}=window,i={value:Kc(e,n)},r={value:t.state};r.value||s(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const h=e.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?e:e.slice(h))+l:Zf()+e+l;try{t[u?"replaceState":"pushState"](c,"",d),r.value=c}catch(f){console.error(f),n[u?"replace":"assign"](d)}}function o(l,c){const u=me({},t.state,Ba(r.value.back,l,r.value.forward,!0),c,{position:r.value.position});s(l,u,!0),i.value=l}function a(l,c){const u=me({},r.value,t.state,{forward:l,scroll:Hs()});s(u.current,u,!0);const h=me({},Ba(i.value,l,null),{position:u.position+1},c);s(l,h,!1),i.value=l}return{location:i,state:r,push:a,replace:o}}function np(e){e=Vf(e);const t=tp(e),n=ep(e,t.state,t.location,t.replace);function i(s,o=!0){o||n.pauseListeners(),history.go(s)}const r=me({location:"",base:e,go:i,createHref:Jf.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function ip(e){return typeof e=="string"||e&&typeof e=="object"}function Jc(e){return typeof e=="string"||typeof e=="symbol"}const Wt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Xc=Symbol("");var Ha;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Ha||(Ha={}));function qn(e,t){return me(new Error,{type:e,[Xc]:!0},t)}function Pt(e,t){return e instanceof Error&&Xc in e&&(t==null||!!(e.type&t))}const Wa="[^/]+?",sp={sensitive:!1,strict:!1,start:!0,end:!0},rp=/[.+*?^${}()[\]/\\]/g;function op(e,t){const n=me({},sp,t),i=[];let r=n.start?"^":"";const s=[];for(const c of e){const u=c.length?[]:[90];n.strict&&!c.length&&(r+="/");for(let h=0;h<c.length;h++){const d=c[h];let f=40+(n.sensitive?.25:0);if(d.type===0)h||(r+="/"),r+=d.value.replace(rp,"\\$&"),f+=40;else if(d.type===1){const{value:m,repeatable:v,optional:b,regexp:R}=d;s.push({name:m,repeatable:v,optional:b});const x=R||Wa;if(x!==Wa){f+=10;try{new RegExp(`(${x})`)}catch(C){throw new Error(`Invalid custom RegExp for param "${m}" (${x}): `+C.message)}}let T=v?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;h||(T=b&&c.length<2?`(?:/${T})`:"/"+T),b&&(T+="?"),r+=T,f+=20,b&&(f+=-8),v&&(f+=-20),x===".*"&&(f+=-50)}u.push(f)}i.push(u)}if(n.strict&&n.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const f=u[d]||"",m=s[d-1];h[m.name]=f&&m.repeatable?f.split("/"):f}return h}function l(c){let u="",h=!1;for(const d of e){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const f of d)if(f.type===0)u+=f.value;else if(f.type===1){const{value:m,repeatable:v,optional:b}=f,R=m in c?c[m]:"";if(yt(R)&&!v)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const x=yt(R)?R.join("/"):R;if(!x)if(b)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${m}"`);u+=x}}return u||"/"}return{re:o,score:i,keys:s,parse:a,stringify:l}}function ap(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=t[n]-e[n];if(i)return i;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function lp(e,t){let n=0;const i=e.score,r=t.score;for(;n<i.length&&n<r.length;){const s=ap(i[n],r[n]);if(s)return s;n++}if(Math.abs(r.length-i.length)===1){if(qa(i))return 1;if(qa(r))return-1}return r.length-i.length}function qa(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const cp={type:0,value:""},up=/[a-zA-Z0-9_]/;function hp(e){if(!e)return[[]];if(e==="/")return[[cp]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(f){throw new Error(`ERR (${n})/"${c}": ${f}`)}let n=0,i=n;const r=[];let s;function o(){s&&r.push(s),s=[]}let a=0,l,c="",u="";function h(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),n=1):d();break;case 4:d(),n=i;break;case 1:l==="("?n=2:up.test(l)?d():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),h(),o(),r}function dp(e,t,n){const i=op(hp(e.path),n),r=me(i,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function fp(e,t){const n=[],i=new Map;t=Ja({strict:!1,end:!0,sensitive:!1},t);function r(u){return i.get(u)}function s(u,h,d){const f=!d,m=pp(u);m.aliasOf=d&&d.record;const v=Ja(t,u),b=[m];if("alias"in u){const T=typeof u.alias=="string"?[u.alias]:u.alias;for(const C of T)b.push(me({},m,{components:d?d.record.components:m.components,path:C,aliasOf:d?d.record:m}))}let R,x;for(const T of b){const{path:C}=T;if(h&&C[0]!=="/"){const z=h.record.path,U=z[z.length-1]==="/"?"":"/";T.path=h.record.path+(C&&U+C)}if(R=dp(T,h,v),d?d.alias.push(R):(x=x||R,x!==R&&x.alias.push(R),f&&u.name&&!Ka(R)&&o(u.name)),m.children){const z=m.children;for(let U=0;U<z.length;U++)s(z[U],R,d&&d.children[U])}d=d||R,(R.record.components&&Object.keys(R.record.components).length||R.record.name||R.record.redirect)&&l(R)}return x?()=>{o(x)}:bi}function o(u){if(Jc(u)){const h=i.get(u);h&&(i.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&i.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let h=0;for(;h<n.length&&lp(u,n[h])>=0&&(u.record.path!==n[h].record.path||!Yc(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!Ka(u)&&i.set(u.record.name,u)}function c(u,h){let d,f={},m,v;if("name"in u&&u.name){if(d=i.get(u.name),!d)throw qn(1,{location:u});v=d.record.name,f=me(Va(h.params,d.keys.filter(x=>!x.optional).map(x=>x.name)),u.params&&Va(u.params,d.keys.map(x=>x.name))),m=d.stringify(f)}else if("path"in u)m=u.path,d=n.find(x=>x.re.test(m)),d&&(f=d.parse(m),v=d.record.name);else{if(d=h.name?i.get(h.name):n.find(x=>x.re.test(h.path)),!d)throw qn(1,{location:u,currentLocation:h});v=d.record.name,f=me({},h.params,u.params),m=d.stringify(f)}const b=[];let R=d;for(;R;)b.unshift(R.record),R=R.parent;return{name:v,path:m,params:f,matched:b,meta:gp(b)}}return e.forEach(u=>s(u)),{addRoute:s,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:r}}function Va(e,t){const n={};for(const i of t)i in e&&(n[i]=e[i]);return n}function pp(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:mp(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function mp(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const i in e.components)t[i]=typeof n=="object"?n[i]:n;return t}function Ka(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function gp(e){return e.reduce((t,n)=>me(t,n.meta),{})}function Ja(e,t){const n={};for(const i in e)n[i]=i in t?t[i]:e[i];return n}function Yc(e,t){return t.children.some(n=>n===e||Yc(e,n))}const Gc=/#/g,vp=/&/g,yp=/\//g,wp=/=/g,bp=/\?/g,Qc=/\+/g,_p=/%5B/g,xp=/%5D/g,Zc=/%5E/g,Ep=/%60/g,eu=/%7B/g,Sp=/%7C/g,tu=/%7D/g,Rp=/%20/g;function Po(e){return encodeURI(""+e).replace(Sp,"|").replace(_p,"[").replace(xp,"]")}function Ap(e){return Po(e).replace(eu,"{").replace(tu,"}").replace(Zc,"^")}function Hr(e){return Po(e).replace(Qc,"%2B").replace(Rp,"+").replace(Gc,"%23").replace(vp,"%26").replace(Ep,"`").replace(eu,"{").replace(tu,"}").replace(Zc,"^")}function Tp(e){return Hr(e).replace(wp,"%3D")}function Cp(e){return Po(e).replace(Gc,"%23").replace(bp,"%3F")}function Op(e){return e==null?"":Cp(e).replace(yp,"%2F")}function Ss(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function $p(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<i.length;++r){const s=i[r].replace(Qc," "),o=s.indexOf("="),a=Ss(o<0?s:s.slice(0,o)),l=o<0?null:Ss(s.slice(o+1));if(a in t){let c=t[a];yt(c)||(c=t[a]=[c]),c.push(l)}else t[a]=l}return t}function Xa(e){let t="";for(let n in e){const i=e[n];if(n=Tp(n),i==null){i!==void 0&&(t+=(t.length?"&":"")+n);continue}(yt(i)?i.map(s=>s&&Hr(s)):[i&&Hr(i)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function kp(e){const t={};for(const n in e){const i=e[n];i!==void 0&&(t[n]=yt(i)?i.map(r=>r==null?null:""+r):i==null?i:""+i)}return t}const Pp=Symbol(""),Ya=Symbol(""),Ws=Symbol(""),jo=Symbol(""),Wr=Symbol("");function li(){let e=[];function t(i){return e.push(i),()=>{const r=e.indexOf(i);r>-1&&e.splice(r,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Xt(e,t,n,i,r){const s=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((o,a)=>{const l=h=>{h===!1?a(qn(4,{from:n,to:t})):h instanceof Error?a(h):ip(h)?a(qn(2,{from:t,to:h})):(s&&i.enterCallbacks[r]===s&&typeof h=="function"&&s.push(h),o())},c=e.call(i&&i.instances[r],t,n,l);let u=Promise.resolve(c);e.length<3&&(u=u.then(l)),u.catch(h=>a(h))})}function hr(e,t,n,i){const r=[];for(const s of e)for(const o in s.components){let a=s.components[o];if(!(t!=="beforeRouteEnter"&&!s.instances[o]))if(jp(a)){const c=(a.__vccOpts||a)[t];c&&r.push(Xt(c,n,i,s,o))}else{let l=a();r.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${s.path}"`));const u=Uf(c)?c.default:c;s.components[o]=u;const d=(u.__vccOpts||u)[t];return d&&Xt(d,n,i,s,o)()}))}}return r}function jp(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Ga(e){const t=rt(Ws),n=rt(jo),i=Re(()=>t.resolve(F(e.to))),r=Re(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const d=h.findIndex(Wn.bind(null,u));if(d>-1)return d;const f=Qa(l[c-2]);return c>1&&Qa(u)===f&&h[h.length-1].path!==f?h.findIndex(Wn.bind(null,l[c-2])):d}),s=Re(()=>r.value>-1&&Lp(n.params,i.value.params)),o=Re(()=>r.value>-1&&r.value===n.matched.length-1&&Vc(n.params,i.value.params));function a(l={}){return zp(l)?t[F(e.replace)?"replace":"push"](F(e.to)).catch(bi):Promise.resolve()}return{route:i,href:Re(()=>i.value.href),isActive:s,isExactActive:o,navigate:a}}const Ip=we({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ga,setup(e,{slots:t}){const n=_n(Ga(e)),{options:i}=rt(Ws),r=Re(()=>({[Za(e.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[Za(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=t.default&&t.default(n);return e.custom?s:Nc("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},s)}}}),Mp=Ip;function zp(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Lp(e,t){for(const n in t){const i=t[n],r=e[n];if(typeof i=="string"){if(i!==r)return!1}else if(!yt(r)||r.length!==i.length||i.some((s,o)=>s!==r[o]))return!1}return!0}function Qa(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Za=(e,t,n)=>e??t??n,Dp=we({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const i=rt(Wr),r=Re(()=>e.route||i.value),s=rt(Ya,0),o=Re(()=>{let c=F(s);const{matched:u}=r.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=Re(()=>r.value.matched[o.value]);cs(Ya,Re(()=>o.value+1)),cs(Pp,a),cs(Wr,r);const l=ce();return vt(()=>[l.value,a.value,e.name],([c,u,h],[d,f,m])=>{u&&(u.instances[h]=c,f&&f!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!Wn(u,f)||!d)&&(u.enterCallbacks[h]||[]).forEach(v=>v(c))},{flush:"post"}),()=>{const c=r.value,u=e.name,h=a.value,d=h&&h.components[u];if(!d)return el(n.default,{Component:d,route:c});const f=h.props[u],m=f?f===!0?c.params:typeof f=="function"?f(c):f:null,b=Nc(d,me({},m,t,{onVnodeUnmounted:R=>{R.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return el(n.default,{Component:b,route:c})||b}}});function el(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const nu=Dp;function Up(e){const t=fp(e.routes,e),n=e.parseQuery||$p,i=e.stringifyQuery||Xa,r=e.history,s=li(),o=li(),a=li(),l=Dh(Wt);let c=Wt;jn&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=cr.bind(null,S=>""+S),h=cr.bind(null,Op),d=cr.bind(null,Ss);function f(S,D){let M,W;return Jc(S)?(M=t.getRecordMatcher(S),W=D):W=S,t.addRoute(W,M)}function m(S){const D=t.getRecordMatcher(S);D&&t.removeRoute(D)}function v(){return t.getRoutes().map(S=>S.record)}function b(S){return!!t.getRecordMatcher(S)}function R(S,D){if(D=me({},D||l.value),typeof S=="string"){const y=ur(n,S,D.path),_=t.resolve({path:y.path},D),A=r.createHref(y.fullPath);return me(y,_,{params:d(_.params),hash:Ss(y.hash),redirectedFrom:void 0,href:A})}let M;if("path"in S)M=me({},S,{path:ur(n,S.path,D.path).path});else{const y=me({},S.params);for(const _ in y)y[_]==null&&delete y[_];M=me({},S,{params:h(y)}),D.params=h(D.params)}const W=t.resolve(M,D),pe=S.hash||"";W.params=u(d(W.params));const p=Bf(i,me({},S,{hash:Ap(pe),path:W.path})),g=r.createHref(p);return me({fullPath:p,hash:pe,query:i===Xa?kp(S.query):S.query||{}},W,{redirectedFrom:void 0,href:g})}function x(S){return typeof S=="string"?ur(n,S,l.value.path):me({},S)}function T(S,D){if(c!==S)return qn(8,{from:D,to:S})}function C(S){return G(S)}function z(S){return C(me(x(S),{replace:!0}))}function U(S){const D=S.matched[S.matched.length-1];if(D&&D.redirect){const{redirect:M}=D;let W=typeof M=="function"?M(S):M;return typeof W=="string"&&(W=W.includes("?")||W.includes("#")?W=x(W):{path:W},W.params={}),me({query:S.query,hash:S.hash,params:"path"in W?{}:S.params},W)}}function G(S,D){const M=c=R(S),W=l.value,pe=S.state,p=S.force,g=S.replace===!0,y=U(M);if(y)return G(me(x(y),{state:typeof y=="object"?me({},pe,y.state):pe,force:p,replace:g}),D||M);const _=M;_.redirectedFrom=D;let A;return!p&&Hf(i,W,M)&&(A=qn(16,{to:_,from:W}),Qe(W,W,!0,!1)),(A?Promise.resolve(A):se(_,W)).catch(k=>Pt(k)?Pt(k,2)?k:ct(k):te(k,_,W)).then(k=>{if(k){if(Pt(k,2))return G(me({replace:g},x(k.to),{state:typeof k.to=="object"?me({},pe,k.to.state):pe,force:p}),D||_)}else k=Pe(_,W,!0,g,pe);return ve(_,W,k),k})}function q(S,D){const M=T(S,D);return M?Promise.reject(M):Promise.resolve()}function B(S){const D=Sn.values().next().value;return D&&typeof D.runWithContext=="function"?D.runWithContext(S):S()}function se(S,D){let M;const[W,pe,p]=Np(S,D);M=hr(W.reverse(),"beforeRouteLeave",S,D);for(const y of W)y.leaveGuards.forEach(_=>{M.push(Xt(_,S,D))});const g=q.bind(null,S,D);return M.push(g),Fe(M).then(()=>{M=[];for(const y of s.list())M.push(Xt(y,S,D));return M.push(g),Fe(M)}).then(()=>{M=hr(pe,"beforeRouteUpdate",S,D);for(const y of pe)y.updateGuards.forEach(_=>{M.push(Xt(_,S,D))});return M.push(g),Fe(M)}).then(()=>{M=[];for(const y of p)if(y.beforeEnter)if(yt(y.beforeEnter))for(const _ of y.beforeEnter)M.push(Xt(_,S,D));else M.push(Xt(y.beforeEnter,S,D));return M.push(g),Fe(M)}).then(()=>(S.matched.forEach(y=>y.enterCallbacks={}),M=hr(p,"beforeRouteEnter",S,D),M.push(g),Fe(M))).then(()=>{M=[];for(const y of o.list())M.push(Xt(y,S,D));return M.push(g),Fe(M)}).catch(y=>Pt(y,8)?y:Promise.reject(y))}function ve(S,D,M){a.list().forEach(W=>B(()=>W(S,D,M)))}function Pe(S,D,M,W,pe){const p=T(S,D);if(p)return p;const g=D===Wt,y=jn?history.state:{};M&&(W||g?r.replace(S.fullPath,me({scroll:g&&y&&y.scroll},pe)):r.push(S.fullPath,pe)),l.value=S,Qe(S,D,M,g),ct()}let We;function bt(){We||(We=r.listen((S,D,M)=>{if(!Wi.listening)return;const W=R(S),pe=U(W);if(pe){G(me(pe,{replace:!0}),W).catch(bi);return}c=W;const p=l.value;jn&&Gf(Fa(p.fullPath,M.delta),Hs()),se(W,p).catch(g=>Pt(g,12)?g:Pt(g,2)?(G(g.to,W).then(y=>{Pt(y,20)&&!M.delta&&M.type===ji.pop&&r.go(-1,!1)}).catch(bi),Promise.reject()):(M.delta&&r.go(-M.delta,!1),te(g,W,p))).then(g=>{g=g||Pe(W,p,!1),g&&(M.delta&&!Pt(g,8)?r.go(-M.delta,!1):M.type===ji.pop&&Pt(g,20)&&r.go(-1,!1)),ve(W,p,g)}).catch(bi)}))}let qe=li(),re=li(),Y;function te(S,D,M){ct(S);const W=re.list();return W.length?W.forEach(pe=>pe(S,D,M)):console.error(S),Promise.reject(S)}function je(){return Y&&l.value!==Wt?Promise.resolve():new Promise((S,D)=>{qe.add([S,D])})}function ct(S){return Y||(Y=!S,bt(),qe.list().forEach(([D,M])=>S?M(S):D()),qe.reset()),S}function Qe(S,D,M,W){const{scrollBehavior:pe}=e;if(!jn||!pe)return Promise.resolve();const p=!M&&Qf(Fa(S.fullPath,0))||(W||!M)&&history.state&&history.state.scroll||null;return _o().then(()=>pe(S,D,p)).then(g=>g&&Yf(g)).catch(g=>te(g,S,D))}const Ve=S=>r.go(S);let En;const Sn=new Set,Wi={currentRoute:l,listening:!0,addRoute:f,removeRoute:m,hasRoute:b,getRoutes:v,resolve:R,options:e,push:C,replace:z,go:Ve,back:()=>Ve(-1),forward:()=>Ve(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:re.add,isReady:je,install(S){const D=this;S.component("RouterLink",Mp),S.component("RouterView",nu),S.config.globalProperties.$router=D,Object.defineProperty(S.config.globalProperties,"$route",{enumerable:!0,get:()=>F(l)}),jn&&!En&&l.value===Wt&&(En=!0,C(r.location).catch(pe=>{}));const M={};for(const pe in Wt)Object.defineProperty(M,pe,{get:()=>l.value[pe],enumerable:!0});S.provide(Ws,D),S.provide(jo,ac(M)),S.provide(Wr,l);const W=S.unmount;Sn.add(S),S.unmount=function(){Sn.delete(S),Sn.size<1&&(c=Wt,We&&We(),We=null,l.value=Wt,En=!1,Y=!1),W()}}};function Fe(S){return S.reduce((D,M)=>D.then(()=>B(M)),Promise.resolve())}return Wi}function Np(e,t){const n=[],i=[],r=[],s=Math.max(t.matched.length,e.matched.length);for(let o=0;o<s;o++){const a=t.matched[o];a&&(e.matched.find(c=>Wn(c,a))?i.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(c=>Wn(c,l))||r.push(l))}return[n,i,r]}function qs(){return rt(Ws)}function iu(){return rt(jo)}const Fp="modulepreload",Bp=function(e){return"/"+e},tl={},ti=function(t,n,i){if(!n||n.length===0)return t();const r=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=Bp(s),s in tl)return;tl[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let u=r.length-1;u>=0;u--){const h=r[u];if(h.href===s&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":Fp,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((u,h)=>{c.addEventListener("load",u),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},Hp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ti(()=>Promise.resolve().then(()=>Ni),void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)};class Io extends Error{constructor(t,n="FunctionsError",i){super(t),this.name=n,this.context=i}}class Wp extends Io{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class qp extends Io{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Vp extends Io{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Kp=globalThis&&globalThis.__awaiter||function(e,t,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(e,t||[])).next())})};class Jp{constructor(t,{headers:n={},customFetch:i}={}){this.url=t,this.headers=n,this.fetch=Hp(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var i;return Kp(this,void 0,void 0,function*(){try{const{headers:r,method:s,body:o}=n;let a={},l;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${t}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),r),body:l}).catch(f=>{throw new Wp(f)}),u=c.headers.get("x-relay-error");if(u&&u==="true")throw new qp(c);if(!c.ok)throw new Vp(c);let h=((i=c.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),d;return h==="application/json"?d=yield c.json():h==="application/octet-stream"?d=yield c.blob():h==="multipart/form-data"?d=yield c.formData():d=yield c.text(),{data:d,error:null}}catch(r){return{data:null,error:r}}})}}var nl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var qr={exports:{}};(function(e,t){var n=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof nl<"u")return nl;throw new Error("unable to locate global object")},i=n();e.exports=t=i.fetch,i.fetch&&(t.default=i.fetch.bind(i)),t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response})(qr,qr.exports);var Mo=qr.exports;const zo=Xp(Mo),Ni=th({__proto__:null,default:zo},[Mo]);class Yp{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=zo:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const i=this.fetch;let r=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l;let c=null,u=null,h=null,d=s.status,f=s.statusText;if(s.ok){if(this.method!=="HEAD"){const R=await s.text();R===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=R:u=JSON.parse(R))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),b=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");v&&b&&b.length>1&&(h=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,d=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const v=await s.text();try{c=JSON.parse(v),Array.isArray(c)&&s.status===404&&(u=[],c=null,d=200,f="OK")}catch{s.status===404&&v===""?(d=204,f="No Content"):c={message:v}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,d=200,f="OK"),c&&this.shouldThrowOnError)throw c}return{error:c,data:u,count:h,status:d,statusText:f}});return this.shouldThrowOnError||(r=r.catch(s=>{var o,a,l;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),r.then(t,n)}}class Gp extends Yp{select(t){let n=!1;const i=(t??"*").split("").map(r=>/\s/.test(r)&&!n?"":(r==='"'&&(n=!n),r)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:i,foreignTable:r}={}){const s=r?`${r}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${t}.${n?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,n,{foreignTable:i}={}){const r=typeof i>"u"?"offset":`${i}.offset`,s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${t}`),this.url.searchParams.set(s,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:i=!1,buffers:r=!1,wal:s=!1,format:o="text"}={}){const a=[t?"analyze":null,n?"verbose":null,i?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${a};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class In extends Gp{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const i=n.map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${i})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:i,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const o=i===void 0?"":`(${i})`;return this.url.searchParams.append(t,`${s}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,i])=>{this.url.searchParams.append(n,`eq.${i}`)}),this}not(t,n,i){return this.url.searchParams.append(t,`not.${n}.${i}`),this}or(t,{foreignTable:n}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,n,i){return this.url.searchParams.append(t,`${n}.${i}`),this}}class Qp{constructor(t,{headers:n={},schema:i,fetch:r}){this.url=t,this.headers=n,this.schema=i,this.fetch=r}select(t,{head:n=!1,count:i}={}){const r=n?"HEAD":"GET";let s=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),i&&(this.headers.Prefer=`count=${i}`),new In({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:i=!0}={}){const r="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),i||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(t)){const o=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new In({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:i=!1,count:r,defaultToNull:s=!0}={}){const o="POST",a=[`resolution=${i?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const l=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new In({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const i="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),n&&r.push(`count=${n}`),this.headers.Prefer=r.join(","),new In({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",i=[];return t&&i.push(`count=${t}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new In({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Zp="1.8.5",em={"X-Client-Info":`postgrest-js/${Zp}`};class Lo{constructor(t,{headers:n={},schema:i,fetch:r}={}){this.url=t,this.headers=Object.assign(Object.assign({},em),n),this.schemaName=i,this.fetch=r}from(t){const n=new URL(`${this.url}/${t}`);return new Qp(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Lo(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:i=!1,count:r}={}){let s;const o=new URL(`${this.url}/rpc/${t}`);let a;i?(s="HEAD",Object.entries(n).forEach(([c,u])=>{o.searchParams.append(c,`${u}`)})):(s="POST",a=n);const l=Object.assign({},this.headers);return r&&(l.Prefer=`count=${r}`),new In({method:s,url:o,headers:l,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}}var dr,il;function tm(){if(il)return dr;il=1;var e=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return dr=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return e()}try{return __global__||e()}finally{delete Object.prototype.__global__}}(),dr}const nm="websocket",im="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",sm=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],rm="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",om=["Iñaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],am="1.0.34",lm={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},cm="https://github.com/theturtle32/WebSocket-Node",um={node:">=4.0.0"},hm={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},dm={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},fm={verbose:!1},pm={test:"tape test/unit/*.js",gulp:"gulp"},mm="index",gm={lib:"./lib"},vm="lib/browser.js",ym="Apache-2.0",wm={name:nm,description:im,keywords:sm,author:rm,contributors:om,version:am,repository:lm,homepage:cm,engines:um,dependencies:hm,devDependencies:dm,config:fm,scripts:pm,main:mm,directories:gm,browser:vm,license:ym};var bm=wm.version,dn;if(typeof globalThis=="object")dn=globalThis;else try{dn=tm()}catch{}finally{if(!dn&&typeof window<"u"&&(dn=window),!dn)throw new Error("Could not determine global this")}var Ii=dn.WebSocket||dn.MozWebSocket,_m=bm;function su(e,t){var n;return t?n=new Ii(e,t):n=new Ii(e),n}Ii&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(e){Object.defineProperty(su,e,{get:function(){return Ii[e]}})});var xm={w3cwebsocket:Ii?su:null,version:_m};const Em="2.8.4",Sm={"X-Client-Info":`realtime-js/${Em}`},Rm="1.0.0",ru=1e4,Am=1e3;var xi;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(xi||(xi={}));var et;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(et||(et={}));var dt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(dt||(dt={}));var Vr;(function(e){e.websocket="websocket"})(Vr||(Vr={}));var fn;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(fn||(fn={}));class ou{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Tm{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),i=new TextDecoder;return this._decodeBroadcast(t,n,i)}_decodeBroadcast(t,n,i){const r=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=i.decode(t.slice(o,o+r));o=o+r;const l=i.decode(t.slice(o,o+s));o=o+s;const c=JSON.parse(i.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class fr{constructor(t,n,i={},r=ru){this.channel=t,this.event=n,this.payload=i,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var i;return this._hasReceived(t)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var sl;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(sl||(sl={}));class Ei{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},r=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ei.syncState(this.state,r,s,o),this.pendingDiffs.forEach(l=>{this.state=Ei.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(i.diff,{},r=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Ei.syncDiff(this.state,r,s,o),a())}),this.onJoin((r,s,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:s,newPresences:o})}),this.onLeave((r,s,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,i,r){const s=this.cloneDeep(t),o=this.transformState(n),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const h=s[c];if(h){const d=u.map(b=>b.presence_ref),f=h.map(b=>b.presence_ref),m=u.filter(b=>f.indexOf(b.presence_ref)<0),v=h.filter(b=>d.indexOf(b.presence_ref)<0);m.length>0&&(a[c]=m),v.length>0&&(l[c]=v)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},i,r)}static syncDiff(t,n,i,r){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),r||(r=()=>{}),this.map(s,(a,l)=>{var c;const u=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),u.length>0){const h=t[a].map(f=>f.presence_ref),d=u.filter(f=>h.indexOf(f.presence_ref)<0);t[a].unshift(...d)}i(a,u,l)}),this.map(o,(a,l)=>{let c=t[a];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),t[a]=c,r(a,c,l),c.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(i=>n(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,i)=>{const r=t[i];return"metas"in r?n[i]=r.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[i]=r,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _e;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(_e||(_e={}));const rl=(e,t,n={})=>{var i;const r=(i=n.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(t).reduce((s,o)=>(s[o]=Cm(o,e,t,r),s),{})},Cm=(e,t,n,i)=>{const r=t.find(a=>a.name===e),s=r==null?void 0:r.type,o=n[e];return s&&!i.includes(s)?au(s,o):Kr(o)},au=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return Pm(t,n)}switch(e){case _e.bool:return Om(t);case _e.float4:case _e.float8:case _e.int2:case _e.int4:case _e.int8:case _e.numeric:case _e.oid:return $m(t);case _e.json:case _e.jsonb:return km(t);case _e.timestamp:return jm(t);case _e.abstime:case _e.date:case _e.daterange:case _e.int4range:case _e.int8range:case _e.money:case _e.reltime:case _e.text:case _e.time:case _e.timestamptz:case _e.timetz:case _e.tsrange:case _e.tstzrange:return Kr(t);default:return Kr(t)}},Kr=e=>e,Om=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},$m=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},km=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Pm=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,i=e[n];if(e[0]==="{"&&i==="}"){let s;const o=e.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>au(t,a))}return e},jm=e=>typeof e=="string"?e.replace(" ","T"):e;var ol;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(ol||(ol={}));var al;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes"})(al||(al={}));var ll;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ll||(ll={}));class Do{constructor(t,n={config:{}},i){this.topic=t,this.params=n,this.socket=i,this.bindings={},this.state=et.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},n.config),this.timeout=this.socket.timeout,this.joinPush=new fr(this,dt.join,this.params,this.timeout),this.rejoinTimer=new ou(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=et.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=et.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this._on(dt.reply,{},(r,s)=>{this._trigger(this._replyEventName(s),r)}),this.presence=new Ei(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(t,n=this.timeout){var i,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o}}=this.params;this._onError(c=>t&&t("CHANNEL_ERROR",c)),this._onClose(()=>t&&t("CLOSED"));const a={},l={broadcast:s,presence:o,postgres_changes:(r=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(c=>c.filter))!==null&&r!==void 0?r:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},a)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",({postgres_changes:c})=>{var u;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),c===void 0){t&&t("SUBSCRIBED");return}else{const h=this.bindings.postgres_changes,d=(u=h==null?void 0:h.length)!==null&&u!==void 0?u:0,f=[];for(let m=0;m<d;m++){const v=h[m],{filter:{event:b,schema:R,table:x,filter:T}}=v,C=c&&c[m];if(C&&C.event===b&&C.schema===R&&C.table===x&&C.filter===T)f.push(Object.assign(Object.assign({},v),{id:C.id}));else{this.unsubscribe(),t&&t("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,t&&t("SUBSCRIBED");return}}).receive("error",c=>{t&&t("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{t&&t("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,i){return this._on(t,n,i)}async send(t,n={}){var i,r;if(!this._canPush()&&t.type==="broadcast"){const{event:s,payload:o}=t,a={method:"POST",headers:{apikey:(i=this.socket.accessToken)!==null&&i!==void 0?i:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,a,(r=n.timeout)!==null&&r!==void 0?r:this.timeout)).ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=et.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(dt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(i=>{const r=new fr(this,dt.leave,{},t);r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}_broadcastEndpointURL(){let t=this.socket.endPoint;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(t,n,i){const r=new AbortController,s=setTimeout(()=>r.abort(),i),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:r.signal}));return clearTimeout(s),o}_push(t,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new fr(this,t,n,i);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(t,n,i){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,i){var r,s;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=dt;if(i&&[a,l,c,u].indexOf(o)>=0&&i!==this._joinRef())return;let d=this._onMessage(o,n,i);if(n&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(f=>{var m,v,b;return((m=f.filter)===null||m===void 0?void 0:m.event)==="*"||((b=(v=f.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(f=>f.callback(d,i)):(s=this.bindings[o])===null||s===void 0||s.filter(f=>{var m,v,b,R,x,T;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const C=f.id,z=(m=f.filter)===null||m===void 0?void 0:m.event;return C&&((v=n.ids)===null||v===void 0?void 0:v.includes(C))&&(z==="*"||(z==null?void 0:z.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const C=(x=(R=f==null?void 0:f.filter)===null||R===void 0?void 0:R.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return C==="*"||C===((T=n==null?void 0:n.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof d=="object"&&"ids"in d){const m=d.data,{schema:v,table:b,commit_timestamp:R,type:x,errors:T}=m;d=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:R,eventType:x,new:{},old:{},errors:T}),this._getPayloadRecords(m))}f.callback(d,i)})}_isClosed(){return this.state===et.closed}_isJoined(){return this.state===et.joined}_isJoining(){return this.state===et.joining}_isLeaving(){return this.state===et.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,i){const r=t.toLocaleLowerCase(),s={type:r,filter:n,callback:i};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(t,n){const i=t.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(r=>{var s;return!(((s=r.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===i&&Do.isEqual(r.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const i in t)if(t[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(dt.close,{},t)}_onError(t){this._on(dt.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=et.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=rl(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=rl(t.columns,t.old_record)),n}}const Im=()=>{};class Mm{constructor(t,n){var i;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=Sm,this.params={},this.timeout=ru,this.transport=xm.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Im,this.conn=null,this.sendBuffer=[],this.serializer=new Tm,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>ti(()=>Promise.resolve().then(()=>Ni),void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${t}/${Vr.websocket}`,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.transport&&(this.transport=n.transport),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const r=(i=n==null?void 0:n.params)===null||i===void 0?void 0:i.apikey;r&&(this.accessToken=r),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(s,o)=>o(JSON.stringify(s)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ou(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t)))}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),t}log(t,n,i){this.logger(t,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case xi.connecting:return fn.Connecting;case xi.open:return fn.Open;case xi.closing:return fn.Closing;default:return fn.Closed}}isConnected(){return this.connectionState()===fn.Open}channel(t,n={config:{}}){const i=new Do(`realtime:${t}`,n,this);return this.channels.push(i),i}push(t){const{topic:n,event:i,payload:r,ref:s}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${i} (${s})`,r),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(t){this.accessToken=t,this.channels.forEach(n=>{t&&n.updateJoinPayload({access_token:t}),n.joinedOnce&&n._isJoined()&&n._push(dt.access_token,{access_token:t})})}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n._joinRef()!==t._joinRef())}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Rm}))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:i,event:r,payload:s,ref:o}=n;(o&&o===this.pendingHeartbeatRef||r===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${i} ${r} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(i)).forEach(a=>a._trigger(r,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(dt.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const i=t.match(/\?/)?"&":"?",r=new URLSearchParams(n);return`${t}${i}${r}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(Am,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class Uo extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Be(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class zm extends Uo{constructor(t,n){super(t),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class cl extends Uo{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var Lm=globalThis&&globalThis.__awaiter||function(e,t,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(e,t||[])).next())})};const lu=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ti(()=>Promise.resolve().then(()=>Ni),void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)},Dm=()=>Lm(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ti(()=>Promise.resolve().then(()=>Ni),void 0)).Response:Response});var ni=globalThis&&globalThis.__awaiter||function(e,t,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(e,t||[])).next())})};const pr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Um=(e,t)=>ni(void 0,void 0,void 0,function*(){const n=yield Dm();e instanceof n?e.json().then(i=>{t(new zm(pr(i),e.status||500))}).catch(i=>{t(new cl(pr(i),i))}):t(new cl(pr(e),e))}),Nm=(e,t,n,i)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),n))};function Vs(e,t,n,i,r,s){return ni(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(n,Nm(t,i,r,s)).then(l=>{if(!l.ok)throw l;return i!=null&&i.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Um(l,a))})})}function Jr(e,t,n,i){return ni(this,void 0,void 0,function*(){return Vs(e,"GET",t,n,i)})}function Yt(e,t,n,i,r){return ni(this,void 0,void 0,function*(){return Vs(e,"POST",t,i,r,n)})}function Fm(e,t,n,i,r){return ni(this,void 0,void 0,function*(){return Vs(e,"PUT",t,i,r,n)})}function cu(e,t,n,i,r){return ni(this,void 0,void 0,function*(){return Vs(e,"DELETE",t,i,r,n)})}var it=globalThis&&globalThis.__awaiter||function(e,t,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(e,t||[])).next())})};const Bm={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ul={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Hm{constructor(t,n={},i,r){this.url=t,this.headers=n,this.bucketId=i,this.fetch=lu(r)}uploadOrUpdate(t,n,i,r){return it(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},ul),r),a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&i instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),s.append("",i)):typeof FormData<"u"&&i instanceof FormData?(s=i,s.append("cacheControl",o.cacheControl)):(s=i,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType);const l=this._removeEmptyFolders(n),c=this._getFinalPath(l),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:t,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return u.ok?{data:{path:l},error:null}:{data:null,error:yield u.json()}}catch(s){if(Be(s))return{data:null,error:s};throw s}})}upload(t,n,i){return it(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,i)})}uploadToSignedUrl(t,n,i,r){return it(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:ul.upsert},r),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.append("cacheControl",c.cacheControl)):(l=i,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u});return h.ok?{data:{path:s},error:null}:{data:null,error:yield h.json()}}catch(l){if(Be(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t){return it(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const i=yield Yt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:this.headers}),r=new URL(this.url+i.url),s=r.searchParams.get("token");if(!s)throw new Uo("No token returned by API");return{data:{signedUrl:r.toString(),path:t,token:s},error:null}}catch(n){if(Be(n))return{data:null,error:n};throw n}})}update(t,n,i){return it(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,i)})}move(t,n){return it(this,void 0,void 0,function*(){try{return{data:yield Yt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n},{headers:this.headers}),error:null}}catch(i){if(Be(i))return{data:null,error:i};throw i}})}copy(t,n){return it(this,void 0,void 0,function*(){try{return{data:{path:(yield Yt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n},{headers:this.headers})).Key},error:null}}catch(i){if(Be(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,i){return it(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),s=yield Yt(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:n},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const o=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(r){if(Be(r))return{data:null,error:r};throw r}})}createSignedUrls(t,n,i){return it(this,void 0,void 0,function*(){try{const r=yield Yt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(r){if(Be(r))return{data:null,error:r};throw r}})}download(t,n){return it(this,void 0,void 0,function*(){const r=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield Jr(this.fetch,`${this.url}/${r}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Be(a))return{data:null,error:a};throw a}})}getPublicUrl(t,n){const i=this._getFinalPath(t),r=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&r.push(s);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&r.push(l);let c=r.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${i}${c}`)}}}remove(t){return it(this,void 0,void 0,function*(){try{return{data:yield cu(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Be(n))return{data:null,error:n};throw n}})}list(t,n,i){return it(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Bm),n),{prefix:t||""});return{data:yield Yt(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},i),error:null}}catch(r){if(Be(r))return{data:null,error:r};throw r}})}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const Wm="2.5.4",qm={"X-Client-Info":`storage-js/${Wm}`};var Cn=globalThis&&globalThis.__awaiter||function(e,t,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(e,t||[])).next())})};class Vm{constructor(t,n={},i){this.url=t,this.headers=Object.assign(Object.assign({},qm),n),this.fetch=lu(i)}listBuckets(){return Cn(this,void 0,void 0,function*(){try{return{data:yield Jr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Be(t))return{data:null,error:t};throw t}})}getBucket(t){return Cn(this,void 0,void 0,function*(){try{return{data:yield Jr(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Be(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Cn(this,void 0,void 0,function*(){try{return{data:yield Yt(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Be(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return Cn(this,void 0,void 0,function*(){try{return{data:yield Fm(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Be(i))return{data:null,error:i};throw i}})}emptyBucket(t){return Cn(this,void 0,void 0,function*(){try{return{data:yield Yt(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Be(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Cn(this,void 0,void 0,function*(){try{return{data:yield cu(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Be(n))return{data:null,error:n};throw n}})}}class Km extends Vm{constructor(t,n={},i){super(t,n,i)}from(t){return new Hm(this.url,this.headers,t,this.fetch)}}const Jm="2.38.4";let fi="";typeof Deno<"u"?fi="deno":typeof document<"u"?fi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?fi="react-native":fi="node";const Xm={"X-Client-Info":`supabase-js-${fi}/${Jm}`};var Ym=globalThis&&globalThis.__awaiter||function(e,t,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(e,t||[])).next())})};const Gm=e=>{let t;return e?t=e:typeof fetch>"u"?t=zo:t=fetch,(...n)=>t(...n)},Qm=()=>typeof Headers>"u"?Mo.Headers:Headers,Zm=(e,t,n)=>{const i=Gm(n),r=Qm();return(s,o)=>Ym(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let c=new r(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),i(s,Object.assign(Object.assign({},o),{headers:c}))})};function eg(e){return e.replace(/\/$/,"")}function tg(e,t){const{db:n,auth:i,realtime:r,global:s}=e,{db:o,auth:a,realtime:l,global:c}=t;return{db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},a),i),realtime:Object.assign(Object.assign({},l),r),global:Object.assign(Object.assign({},c),s)}}function ng(e){return Math.round(Date.now()/1e3)+e}function ig(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const It=()=>typeof document<"u",ln={tested:!1,writable:!1},Si=()=>{if(!It())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ln.tested)return ln.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ln.tested=!0,ln.writable=!0}catch{ln.tested=!0,ln.writable=!1}return ln.writable};function mr(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,s)=>{t[s]=r})}catch{}return n.searchParams.forEach((i,r)=>{t[r]=i}),t}const uu=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ti(()=>Promise.resolve().then(()=>Ni),void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)},sg=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",cn=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Zi=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},gr=async(e,t)=>{await e.removeItem(t)};function rg(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",i,r,s,o,a,l,c,u=0;for(e=e.replace("-","+").replace("_","/");u<e.length;)o=t.indexOf(e.charAt(u++)),a=t.indexOf(e.charAt(u++)),l=t.indexOf(e.charAt(u++)),c=t.indexOf(e.charAt(u++)),i=o<<2|a>>4,r=(a&15)<<4|l>>2,s=(l&3)<<6|c,n=n+String.fromCharCode(i),l!=64&&r!=0&&(n=n+String.fromCharCode(r)),c!=64&&s!=0&&(n=n+String.fromCharCode(s));return n}class Ks{constructor(){this.promise=new Ks.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Ks.promiseConstructor=Promise;function hl(e){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=e.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const i=n[1];return JSON.parse(rg(i))}async function og(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function ag(e,t){return new Promise((i,r)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await e(s);if(!t(s,null,o)){i(o);return}}catch(o){if(!t(s,o)){r(o);return}}})()})}function lg(e){return("0"+e.toString(16)).substr(-2)}function On(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let r="";for(let s=0;s<56;s++)r+=n.charAt(Math.floor(Math.random()*i));return r}return crypto.getRandomValues(t),Array.from(t,lg).join("")}async function cg(e){const n=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",n),r=new Uint8Array(i);return Array.from(r).map(s=>String.fromCharCode(s)).join("")}function ug(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $n(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await cg(e);return ug(n)}class No extends Error{constructor(t,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n}}function ae(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class hg extends No{constructor(t,n){super(t,n),this.name="AuthApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function dg(e){return ae(e)&&e.name==="AuthApiError"}class hu extends No{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class ii extends No{constructor(t,n,i){super(t),this.name=n,this.status=i}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class kn extends ii{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class vr extends ii{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class es extends ii{constructor(t){super(t,"AuthInvalidCredentialsError",400)}}class ts extends ii{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class dl extends ii{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Xr extends ii{constructor(t,n){super(t,"AuthRetryableFetchError",n)}}function fl(e){return ae(e)&&e.name==="AuthRetryableFetchError"}var fg=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};const pi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),pg=[502,503,504];async function pl(e){if(!sg(e))throw new Xr(pi(e),0);if(pg.includes(e.status))throw new Xr(pi(e),e.status);let t;try{t=await e.json()}catch(n){throw new hu(pi(n),n)}throw new hg(pi(t),e.status||500)}const mg=(e,t,n,i)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),n))};async function de(e,t,n,i){var r;const s=Object.assign({},i==null?void 0:i.headers);i!=null&&i.jwt&&(s.Authorization=`Bearer ${i.jwt}`);const o=(r=i==null?void 0:i.query)!==null&&r!==void 0?r:{};i!=null&&i.redirectTo&&(o.redirect_to=i.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await gg(e,t,n+a,{headers:s,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(l):{data:Object.assign({},l),error:null}}async function gg(e,t,n,i,r,s){const o=mg(t,i,r,s);let a;try{a=await e(n,o)}catch(l){throw console.error(l),new Xr(pi(l),0)}if(a.ok||await pl(a),i!=null&&i.noResolveJson)return a;try{return await a.json()}catch(l){await pl(l)}}function qt(e){var t;let n=null;bg(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=ng(e.expires_in)));const i=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:i},error:null}}function Gt(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function vg(e){return{data:e,error:null}}function yg(e){const{action_link:t,email_otp:n,hashed_token:i,redirect_to:r,verification_type:s}=e,o=fg(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:i,redirect_to:r,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function wg(e){return e}function bg(e){return e.access_token&&e.refresh_token&&e.expires_in}var _g=globalThis&&globalThis.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};class xg{constructor({url:t="",headers:n={},fetch:i}){this.url=t,this.headers=n,this.fetch=uu(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n="global"){try{return await de(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ae(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,n={}){try{return await de(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Gt})}catch(i){if(ae(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:n}=t,i=_g(t,["options"]),r=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(r.new_email=i==null?void 0:i.newEmail,delete r.newEmail),await de(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:yg,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ae(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await de(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Gt})}catch(n){if(ae(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,i,r,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await de(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(s=(r=t==null?void 0:t.perPage)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:""},xform:wg});if(u.error)throw u.error;const h=await u.json(),d=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(m=>{const v=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(m.split(";")[1].split("=")[1]);c[`${b}Page`]=v}),c.total=parseInt(d)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(ae(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){try{return await de(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Gt})}catch(n){if(ae(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){try{return await de(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Gt})}catch(i){if(ae(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,n=!1){try{return await de(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Gt})}catch(i){if(ae(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){try{const{data:n,error:i}=await de(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:n,error:i}}catch(n){if(ae(n))return{data:null,error:n};throw n}}async _deleteFactor(t){try{return{data:await de(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(ae(n))return{data:null,error:n};throw n}}}const du="2.57.0",Eg="http://localhost:9999",Sg="supabase.auth.token",Rg={"X-Client-Info":`gotrue-js/${du}`},ml=10,Ag={getItem:e=>Si()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Si()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Si()&&globalThis.localStorage.removeItem(e)}};function gl(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function Tg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}globalThis&&Si()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug");class Cg extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}Tg();const Og={url:Eg,storageKey:Sg,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Rg,flowType:"implicit",debug:!1},ci=30*1e3,vl=3;async function $g(e,t,n){return await n()}class Mi{constructor(t){var n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Mi.nextInstanceID,Mi.nextInstanceID+=1,this.instanceID>0&&It()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Og),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new xg({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=uu(i.fetch),this.lock=i.lock||$g,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Si()?this.storage=Ag:(this.memoryStorage={},this.storage=gl(this.memoryStorage)):(this.memoryStorage={},this.storage=gl(this.memoryStorage)),It()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(r){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",r)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async r=>{this._debug("received broadcast notification from other tab or client",r),await this._notifyAllSubscribers(r.data.event,r.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${du}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const t=It()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",t),t||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:n,error:i}=await this._getSessionFromURL(t);if(i)return this._debug("#_initialize()","error detecting session from URL",i),await this._removeSession(),{error:i};const{session:r,redirectType:s}=n;return this._debug("#_initialize()","detected session in URL",r,"redirect type",s),await this._saveSession(r),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ae(t)?{error:t}:{error:new hu("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signUp(t){var n,i,r;try{await this._removeSession();let s;if("email"in t){const{email:u,password:h,options:d}=t;let f=null,m=null;if(this.flowType==="pkce"){const v=On();await cn(this.storage,`${this.storageKey}-code-verifier`,v),f=await $n(v),m=v===f?"plain":"s256"}s=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:u,password:h,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:m},xform:qt})}else if("phone"in t){const{phone:u,password:h,options:d}=t;s=await de(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(i=d==null?void 0:d.data)!==null&&i!==void 0?i:{},channel:(r=d==null?void 0:d.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:qt})}else throw new es("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(ae(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{await this._removeSession();let n;if("email"in t){const{email:s,password:o,options:a}=t;n=await de(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:qt})}else if("phone"in t){const{phone:s,password:o,options:a}=t;n=await de(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:qt})}else throw new es("You must provide either an email or phone number and a password");const{data:i,error:r}=n;return r?{data:{user:null,session:null},error:r}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new vr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:{user:i.user,session:i.session},error:r})}catch(n){if(ae(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,i,r,s;return await this._removeSession(),await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(r=t.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const n=await Zi(this.storage,`${this.storageKey}-code-verifier`),{data:i,error:r}=await de(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:qt});return await gr(this.storage,`${this.storageKey}-code-verifier`),r?{data:{user:null,session:null},error:r}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new vr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:i,error:r})}async signInWithIdToken(t){await this._removeSession();try{const{options:n,provider:i,token:r,access_token:s,nonce:o}=t,a=await de(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:r,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:qt}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new vr}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(ae(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,i,r,s,o;try{if(await this._removeSession(),"email"in t){const{email:a,options:l}=t;let c=null,u=null;if(this.flowType==="pkce"){const d=On();await cn(this.storage,`${this.storageKey}-code-verifier`,d),c=await $n(d),u=d===c?"plain":"s256"}const{error:h}=await de(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:u}=await de(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new es("You must provide either an email or phone number.")}catch(a){if(ae(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var n,i;try{t.type!=="email_change"&&t.type!=="phone_change"&&await this._removeSession();let r,s;"options"in t&&(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:o,error:a}=await de(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:r,xform:qt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(r){if(ae(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(t){var n,i,r;try{await this._removeSession();let s=null,o=null;if(this.flowType==="pkce"){const a=On();await cn(this.storage,`${this.storageKey}-code-verifier`,a),s=await $n(a),o=a===s?"plain":"s256"}return await de(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((r=t==null?void 0:t.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:vg})}catch(s){if(ae(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;if(i)throw i;if(!n)throw new kn;const{error:r}=await de(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:r}})}catch(t){if(ae(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{t.type!="email_change"&&t.type!="phone_change"&&await this._removeSession();const n=`${this.url}/resend`;if("email"in t){const{email:i,type:r,options:s}=t,{error:o}=await de(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:i,type:r,options:s}=t,{data:o,error:a}=await de(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new es("You must provide either an email or phone number and a type")}catch(n){if(ae(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Zi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i)return{data:{session:t},error:null};const{session:r,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await de(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Gt}):await this._useSession(async n=>{var i,r;const{data:s,error:o}=n;if(o)throw o;return await de(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(r=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0,xform:Gt})})}catch(n){if(ae(n))return{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async i=>{const{data:r,error:s}=i;if(s)throw s;if(!r.session)throw new kn;const o=r.session;let a=null,l=null;if(this.flowType==="pkce"&&t.email!=null){const h=On();await cn(this.storage,`${this.storageKey}-code-verifier`,h),a=await $n(h),l=h===a?"plain":"s256"}const{data:c,error:u}=await de(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Gt});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(i){if(ae(i))return{data:{user:null},error:i};throw i}}_decodeJWT(t){return hl(t)}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new kn;const n=Date.now()/1e3;let i=n,r=!0,s=null;const o=hl(t.access_token);if(o.exp&&(i=o.exp,r=i<=n),r){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;s={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(ae(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var i;if(!t){const{data:o,error:a}=n;if(a)throw a;t=(i=o.session)!==null&&i!==void 0?i:void 0}if(!(t!=null&&t.refresh_token))throw new kn;const{session:r,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ae(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t){try{if(!It())throw new ts("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new ts("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!t)throw new dl("Not a valid PKCE flow url.");const n=mr(window.location.href);if(t){if(!n.code)throw new dl("No code detected.");const{data:x,error:T}=await this._exchangeCodeForSession(n.code);if(T)throw T;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:x.session,redirectType:null},error:null}}if(n.error||n.error_description||n.error_code)throw new ts(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});const{provider_token:i,provider_refresh_token:r,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=n;if(!s||!a||!o||!c)throw new ts("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let d=u+h;l&&(d=parseInt(l));const f=d-u;f*1e3<=ci&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const m=d-h;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,d,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",m,d,u);const{data:v,error:b}=await this._getUser(s);if(b)throw b;const R={provider_token:i,provider_refresh_token:r,access_token:s,expires_in:h,expires_at:d,refresh_token:o,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:R,redirectType:n.type},error:null}}catch(n){if(ae(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantFlow(){const t=mr(window.location.href);return!!(It()&&(t.access_token||t.error_description))}async _isPKCEFlow(){const t=mr(window.location.href),n=await Zi(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:r,error:s}=n;if(s)return{error:s};const o=(i=r.session)===null||i===void 0?void 0:i.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(dg(a)&&(a.status===404||a.status===401)))return{error:a}}return t!=="others"&&(await this._removeSession(),await gr(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(t){const n=ig(),i={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async n=>{var i,r;try{const{data:{session:s},error:o}=n;if(o)throw o;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let i=null,r=null;if(this.flowType==="pkce"){const s=On();await cn(this.storage,`${this.storageKey}-code-verifier`,s),i=await $n(s),r=s===i?"plain":"s256"}try{return await de(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:r,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(ae(s))return{data:null,error:s};throw s}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await ag(async r=>(await og(r*200),this._debug(n,"refreshing attempt",r),await de(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:qt})),(r,s,o)=>o&&o.error&&fl(o.error)&&Date.now()+(r+1)*200-i<ci)}catch(i){if(this._debug(n,"error",i),ae(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const i=await this._getUrlForProvider(t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",i),It()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await Zi(this.storage,this.storageKey);if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const r=Math.round(Date.now()/1e3),s=((t=i.expires_at)!==null&&t!==void 0?t:1/0)<r+ml;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${ml}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),fl(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var n,i;if(!t)throw new kn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Ks;const{data:s,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!s.session)throw new kn;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(r,"error",s),ae(s)){const o={session:null,error:s};return(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(t,n,i=!0){const r=`#_notifyAllSubscribers(${t})`;this._debug(r,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(r,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),await this._persistSession(t)}_persistSession(t){return this._debug("#_persistSession()",t),cn(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await gr(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&It()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ci);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((i.expires_at*1e3-t)/ci);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${ci}ms, refresh threshold is ${vl} ticks`),r<=vl&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Cg)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!It()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n){const i=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const r=On();await cn(this.storage,`${this.storageKey}-code-verifier`,r);const s=await $n(r),o=r===s?"plain":"s256";this._debug("PKCE","code verifier",`${r.substring(0,5)}...`,"code challenge",s,"method",o);const a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(n!=null&&n.queryParams){const r=new URLSearchParams(n.queryParams);i.push(r.toString())}return`${this.url}/authorize?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var i;const{data:r,error:s}=n;return s?{data:null,error:s}:await de(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(ae(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var i,r;const{data:s,error:o}=n;if(o)return{data:null,error:o};const{data:a,error:l}=await de(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:t.friendlyName,factor_type:t.factorType,issuer:t.issuer},headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});return l?{data:null,error:l}:(!((r=a==null?void 0:a.totp)===null||r===void 0)&&r.qr_code&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(n){if(ae(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:r,error:s}=n;if(s)return{data:null,error:s};const{data:o,error:a}=await de(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(ae(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:r,error:s}=n;return s?{data:null,error:s}:await de(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(ae(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:i}=await this._challenge({factorId:t.factorId});return i?{data:null,error:i}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const i=(t==null?void 0:t.factors)||[],r=i.filter(s=>s.factor_type==="totp"&&s.status==="verified");return{data:{all:i,totp:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,i;const{data:{session:r},error:s}=t;if(s)return{data:null,error:s};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(r.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((i=(n=r.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}}Mi.nextInstanceID=0;class kg extends Mi{constructor(t){super(t)}}var Pg=globalThis&&globalThis.__awaiter||function(e,t,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(e,t||[])).next())})};const jg={headers:Xm},Ig={schema:"public"},Mg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},zg={};class Lg{constructor(t,n,i){var r,s,o,a,l,c,u,h;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const d=eg(t);this.realtimeUrl=`${d}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${d}/auth/v1`,this.storageUrl=`${d}/storage/v1`,this.functionsUrl=`${d}/functions/v1`;const f=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,m={db:Ig,realtime:zg,auth:Object.assign(Object.assign({},Mg),{storageKey:f}),global:jg},v=tg(i??{},m);this.storageKey=(s=(r=v.auth)===null||r===void 0?void 0:r.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=(o=v.global)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((l=v.auth)!==null&&l!==void 0?l:{},this.headers,(c=v.global)===null||c===void 0?void 0:c.fetch),this.fetch=Zm(n,this._getAccessToken.bind(this),(u=v.global)===null||u===void 0?void 0:u.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},v.realtime)),this.rest=new Lo(`${d}/rest/v1`,{headers:this.headers,schema:(h=v.db)===null||h===void 0?void 0:h.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new Jp(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Km(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},i){return this.rest.rpc(t,n,i)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return Pg(this,void 0,void 0,function*(){const{data:i}=yield this.auth.getSession();return(n=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:i,storage:r,storageKey:s,flowType:o,debug:a},l,c){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new kg({url:this.authUrl,headers:Object.assign(Object.assign({},u),l),storageKey:s,autoRefreshToken:t,persistSession:n,detectSessionInUrl:i,storage:r,flowType:o,debug:a,fetch:c})}_initRealtimeClient(t){return new Mm(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(t,n,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==i?(this.realtime.setAuth(i??null),this.changedAccessToken=i):t==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Dg=(e,t,n)=>new Lg(e,t,n),Ug="https://ivpfaitqeojbyulslqde.supabase.co",Ng="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml2cGZhaXRxZW9qYnl1bHNscWRlIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTg0OTIxNTcsImV4cCI6MjAxNDA2ODE1N30.UEynD52D7x8N0k3B22XxLwrbAXzLeggcZu57F1Rv20U",Ae=Dg(Ug,Ng),xn=Df("animestore",()=>{const e=ce(null),t=ce(!1),n=ce(!1),i=ce([]),r=ce(20),s=ce(1);vt(e,()=>{e.value&&(n.value=!1)});const o=async(h,d)=>{if(!h&&!d)return;const{data:f,error:m}=await Ae.auth.signInWithPassword({email:h,password:d});if(m&&console.log("Неправильный логин или пароль"),!f.user)return;const{data:v}=await Ae.from("users").select().eq("email",h).single();e.value={id:v.id,name:v.name,email:v.email,avatar_url:v.avatar_url}},a=async h=>{const{name:d,email:f,password:m}=h,{data:v}=await Ae.from("users").select().eq("email",f).single();if(v)return console.log("Такая почта уже зарегистрирована");const{error:b}=await Ae.auth.signUp({email:f,password:m});if(b)return console.error(b);await Ae.from("users").insert({name:d,email:f});const{data:R}=await Ae.from("users").select().eq("email",f).single();return e.value=R},l=async()=>{if((await Ae.auth.getSession()).data.session===null)return;const{data:d,error:f}=await Ae.auth.getUser(),{data:m}=await Ae.from("users").select().eq("email",d.user.email).single();if(e.value={id:m.id,name:m.name,email:m.email,avatar_url:m.avatar_url},f)return console.error(f)};return Ae.channel("users").on("postgres_changes",{event:"*",schema:"public",table:"users"},h=>{e.value={id:h.new.id,name:h.new.name,email:h.new.email,avatar_url:h.new.avatar_url}}).subscribe(),{login:o,registerUser:a,user:e,getUser:l,logout:async()=>{await Ae.auth.signOut(),e.value=null},recoverPassword:async h=>{console.log(h);const{error:d}=await Ae.auth.resetPasswordForEmail(h);if(d)return console.error(d)},modal:t,authRegModal:n,aniList:i,animeCount:r,animePage:s}}),Fg="https://api.anilibria.tv/v3/title/updates?page=",Bg="https://api.anilibria.tv/v3/title?id=",Hg="https://api.anilibria.tv/v3/title/search?search=",Wg="https://api.anilibria.tv/v3/title/search?genres=";function fu(e,t){return function(){return e.apply(t,arguments)}}const{toString:qg}=Object.prototype,{getPrototypeOf:Fo}=Object,Js=(e=>t=>{const n=qg.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kt=e=>(e=e.toLowerCase(),t=>Js(t)===e),Xs=e=>t=>typeof t===e,{isArray:si}=Array,zi=Xs("undefined");function Vg(e){return e!==null&&!zi(e)&&e.constructor!==null&&!zi(e.constructor)&&at(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const pu=kt("ArrayBuffer");function Kg(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&pu(e.buffer),t}const Jg=Xs("string"),at=Xs("function"),mu=Xs("number"),Ys=e=>e!==null&&typeof e=="object",Xg=e=>e===!0||e===!1,hs=e=>{if(Js(e)!=="object")return!1;const t=Fo(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Yg=kt("Date"),Gg=kt("File"),Qg=kt("Blob"),Zg=kt("FileList"),ev=e=>Ys(e)&&at(e.pipe),tv=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||at(e.append)&&((t=Js(e))==="formdata"||t==="object"&&at(e.toString)&&e.toString()==="[object FormData]"))},nv=kt("URLSearchParams"),iv=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Fi(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,r;if(typeof e!="object"&&(e=[e]),si(e))for(i=0,r=e.length;i<r;i++)t.call(null,e[i],i,e);else{const s=n?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let a;for(i=0;i<o;i++)a=s[i],t.call(null,e[a],a,e)}}function gu(e,t){t=t.toLowerCase();const n=Object.keys(e);let i=n.length,r;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const vu=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),yu=e=>!zi(e)&&e!==vu;function Yr(){const{caseless:e}=yu(this)&&this||{},t={},n=(i,r)=>{const s=e&&gu(t,r)||r;hs(t[s])&&hs(i)?t[s]=Yr(t[s],i):hs(i)?t[s]=Yr({},i):si(i)?t[s]=i.slice():t[s]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&Fi(arguments[i],n);return t}const sv=(e,t,n,{allOwnKeys:i}={})=>(Fi(t,(r,s)=>{n&&at(r)?e[s]=fu(r,n):e[s]=r},{allOwnKeys:i}),e),rv=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),ov=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},av=(e,t,n,i)=>{let r,s,o;const a={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),s=r.length;s-- >0;)o=r[s],(!i||i(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=n!==!1&&Fo(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},lv=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},cv=e=>{if(!e)return null;if(si(e))return e;let t=e.length;if(!mu(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},uv=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Fo(Uint8Array)),hv=(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=i.next())&&!r.done;){const s=r.value;t.call(e,s[0],s[1])}},dv=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},fv=kt("HTMLFormElement"),pv=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,r){return i.toUpperCase()+r}),yl=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),mv=kt("RegExp"),wu=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};Fi(n,(r,s)=>{let o;(o=t(r,s,e))!==!1&&(i[s]=o||r)}),Object.defineProperties(e,i)},gv=e=>{wu(e,(t,n)=>{if(at(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if(at(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},vv=(e,t)=>{const n={},i=r=>{r.forEach(s=>{n[s]=!0})};return si(e)?i(e):i(String(e).split(t)),n},yv=()=>{},wv=(e,t)=>(e=+e,Number.isFinite(e)?e:t),yr="abcdefghijklmnopqrstuvwxyz",wl="0123456789",bu={DIGIT:wl,ALPHA:yr,ALPHA_DIGIT:yr+yr.toUpperCase()+wl},bv=(e=16,t=bu.ALPHA_DIGIT)=>{let n="";const{length:i}=t;for(;e--;)n+=t[Math.random()*i|0];return n};function _v(e){return!!(e&&at(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const xv=e=>{const t=new Array(10),n=(i,r)=>{if(Ys(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[r]=i;const s=si(i)?[]:{};return Fi(i,(o,a)=>{const l=n(o,r+1);!zi(l)&&(s[a]=l)}),t[r]=void 0,s}}return i};return n(e,0)},Ev=kt("AsyncFunction"),Sv=e=>e&&(Ys(e)||at(e))&&at(e.then)&&at(e.catch),E={isArray:si,isArrayBuffer:pu,isBuffer:Vg,isFormData:tv,isArrayBufferView:Kg,isString:Jg,isNumber:mu,isBoolean:Xg,isObject:Ys,isPlainObject:hs,isUndefined:zi,isDate:Yg,isFile:Gg,isBlob:Qg,isRegExp:mv,isFunction:at,isStream:ev,isURLSearchParams:nv,isTypedArray:uv,isFileList:Zg,forEach:Fi,merge:Yr,extend:sv,trim:iv,stripBOM:rv,inherits:ov,toFlatObject:av,kindOf:Js,kindOfTest:kt,endsWith:lv,toArray:cv,forEachEntry:hv,matchAll:dv,isHTMLForm:fv,hasOwnProperty:yl,hasOwnProp:yl,reduceDescriptors:wu,freezeMethods:gv,toObjectSet:vv,toCamelCase:pv,noop:yv,toFiniteNumber:wv,findKey:gu,global:vu,isContextDefined:yu,ALPHABET:bu,generateString:bv,isSpecCompliantForm:_v,toJSONObject:xv,isAsyncFn:Ev,isThenable:Sv};function oe(e,t,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}E.inherits(oe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:E.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const _u=oe.prototype,xu={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{xu[e]={value:e}});Object.defineProperties(oe,xu);Object.defineProperty(_u,"isAxiosError",{value:!0});oe.from=(e,t,n,i,r,s)=>{const o=Object.create(_u);return E.toFlatObject(e,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),oe.call(o,e.message,t,n,i,r),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const Rv=null;function Gr(e){return E.isPlainObject(e)||E.isArray(e)}function Eu(e){return E.endsWith(e,"[]")?e.slice(0,-2):e}function bl(e,t,n){return e?e.concat(t).map(function(r,s){return r=Eu(r),!n&&s?"["+r+"]":r}).join(n?".":""):t}function Av(e){return E.isArray(e)&&!e.some(Gr)}const Tv=E.toFlatObject(E,{},null,function(t){return/^is[A-Z]/.test(t)});function Gs(e,t,n){if(!E.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=E.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,b){return!E.isUndefined(b[v])});const i=n.metaTokens,r=n.visitor||u,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&E.isSpecCompliantForm(t);if(!E.isFunction(r))throw new TypeError("visitor must be a function");function c(m){if(m===null)return"";if(E.isDate(m))return m.toISOString();if(!l&&E.isBlob(m))throw new oe("Blob is not supported. Use a Buffer instead.");return E.isArrayBuffer(m)||E.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function u(m,v,b){let R=m;if(m&&!b&&typeof m=="object"){if(E.endsWith(v,"{}"))v=i?v:v.slice(0,-2),m=JSON.stringify(m);else if(E.isArray(m)&&Av(m)||(E.isFileList(m)||E.endsWith(v,"[]"))&&(R=E.toArray(m)))return v=Eu(v),R.forEach(function(T,C){!(E.isUndefined(T)||T===null)&&t.append(o===!0?bl([v],C,s):o===null?v:v+"[]",c(T))}),!1}return Gr(m)?!0:(t.append(bl(b,v,s),c(m)),!1)}const h=[],d=Object.assign(Tv,{defaultVisitor:u,convertValue:c,isVisitable:Gr});function f(m,v){if(!E.isUndefined(m)){if(h.indexOf(m)!==-1)throw Error("Circular reference detected in "+v.join("."));h.push(m),E.forEach(m,function(R,x){(!(E.isUndefined(R)||R===null)&&r.call(t,R,E.isString(x)?x.trim():x,v,d))===!0&&f(R,v?v.concat(x):[x])}),h.pop()}}if(!E.isObject(e))throw new TypeError("data must be an object");return f(e),t}function _l(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function Bo(e,t){this._pairs=[],e&&Gs(e,this,t)}const Su=Bo.prototype;Su.append=function(t,n){this._pairs.push([t,n])};Su.toString=function(t){const n=t?function(i){return t.call(this,i,_l)}:_l;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function Cv(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ru(e,t,n){if(!t)return e;const i=n&&n.encode||Cv,r=n&&n.serialize;let s;if(r?s=r(t,n):s=E.isURLSearchParams(t)?t.toString():new Bo(t,n).toString(i),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class Ov{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){E.forEach(this.handlers,function(i){i!==null&&t(i)})}}const xl=Ov,Au={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$v=typeof URLSearchParams<"u"?URLSearchParams:Bo,kv=typeof FormData<"u"?FormData:null,Pv=typeof Blob<"u"?Blob:null,jv={isBrowser:!0,classes:{URLSearchParams:$v,FormData:kv,Blob:Pv},protocols:["http","https","file","blob","url","data"]},Tu=typeof window<"u"&&typeof document<"u",Iv=(e=>Tu&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),Mv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),zv=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Tu,hasStandardBrowserEnv:Iv,hasStandardBrowserWebWorkerEnv:Mv},Symbol.toStringTag,{value:"Module"})),Tt={...zv,...jv};function Lv(e,t){return Gs(e,new Tt.classes.URLSearchParams,Object.assign({visitor:function(n,i,r,s){return Tt.isNode&&E.isBuffer(n)?(this.append(i,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function Dv(e){return E.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Uv(e){const t={},n=Object.keys(e);let i;const r=n.length;let s;for(i=0;i<r;i++)s=n[i],t[s]=e[s];return t}function Cu(e){function t(n,i,r,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&E.isArray(r)?r.length:o,l?(E.hasOwnProp(r,o)?r[o]=[r[o],i]:r[o]=i,!a):((!r[o]||!E.isObject(r[o]))&&(r[o]=[]),t(n,i,r[o],s)&&E.isArray(r[o])&&(r[o]=Uv(r[o])),!a)}if(E.isFormData(e)&&E.isFunction(e.entries)){const n={};return E.forEachEntry(e,(i,r)=>{t(Dv(i),r,n,0)}),n}return null}function Nv(e,t,n){if(E.isString(e))try{return(t||JSON.parse)(e),E.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const Ho={transitional:Au,adapter:["xhr","http"],transformRequest:[function(t,n){const i=n.getContentType()||"",r=i.indexOf("application/json")>-1,s=E.isObject(t);if(s&&E.isHTMLForm(t)&&(t=new FormData(t)),E.isFormData(t))return r?JSON.stringify(Cu(t)):t;if(E.isArrayBuffer(t)||E.isBuffer(t)||E.isStream(t)||E.isFile(t)||E.isBlob(t))return t;if(E.isArrayBufferView(t))return t.buffer;if(E.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Lv(t,this.formSerializer).toString();if((a=E.isFileList(t))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Gs(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return s||r?(n.setContentType("application/json",!1),Nv(t)):t}],transformResponse:[function(t){const n=this.transitional||Ho.transitional,i=n&&n.forcedJSONParsing,r=this.responseType==="json";if(t&&E.isString(t)&&(i&&!this.responseType||r)){const o=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?oe.from(a,oe.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Tt.classes.FormData,Blob:Tt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};E.forEach(["delete","get","head","post","put","patch"],e=>{Ho.headers[e]={}});const Wo=Ho,Fv=E.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Bv=e=>{const t={};let n,i,r;return e&&e.split(`
`).forEach(function(o){r=o.indexOf(":"),n=o.substring(0,r).trim().toLowerCase(),i=o.substring(r+1).trim(),!(!n||t[n]&&Fv[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},El=Symbol("internals");function ui(e){return e&&String(e).trim().toLowerCase()}function ds(e){return e===!1||e==null?e:E.isArray(e)?e.map(ds):String(e)}function Hv(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}const Wv=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function wr(e,t,n,i,r){if(E.isFunction(i))return i.call(this,t,n);if(r&&(t=n),!!E.isString(t)){if(E.isString(i))return t.indexOf(i)!==-1;if(E.isRegExp(i))return i.test(t)}}function qv(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function Vv(e,t){const n=E.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(r,s,o){return this[i].call(this,t,r,s,o)},configurable:!0})})}class Qs{constructor(t){t&&this.set(t)}set(t,n,i){const r=this;function s(a,l,c){const u=ui(l);if(!u)throw new Error("header name must be a non-empty string");const h=E.findKey(r,u);(!h||r[h]===void 0||c===!0||c===void 0&&r[h]!==!1)&&(r[h||l]=ds(a))}const o=(a,l)=>E.forEach(a,(c,u)=>s(c,u,l));return E.isPlainObject(t)||t instanceof this.constructor?o(t,n):E.isString(t)&&(t=t.trim())&&!Wv(t)?o(Bv(t),n):t!=null&&s(n,t,i),this}get(t,n){if(t=ui(t),t){const i=E.findKey(this,t);if(i){const r=this[i];if(!n)return r;if(n===!0)return Hv(r);if(E.isFunction(n))return n.call(this,r,i);if(E.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=ui(t),t){const i=E.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||wr(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let r=!1;function s(o){if(o=ui(o),o){const a=E.findKey(i,o);a&&(!n||wr(i,i[a],a,n))&&(delete i[a],r=!0)}}return E.isArray(t)?t.forEach(s):s(t),r}clear(t){const n=Object.keys(this);let i=n.length,r=!1;for(;i--;){const s=n[i];(!t||wr(this,this[s],s,t,!0))&&(delete this[s],r=!0)}return r}normalize(t){const n=this,i={};return E.forEach(this,(r,s)=>{const o=E.findKey(i,s);if(o){n[o]=ds(r),delete n[s];return}const a=t?qv(s):String(s).trim();a!==s&&delete n[s],n[a]=ds(r),i[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return E.forEach(this,(i,r)=>{i!=null&&i!==!1&&(n[r]=t&&E.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(r=>i.set(r)),i}static accessor(t){const i=(this[El]=this[El]={accessors:{}}).accessors,r=this.prototype;function s(o){const a=ui(o);i[a]||(Vv(r,o),i[a]=!0)}return E.isArray(t)?t.forEach(s):s(t),this}}Qs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);E.reduceDescriptors(Qs.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[n]=i}}});E.freezeMethods(Qs);const Nt=Qs;function br(e,t){const n=this||Wo,i=t||n,r=Nt.from(i.headers);let s=i.data;return E.forEach(e,function(a){s=a.call(n,s,r.normalize(),t?t.status:void 0)}),r.normalize(),s}function Ou(e){return!!(e&&e.__CANCEL__)}function Bi(e,t,n){oe.call(this,e??"canceled",oe.ERR_CANCELED,t,n),this.name="CanceledError"}E.inherits(Bi,oe,{__CANCEL__:!0});function Kv(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new oe("Request failed with status code "+n.status,[oe.ERR_BAD_REQUEST,oe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const Jv=Tt.hasStandardBrowserEnv?{write(e,t,n,i,r,s){const o=[e+"="+encodeURIComponent(t)];E.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),E.isString(i)&&o.push("path="+i),E.isString(r)&&o.push("domain="+r),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Xv(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Yv(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function $u(e,t){return e&&!Xv(t)?Yv(e,t):t}const Gv=Tt.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function r(s){let o=s;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=r(window.location.href),function(o){const a=E.isString(o)?r(o):o;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}();function Qv(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Zv(e,t){e=e||10;const n=new Array(e),i=new Array(e);let r=0,s=0,o;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),u=i[s];o||(o=c),n[r]=l,i[r]=c;let h=s,d=0;for(;h!==r;)d+=n[h++],h=h%e;if(r=(r+1)%e,r===s&&(s=(s+1)%e),c-o<t)return;const f=u&&c-u;return f?Math.round(d*1e3/f):void 0}}function Sl(e,t){let n=0;const i=Zv(50,250);return r=>{const s=r.loaded,o=r.lengthComputable?r.total:void 0,a=s-n,l=i(a),c=s<=o;n=s;const u={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-s)/l:void 0,event:r};u[t?"download":"upload"]=!0,e(u)}}const ey=typeof XMLHttpRequest<"u",ty=ey&&function(e){return new Promise(function(n,i){let r=e.data;const s=Nt.from(e.headers).normalize();let{responseType:o,withXSRFToken:a}=e,l;function c(){e.cancelToken&&e.cancelToken.unsubscribe(l),e.signal&&e.signal.removeEventListener("abort",l)}let u;if(E.isFormData(r)){if(Tt.hasStandardBrowserEnv||Tt.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((u=s.getContentType())!==!1){const[v,...b]=u?u.split(";").map(R=>R.trim()).filter(Boolean):[];s.setContentType([v||"multipart/form-data",...b].join("; "))}}let h=new XMLHttpRequest;if(e.auth){const v=e.auth.username||"",b=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.set("Authorization","Basic "+btoa(v+":"+b))}const d=$u(e.baseURL,e.url);h.open(e.method.toUpperCase(),Ru(d,e.params,e.paramsSerializer),!0),h.timeout=e.timeout;function f(){if(!h)return;const v=Nt.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),R={data:!o||o==="text"||o==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:v,config:e,request:h};Kv(function(T){n(T),c()},function(T){i(T),c()},R),h=null}if("onloadend"in h?h.onloadend=f:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(f)},h.onabort=function(){h&&(i(new oe("Request aborted",oe.ECONNABORTED,e,h)),h=null)},h.onerror=function(){i(new oe("Network Error",oe.ERR_NETWORK,e,h)),h=null},h.ontimeout=function(){let b=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const R=e.transitional||Au;e.timeoutErrorMessage&&(b=e.timeoutErrorMessage),i(new oe(b,R.clarifyTimeoutError?oe.ETIMEDOUT:oe.ECONNABORTED,e,h)),h=null},Tt.hasStandardBrowserEnv&&(a&&E.isFunction(a)&&(a=a(e)),a||a!==!1&&Gv(d))){const v=e.xsrfHeaderName&&e.xsrfCookieName&&Jv.read(e.xsrfCookieName);v&&s.set(e.xsrfHeaderName,v)}r===void 0&&s.setContentType(null),"setRequestHeader"in h&&E.forEach(s.toJSON(),function(b,R){h.setRequestHeader(R,b)}),E.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),o&&o!=="json"&&(h.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&h.addEventListener("progress",Sl(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&h.upload&&h.upload.addEventListener("progress",Sl(e.onUploadProgress)),(e.cancelToken||e.signal)&&(l=v=>{h&&(i(!v||v.type?new Bi(null,e,h):v),h.abort(),h=null)},e.cancelToken&&e.cancelToken.subscribe(l),e.signal&&(e.signal.aborted?l():e.signal.addEventListener("abort",l)));const m=Qv(d);if(m&&Tt.protocols.indexOf(m)===-1){i(new oe("Unsupported protocol "+m+":",oe.ERR_BAD_REQUEST,e));return}h.send(r||null)})},Qr={http:Rv,xhr:ty};E.forEach(Qr,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Rl=e=>`- ${e}`,ny=e=>E.isFunction(e)||e===null||e===!1,ku={getAdapter:e=>{e=E.isArray(e)?e:[e];const{length:t}=e;let n,i;const r={};for(let s=0;s<t;s++){n=e[s];let o;if(i=n,!ny(n)&&(i=Qr[(o=String(n)).toLowerCase()],i===void 0))throw new oe(`Unknown adapter '${o}'`);if(i)break;r[o||"#"+s]=i}if(!i){const s=Object.entries(r).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=t?s.length>1?`since :
`+s.map(Rl).join(`
`):" "+Rl(s[0]):"as no adapter specified";throw new oe("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:Qr};function _r(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Bi(null,e)}function Al(e){return _r(e),e.headers=Nt.from(e.headers),e.data=br.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),ku.getAdapter(e.adapter||Wo.adapter)(e).then(function(i){return _r(e),i.data=br.call(e,e.transformResponse,i),i.headers=Nt.from(i.headers),i},function(i){return Ou(i)||(_r(e),i&&i.response&&(i.response.data=br.call(e,e.transformResponse,i.response),i.response.headers=Nt.from(i.response.headers))),Promise.reject(i)})}const Tl=e=>e instanceof Nt?{...e}:e;function Vn(e,t){t=t||{};const n={};function i(c,u,h){return E.isPlainObject(c)&&E.isPlainObject(u)?E.merge.call({caseless:h},c,u):E.isPlainObject(u)?E.merge({},u):E.isArray(u)?u.slice():u}function r(c,u,h){if(E.isUndefined(u)){if(!E.isUndefined(c))return i(void 0,c,h)}else return i(c,u,h)}function s(c,u){if(!E.isUndefined(u))return i(void 0,u)}function o(c,u){if(E.isUndefined(u)){if(!E.isUndefined(c))return i(void 0,c)}else return i(void 0,u)}function a(c,u,h){if(h in t)return i(c,u);if(h in e)return i(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u)=>r(Tl(c),Tl(u),!0)};return E.forEach(Object.keys(Object.assign({},e,t)),function(u){const h=l[u]||r,d=h(e[u],t[u],u);E.isUndefined(d)&&h!==a||(n[u]=d)}),n}const Pu="1.6.8",qo={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{qo[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const Cl={};qo.transitional=function(t,n,i){function r(s,o){return"[Axios v"+Pu+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return(s,o,a)=>{if(t===!1)throw new oe(r(o," has been removed"+(n?" in "+n:"")),oe.ERR_DEPRECATED);return n&&!Cl[o]&&(Cl[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,o,a):!0}};function iy(e,t,n){if(typeof e!="object")throw new oe("options must be an object",oe.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let r=i.length;for(;r-- >0;){const s=i[r],o=t[s];if(o){const a=e[s],l=a===void 0||o(a,s,e);if(l!==!0)throw new oe("option "+s+" must be "+l,oe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new oe("Unknown option "+s,oe.ERR_BAD_OPTION)}}const Zr={assertOptions:iy,validators:qo},Vt=Zr.validators;class Rs{constructor(t){this.defaults=t,this.interceptors={request:new xl,response:new xl}}async request(t,n){try{return await this._request(t,n)}catch(i){if(i instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}throw i}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Vn(this.defaults,n);const{transitional:i,paramsSerializer:r,headers:s}=n;i!==void 0&&Zr.assertOptions(i,{silentJSONParsing:Vt.transitional(Vt.boolean),forcedJSONParsing:Vt.transitional(Vt.boolean),clarifyTimeoutError:Vt.transitional(Vt.boolean)},!1),r!=null&&(E.isFunction(r)?n.paramsSerializer={serialize:r}:Zr.assertOptions(r,{encode:Vt.function,serialize:Vt.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&E.merge(s.common,s[n.method]);s&&E.forEach(["delete","get","head","post","put","patch","common"],m=>{delete s[m]}),n.headers=Nt.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(l=l&&v.synchronous,a.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let u,h=0,d;if(!l){const m=[Al.bind(this),void 0];for(m.unshift.apply(m,a),m.push.apply(m,c),d=m.length,u=Promise.resolve(n);h<d;)u=u.then(m[h++],m[h++]);return u}d=a.length;let f=n;for(h=0;h<d;){const m=a[h++],v=a[h++];try{f=m(f)}catch(b){v.call(this,b);break}}try{u=Al.call(this,f)}catch(m){return Promise.reject(m)}for(h=0,d=c.length;h<d;)u=u.then(c[h++],c[h++]);return u}getUri(t){t=Vn(this.defaults,t);const n=$u(t.baseURL,t.url);return Ru(n,t.params,t.paramsSerializer)}}E.forEach(["delete","get","head","options"],function(t){Rs.prototype[t]=function(n,i){return this.request(Vn(i||{},{method:t,url:n,data:(i||{}).data}))}});E.forEach(["post","put","patch"],function(t){function n(i){return function(s,o,a){return this.request(Vn(a||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Rs.prototype[t]=n(),Rs.prototype[t+"Form"]=n(!0)});const fs=Rs;class Vo{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const i=this;this.promise.then(r=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](r);i._listeners=null}),this.promise.then=r=>{let s;const o=new Promise(a=>{i.subscribe(a),s=a}).then(r);return o.cancel=function(){i.unsubscribe(s)},o},t(function(s,o,a){i.reason||(i.reason=new Bi(s,o,a),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new Vo(function(r){t=r}),cancel:t}}}const sy=Vo;function ry(e){return function(n){return e.apply(null,n)}}function oy(e){return E.isObject(e)&&e.isAxiosError===!0}const eo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(eo).forEach(([e,t])=>{eo[t]=e});const ay=eo;function ju(e){const t=new fs(e),n=fu(fs.prototype.request,t);return E.extend(n,fs.prototype,t,{allOwnKeys:!0}),E.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return ju(Vn(e,r))},n}const ke=ju(Wo);ke.Axios=fs;ke.CanceledError=Bi;ke.CancelToken=sy;ke.isCancel=Ou;ke.VERSION=Pu;ke.toFormData=Gs;ke.AxiosError=oe;ke.Cancel=ke.CanceledError;ke.all=function(t){return Promise.all(t)};ke.spread=ry;ke.isAxiosError=oy;ke.mergeConfig=Vn;ke.AxiosHeaders=Nt;ke.formToJSON=e=>Cu(E.isHTMLForm(e)?new FormData(e):e);ke.getAdapter=ku.getAdapter;ke.HttpStatusCode=ay;ke.default=ke;const As=ke,ly={class:"flex flex-col justify-center items-center gap-3"},Iu=we({__name:"ModalMenu",props:{userName:{},style:{}},setup(e){const t=e;return(n,i)=>(O(),H("div",{class:Je([t.style,"absolute z-10 shadow-shadowDrop rounded-[10px] p-3 bg-slate-50"])},[w("div",ly,[$t(n.$slots,"default")])],2))}}),Hi=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n},cy={},uy={class:"text-pink-500 w-[100%] flex flex-row items-center justify-start gap-2 text-center hover:text-[#413d3d] duration-short"};function hy(e,t){return O(),H("div",uy,[$t(e.$slots,"default")])}const Ri=Hi(cy,[["render",hy]]),dy="/assets/sprite-0232df96.svg",fy=["width","height"],py=["xlink:href"],vn=we({__name:"IconSprite",props:{name:{},width:{default:20},height:{default:20}},setup(e){return(t,n)=>(O(),H("span",null,[(O(),H("svg",Ns({class:"icon"},t.$attrs,{width:t.width,height:t.height}),[w("use",{"xlink:href":`${F(dy)}#${t.name}`},null,8,py)],16,fy))]))}}),my="/assets/user-770c2da8.png",gy=["src"],Ai=we({__name:"Avatar",props:{img:{},style:{}},setup(e){return(t,n)=>(O(),H("img",{src:t.img?`https://ivpfaitqeojbyulslqde.supabase.co/storage/v1/object/public/images/${t.img}`:F(my),class:Je(["rounded-[50%] cursor-pointer object-cover overflow-hidden",t.style])},null,10,gy))}}),vy=["value","type"],Ol=we({__name:"Search",props:{style:{},modelValue:{},type:{}},setup(e){return(t,n)=>(O(),H("input",{value:t.modelValue,onInput:n[0]||(n[0]=i=>t.$emit("update:modelValue",i.currentTarget.value.trim())),type:t.type,class:Je(["flex grow font-medium text-[15px] text-gray-700 pl-[10px] rounded-[5px] outline-none focus:ring-[1px]",t.style])},null,42,vy))}});const yy={},wy=e=>(Qh("data-v-ef3d7516"),e=e(),Zh(),e),by={class:"relative inline-block w-[45px] h-[25px]"},_y=wy(()=>w("input",{type:"checkbox",class:"opacity-0 w-0 h-0"},null,-1));function xy(e,t){return O(),H("div",null,[w("label",by,[_y,w("span",{class:"switch round",onClick:t[0]||(t[0]=n=>e.$emit("mode",n.target))})])])}const Ey=Hi(yy,[["render",xy],["__scopeId","data-v-ef3d7516"]]),Ft=we({__name:"Button",props:{text:{},style:{}},setup(e){return(t,n)=>(O(),H("button",{class:Je([t.style,"duration-short"])},ie(t.text),3))}}),Sy={class:"absolute right-0 z-30 top-[50px] w-full"},Ry={class:"flex flex-col gap-5 shadow-shadowDrop bg-cardOpacity rounded-[10px] p-5 w-full"},Ay=["onClick"],Ty=["src"],Cy={class:"flex flex-col w-full"},Oy={class:"font-medium w-[70%] whitespace-nowrap text-ellipsis overflow-hidden"},$y={class:"text-[12px] w-[70%] text-[#d8d8d8] whitespace-nowrap text-ellipsis overflow-hidden"},$l=we({__name:"AnimeOnDemand",props:{arrayAnime:{}},emits:["pushing"],setup(e,{emit:t}){const n=t,i=r=>{n("pushing",r)};return(r,s)=>(O(),H("div",Sy,[w("ol",Ry,[(O(!0),H(xe,null,nt(r.arrayAnime,o=>(O(),H("li",{key:o,onClick:a=>i(o.id),class:"w-full flex flex-row gap-5 text-white hover:bg-cardOpacity2 duration-short rounded-[10px]"},[w("img",{src:`https://dl-20211030-963.anilib.top${o.posters.small.url}`,class:"w-[60px] rounded-[10px]"},null,8,Ty),w("div",Cy,[w("h2",Oy,ie(o.names.ru),1),w("span",$y,ie(o.names.en),1),w("span",null,ie(o.season.year),1)])],8,Ay))),128))])]))}}),ky={class:"flex w-[100%] relative"},Py={class:"flex flex-col w-full"},jy={class:"justify-between items-center flex px-4 py-2 w-full"},Iy={class:"flex flex-row gap-4 w-[60%]"},My={key:0,class:"relative flex flex-row grow gap-5"},zy={class:"flex flex-row items-center gap-5"},Ly={key:0,class:"relative flex flex-row grow gap-5 px-[16px] h-[30px]"},Dy={class:"text-[14px]"},Uy=we({__name:"Header",setup(e){const t=qs(),n=xn(),i=ce(!1),r=ce(!1),s=ce(""),o=ce(null),a=async()=>{const u=await As.get(`${Hg}${s.value}`);return o.value=u.data.list};vt(s,async()=>{s.value.length>3?a():o.value=null});const l=()=>{window.innerWidth<550?r.value=!0:r.value=!1};onresize=()=>{l()},ei(()=>{l()});const c=u=>{t.push({name:"anime",params:{id:u,episode:"1"}}),s.value=""};return(u,h)=>(O(),H("header",ky,[w("div",Py,[w("div",jy,[w("div",Iy,[w("span",{class:"text-[20px] font-medium cursor-pointer text-white hover:text-red-500 duration-short",onClick:h[0]||(h[0]=d=>F(t).push("/"))},"AniList"),r.value?Te("",!0):(O(),H("div",My,[$(Ol,{type:"text",class:Je("focus:ring-cyan-300 bg-[#d8d8d8]"),modelValue:s.value,"onUpdate:modelValue":h[1]||(h[1]=d=>s.value=d)},null,8,["modelValue"]),o.value?(O(),ee($l,{key:0,onPushing:h[2]||(h[2]=d=>c(d)),arrayAnime:o.value},null,8,["arrayAnime"])):Te("",!0)]))]),w("main",zy,[$(Ey),F(n).user?(O(),ee(Ai,{key:0,style:"w-[32px] h-[32px]",img:F(n).user.avatar_url,onClick:h[3]||(h[3]=d=>i.value=!i.value)},null,8,["img"])):Te("",!0),F(n).user?Te("",!0):(O(),ee(Ft,{key:1,onClick:h[4]||(h[4]=d=>F(n).authRegModal=!0),text:"Войти",style:"p-0 font-medium text-gray-500"}))])]),r.value?(O(),H("div",Ly,[$(Ol,{type:"text",class:Je("focus:ring-cyan-300 bg-[#d8d8d8]"),modelValue:s.value,"onUpdate:modelValue":h[5]||(h[5]=d=>s.value=d)},null,8,["modelValue"]),o.value?(O(),ee($l,{key:0,onPushing:h[6]||(h[6]=d=>c(d)),arrayAnime:o.value},null,8,["arrayAnime"])):Te("",!0)])):Te("",!0)]),i.value?(O(),ee(Iu,{key:0,onClick:h[9]||(h[9]=d=>i.value=!1),style:"right-[20px] top-[100%]"},{default:ge(()=>[$(Ri,null,{default:ge(()=>{var d;return[$(vn,{name:"icon-user"}),w("span",Dy,ie((d=F(n).user)==null?void 0:d.name),1)]}),_:1}),$(Ri,{class:"cursor-pointer"},{default:ge(()=>[$(vn,{name:"icon-settings"}),w("span",{class:"text-[14px]",onClick:h[7]||(h[7]=d=>{var f;return F(t).push(`/lk/${(f=F(n).user)==null?void 0:f.id}/История просмотра`)})},"Мой Профиль")]),_:1}),$(Ri,{class:"cursor-pointer"},{default:ge(()=>[$(vn,{name:"exit"}),w("span",{class:"text-[14px]",onClick:h[8]||(h[8]=(...d)=>F(n).logout&&F(n).logout(...d))},"Выйти")]),_:1})]),_:1})):Te("",!0)]))}}),Ny=["type"],ps=we({__name:"Input",props:{type:{},style:{},modelValue:{}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,i=t,r=Re({get:()=>n.modelValue,set:s=>{i("update:modelValue",s)}});return(s,o)=>zs((O(),H("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>r.value=a),type:s.type,class:Je([s.style,"flex grow font-normal text-[16px] p-[10px] rounded-[15px] outline-none focus:ring-[1px] bg-[#f5f5f5]"])},null,10,Ny)),[[xf,r.value]])}}),Fy={key:0,class:"fixed top-0 left-0 w-full h-full flex items-center justify-center"},By=w("div",{class:"absolute bg-black opacity-50 inset-0"},null,-1),Hy={class:"bg-white p-6 rounded-lg max-w-md w-full z-10 flex flex-col gap-3 text-center justify-center"},Wy=we({__name:"RegistrationAndAutorisationModal",setup(e){const t=xn(),n=ce(!0),i=_n({name:"",email:"",password:""}),r=()=>{t.registerUser(i)},s=()=>{t.login(i.email,i.password)},o=Re(()=>n.value?"Вход":"Регистрация"),a=Re(()=>n.value?"Зарегистрироваться":"Войти");return(l,c)=>(O(),ee(jc,{to:"body"},[F(t).authRegModal?(O(),H("div",Fy,[By,w("div",Hy,[w("span",null,ie(o.value),1),n.value?Te("",!0):(O(),ee(ps,{key:0,type:"text",modelValue:i.name,"onUpdate:modelValue":c[0]||(c[0]=u=>i.name=u),placeholder:"имя"},null,8,["modelValue"])),$(ps,{type:"email",modelValue:i.email,"onUpdate:modelValue":c[1]||(c[1]=u=>i.email=u),placeholder:"имеил"},null,8,["modelValue"]),$(ps,{type:"password",modelValue:i.password,"onUpdate:modelValue":c[2]||(c[2]=u=>i.password=u),placeholder:"пароль"},null,8,["modelValue"]),n.value?(O(),ee(Ft,{key:2,onClick:s,class:Je("bg-white rounded-[15px] p-3 hover:shadow-shadowDrop hover:ring-[1px] hover:ring-cyan-300 text-black font-medium"),text:"Войти"})):(O(),ee(Ft,{key:1,onClick:r,class:Je("bg-white rounded-[15px] p-3 hover:shadow-shadowDrop hover:ring-[1px] hover:ring-cyan-300 text-black font-medium"),text:"Зарегистрироваться"})),w("span",null,ie(n.value?"Ещё нет аккаунта?":"Уже есть аккаунт?"),1),$(Ft,{class:Je("bg-white rounded-[15px] p-3 hover:shadow-shadowDrop hover:ring-[1px] hover:ring-cyan-300 text-black font-medium"),onClick:c[3]||(c[3]=u=>n.value=!n.value),text:a.value},null,8,["text"])])])):Te("",!0)]))}});function kl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kl(Object(n),!0).forEach(function(i){st(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kl(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function st(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qy(e,t){if(e==null)return{};var n,i,r=function(o,a){if(o==null)return{};var l,c,u={},h=Object.keys(o);for(c=0;c<h.length;c++)l=h[c],a.indexOf(l)>=0||(u[l]=o[l]);return u}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function bn(e){return function(t){if(Array.isArray(t))return xr(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,n){if(t){if(typeof t=="string")return xr(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return xr(t,n)}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function xr(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Pl,Vy,ns,Ie=(Pl=function(e){/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var t={}.hasOwnProperty;function n(){for(var i=[],r=0;r<arguments.length;r++){var s=arguments[r];if(s){var o=typeof s;if(o==="string"||o==="number")i.push(s);else if(Array.isArray(s)){if(s.length){var a=n.apply(null,s);a&&i.push(a)}}else if(o==="object")if(s.toString===Object.prototype.toString)for(var l in s)t.call(s,l)&&s[l]&&i.push(l);else i.push(s.toString())}}return i.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n})()},Pl(ns={path:Vy,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(t==null&&ns.path)}},ns.exports),ns.exports),wt=function(e){return function(t,n){if(!t)return e;var i;typeof t=="string"?i=t:n=t;var r=e;return i&&(r+="__"+i),r+(n?Object.keys(n).reduce(function(s,o){var a=n[o];return a&&(s+=" "+(typeof a=="boolean"?r+"--"+o:r+"--"+o+"_"+a)),s},""):"")}};function to(e,t,n){var i,r,s,o,a;function l(){var u=Date.now()-o;u<t&&u>=0?i=setTimeout(l,t-u):(i=null,n||(a=e.apply(s,r),s=r=null))}t==null&&(t=100);var c=function(){s=this,r=arguments,o=Date.now();var u=n&&!i;return i||(i=setTimeout(l,t)),u&&(a=e.apply(s,r),s=r=null),a};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(a=e.apply(s,r),s=r=null,clearTimeout(i),i=null)},c}to.debounce=to;var no=to,V=function(){return V=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},V.apply(this,arguments)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Mu(e,t){var n,i;return e&&t?(n=""+e+t[0].toUpperCase()+t.slice(1),i=e+"-"+t):(n=e||t,i=e||t),{name:n,classname:i}}function zu(e){return/^blob:/.test(e)}function jl(e){return zu(e)||function(t){return/^data:/.test(t)}(e)}function Pn(e){return!!(e&&e.constructor&&e.call&&e.apply)}function ze(e){return e===void 0}function ms(e){return typeof e=="object"&&e!==null}function io(e,t,n){var i={};return ms(e)?(Object.keys(t).forEach(function(r){ze(e[r])?i[r]=t[r]:ms(t[r])?ms(e[r])?i[r]=io(e[r],t[r],n[r]):i[r]=e[r]?t[r]:n[r]:t[r]===!0||t[r]===!1?i[r]=!!e[r]:i[r]=e[r]}),i):e?t:n}function is(e){var t=Number(e);return Number.isNaN(t)?e:t}function Il(e){return typeof(e=="number"||function(t){return typeof t=="object"&&t!==null}(e)&&toString.call(e)=="[object Number]")&&!Lu(e)}function Lu(e){return e!=e}function Du(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}var Ti=function(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.type="manipulateImage",this.move=e,this.scale=t},Ky=function(e,t){t===void 0&&(t={}),this.type="resize",this.directions=e,this.params=t},Ko=function(e){this.type="move",this.directions=e},Jy=function(){function e(t,n,i,r,s){this.type="drag",this.nativeEvent=t,this.position=i,this.previousPosition=r,this.element=n,this.anchor=s}return e.prototype.shift=function(){var t=this,n=t.element,i=t.anchor,r=t.position;if(n){var s=n.getBoundingClientRect(),o=s.left,a=s.top;return{left:r.left-o-i.left,top:r.top-a-i.top}}return{left:0,top:0}},e}(),Jo={name:"DraggableElement",props:{classname:{type:String}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){if(!this.$refs.draggable)throw new Error('You should add ref "draggable" to your root element to use draggable mixin');this.touches=[],this.hovered=!1},methods:{onMouseOver:function(){this.hovered||(this.hovered=!0,this.$emit("enter"))},onMouseLeave:function(){this.hovered&&!this.touches.length&&(this.hovered=!1,this.$emit("leave"))},onTouchStart:function(e){e.cancelable&&!this.disabled&&e.touches.length===1&&(this.touches=bn(e.touches),this.hovered||(this.$emit("enter"),this.hovered=!0),e.touches.length&&this.initAnchor(this.touches.reduce(function(t,n){return{clientX:t.clientX+n.clientX/e.touches.length,clientY:t.clientY+n.clientY/e.touches.length}},{clientX:0,clientY:0})),e.preventDefault&&e.preventDefault(),e.stopPropagation())},onTouchEnd:function(){this.processEnd()},onTouchMove:function(e){this.touches.length&&(this.processMove(e,e.touches),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation())},onMouseDown:function(e){if(!this.disabled){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.initAnchor(t),e.stopPropagation()}},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.preventDefault())},onMouseUp:function(){this.processEnd()},initAnchor:function(e){var t=this.$refs.draggable.getBoundingClientRect(),n=t.left,i=t.right,r=t.bottom,s=t.top;this.anchor={left:e.clientX-n,top:e.clientY-s,bottom:r-e.clientY,right:i-e.clientX}},processMove:function(e,t){var n=bn(t);if(this.touches.length){if(this.touches.length===1&&n.length===1){var i=this.$refs.draggable;this.$emit("drag",new Jy(e,i,{left:n[0].clientX,top:n[0].clientY},{left:this.touches[0].clientX,top:this.touches[0].clientY},this.anchor))}this.touches=n}},processEnd:function(){this.touches.length&&this.$emit("drag-end"),this.hovered&&(this.$emit("leave"),this.hovered=!1),this.touches=[]}},emits:["drag","drag-end","leave","enter"]};Jo.render=function(e,t,n,i,r,s){return O(),ee("div",{ref:"draggable",class:n.classname,onTouchstart:t[1]||(t[1]=function(){return s.onTouchStart&&s.onTouchStart.apply(s,arguments)}),onMousedown:t[2]||(t[2]=function(){return s.onMouseDown&&s.onMouseDown.apply(s,arguments)}),onMouseover:t[3]||(t[3]=function(){return s.onMouseOver&&s.onMouseOver.apply(s,arguments)}),onMouseleave:t[4]||(t[4]=function(){return s.onMouseLeave&&s.onMouseLeave.apply(s,arguments)})},[$t(e.$slots,"default")],34)};var Er=wt("vue-handler-wrapper"),Uu={name:"HandlerWrapper",components:{DraggableElement:Jo},props:{horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},computed:{classes:function(){var e;if(this.horizontalPosition||this.verticalPosition){var t,n=Mu(this.horizontalPosition,this.verticalPosition);e=Er((st(t={},n.classname,!0),st(t,"disabled",this.disabled),t))}else e=Er({disabled:this.disabled});return{root:e,draggable:Er("draggable")}}},emits:["leave","enter","drag","drag-end"]};Uu.render=function(e,t,n,i,r,s){var o=Ut("DraggableElement");return O(),ee("div",{class:s.classes.root},[$(o,{class:s.classes.draggable,onDrag:t[1]||(t[1]=function(a){return e.$emit("drag",a)}),onDragEnd:t[2]||(t[2]=function(a){return e.$emit("drag-end")}),onLeave:t[3]||(t[3]=function(a){return e.$emit("leave")}),onEnter:t[4]||(t[4]=function(a){return e.$emit("enter")})},{default:ge(function(){return[$t(e.$slots,"default")]}),_:3},8,["class"])],2)};var Xy=wt("vue-line-wrapper"),Nu={name:"LineWrapper",components:{DraggableElement:Jo},props:{position:{type:String,required:!0},disabled:{type:Boolean,default:!1}},computed:{classname:function(){var e;return Xy((st(e={},this.position,!0),st(e,"disabled",this.disabled),e))}},emits:["leave","enter","drag","drag-end"]};Nu.render=function(e,t,n,i,r,s){var o=Ut("DraggableElement");return O(),ee(o,{class:s.classname,onDrag:t[1]||(t[1]=function(a){return e.$emit("drag",a)}),onDragEnd:t[2]||(t[2]=function(a){return e.$emit("drag-end")}),onLeave:t[3]||(t[3]=function(a){return e.$emit("leave")}),onEnter:t[4]||(t[4]=function(a){return e.$emit("enter")})},{default:ge(function(){return[$t(e.$slots,"default")]}),_:3},8,["class"])};var At=["left","right","top","bottom"],Yy=["left","right"],Gy=["top","bottom"],Qy=["left","top"],Zy=["fill-area","fit-area","stencil","none"],Ml={left:0,top:0,width:0,height:0};function zl(e,t,n){return!(n=n||["width","height","left","top"]).some(function(i){return e[i]!==t[i]})}function Ot(e){return{left:e.left,top:e.top,right:e.left+e.width,bottom:e.top+e.height}}function Kn(e,t){return{left:e.left-t.left,top:e.top-t.top}}function De(e){return{left:e.left+e.width/2,top:e.top+e.height/2}}function Li(e,t){var n={left:0,top:0,right:0,bottom:0};return At.forEach(function(i){var r=t[i],s=Ot(e)[i];n[i]=r!==void 0&&s!==void 0?i==="left"||i==="top"?Math.max(0,r-s):Math.max(0,s-r):0}),n}function St(e,t){return{left:e.left-t.left,top:e.top-t.top,width:e.width+t.left+t.right,height:e.height+t.top+t.bottom}}function Zs(e){return{left:-e.left,top:-e.top}}function Ye(e,t){return V(V({},e),{left:e.left+t.left,top:e.top+t.top})}function lt(e,t,n,i){if(t!==1){if(n){var r=De(e);return{width:e.width*t,height:e.height*t,left:e.left+e.width*(1-t)/2+(n.left-r.left)*(i||1-t),top:e.top+e.height*(1-t)/2+(n.top-r.top)*(i||1-t)}}return{width:e.width*t,height:e.height*t,left:e.left+e.width*(1-t)/2,top:e.top+e.height*(1-t)/2}}return e}function fe(e){return e.width/e.height}function Jn(e,t){return Math.min(t.right!==void 0&&t.left!==void 0?(t.right-t.left)/e.width:1/0,t.bottom!==void 0&&t.top!==void 0?(t.bottom-t.top)/e.height:1/0)}function Xn(e,t){var n={left:0,top:0},i=Li(e,t);return i.left&&i.left>0?n.left=i.left:i.right&&i.right>0&&(n.left=-i.right),i.top&&i.top>0?n.top=i.top:i.bottom&&i.bottom>0&&(n.top=-i.bottom),n}function Sr(e,t){var n;return t.minimum&&e<t.minimum?n=t.minimum:t.maximum&&e>t.maximum&&(n=t.maximum),n}function Fu(e,t){var n=fe(e),i=fe(t);return t.width<1/0&&t.height<1/0?n>i?{width:t.width,height:t.width/n}:{width:t.height*n,height:t.height}:t.width<1/0?{width:t.width,height:t.width/n}:t.height<1/0?{width:t.height*n,height:t.height}:e}function Bu(e,t){var n=t*Math.PI/180;return{width:Math.abs(e.width*Math.cos(n))+Math.abs(e.height*Math.sin(n)),height:Math.abs(e.width*Math.sin(n))+Math.abs(e.height*Math.cos(n))}}function Qt(e,t){var n=t*Math.PI/180;return{left:e.left*Math.cos(n)-e.top*Math.sin(n),top:e.left*Math.sin(n)+e.top*Math.cos(n)}}function er(e,t){var n=Li(Ue(e,t),t);return n.left+n.right+n.top+n.bottom?n.left+n.right>n.top+n.bottom?Math.min((e.width+n.left+n.right)/e.width,Jn(e,t)):Math.min((e.height+n.top+n.bottom)/e.height,Jn(e,t)):1}function Ue(e,t,n){n===void 0&&(n=!1);var i=Xn(e,t);return Ye(e,n?Zs(i):i)}function so(e){return{width:e.right!==void 0&&e.left!==void 0?e.right-e.left:1/0,height:e.bottom!==void 0&&e.top!==void 0?e.bottom-e.top:1/0}}function ew(e,t){return V(V({},e),{minWidth:Math.min(t.width,e.minWidth),minHeight:Math.min(t.height,e.minHeight),maxWidth:Math.min(t.width,e.maxWidth),maxHeight:Math.min(t.height,e.maxHeight)})}function Hu(e,t,n){n===void 0&&(n=!0);var i={};return At.forEach(function(r){var s=e[r],o=t[r];s!==void 0&&o!==void 0?i[r]=r==="left"||r==="top"?n?Math.max(s,o):Math.min(s,o):n?Math.min(s,o):Math.max(s,o):o!==void 0?i[r]=o:s!==void 0&&(i[r]=s)}),i}function tr(e,t){return Hu(e,t,!0)}function Ll(e){var t=e.size,n=e.aspectRatio,i=e.ignoreMinimum,r=e.sizeRestrictions;return!!((t.correctRatio||fe(t)>=n.minimum&&fe(t)<=n.maximum)&&t.height<=r.maxHeight&&t.width<=r.maxWidth&&t.width&&t.height&&(i||t.height>=r.minHeight&&t.width>=r.minWidth))}function Dl(e,t){return Math.pow(e.width-t.width,2)+Math.pow(e.height-t.height,2)}function Lt(e){var t=e.width,n=e.height,i=e.sizeRestrictions,r={minimum:e.aspectRatio&&e.aspectRatio.minimum||0,maximum:e.aspectRatio&&e.aspectRatio.maximum||1/0},s={width:Math.max(i.minWidth,Math.min(i.maxWidth,t)),height:Math.max(i.minHeight,Math.min(i.maxHeight,n))};function o(c,u){return u===void 0&&(u=!1),c.reduce(function(h,d){return Ll({size:d,aspectRatio:r,sizeRestrictions:i,ignoreMinimum:u})&&(!h||Dl(d,{width:t,height:n})<Dl(h,{width:t,height:n}))?d:h},null)}var a=[];r&&[r.minimum,r.maximum].forEach(function(c){c&&a.push({width:s.width,height:s.width/c,correctRatio:!0},{width:s.height*c,height:s.height,correctRatio:!0})}),Ll({size:s,aspectRatio:r,sizeRestrictions:i})&&a.push(s);var l=o(a)||o(a,!0);return l&&{width:l.width,height:l.height}}function ro(e){var t=e.event,n=e.coordinates,i=e.positionRestrictions,r=i===void 0?{}:i,s=Ye(n,t.directions);return Ye(s,Xn(s,r))}function tw(e){var t=e.coordinates,n=e.transform,i=e.imageSize,r=e.sizeRestrictions,s=e.positionRestrictions,o=e.aspectRatio,a=e.visibleArea,l=function(u,h){return ro({coordinates:u,positionRestrictions:s,event:new Ko({left:h.left-u.left,top:h.top-u.top})})},c=V({},t);return(Array.isArray(n)?n:[n]).forEach(function(u){var h={};ze((h=typeof u=="function"?u({coordinates:c,imageSize:i,visibleArea:a}):u).width)&&ze(h.height)||(c=function(d,f){var m=V(V(V({},d),Lt({width:f.width,height:f.height,sizeRestrictions:r,aspectRatio:o})),{left:0,top:0});return l(m,{left:d.left,top:d.top})}(c,V(V({},c),h))),ze(h.left)&&ze(h.top)||(c=l(c,V(V({},c),h)))}),c}function nw(e){e.event;var t=e.getAreaRestrictions,n=e.boundaries,i=e.coordinates,r=e.visibleArea;e.aspectRatio;var s=e.stencilSize,o=e.sizeRestrictions,a=e.positionRestrictions;e.stencilReference;var l,c,u,h=V({},i),d=V({},r),f=V({},s);l=fe(f),c=fe(h),u===void 0&&(u=.001),(l===0||c===0?Math.abs(c-l)<u:Math.abs(c/l)<1+u&&Math.abs(c/l)>1-u)||(h=V(V({},h),Lt({sizeRestrictions:o,width:h.width,height:h.height,aspectRatio:{minimum:fe(f),maximum:fe(f)}})));var m=er(d=lt(d,h.width*n.width/(d.width*f.width)),t({visibleArea:d,type:"resize"}));return m!==1&&(d=lt(d,m),h=lt(h,m)),d=Ue(d=Ye(d,Kn(De(h),De(d))),t({visibleArea:d,type:"move"})),{coordinates:h=Ue(h,tr(Ot(d),a)),visibleArea:d}}function iw(e){var t=e.event,n=e.getAreaRestrictions,i=e.boundaries,r=e.coordinates,s=e.visibleArea;e.aspectRatio,e.stencilSize,e.sizeRestrictions;var o=e.positionRestrictions;e.stencilReference;var a=V({},r),l=V({},s);if(r&&s&&t.type!=="manipulateImage"){var c={width:0,height:0};l.width,i.width,fe(i)>fe(a)?(c.height=.8*i.height,c.width=c.height*fe(a)):(c.width=.8*i.width,c.height=c.width*fe(a));var u=er(l=lt(l,a.width*i.width/(l.width*c.width)),n({visibleArea:l,type:"resize"}));l=lt(l,u),u!==1&&(c.height/=u,c.width/=u),l=Ue(l=Ye(l,Kn(De(a),De(l))),n({visibleArea:l,type:"move"})),a=Ue(a,tr(Ot(l),o))}return{coordinates:a,visibleArea:l}}function sw(e){var t=e.event,n=e.coordinates,i=e.visibleArea,r=e.getAreaRestrictions,s=V({},i),o=V({},n);if(t.type==="setCoordinates"){var a=Math.max(0,o.width-s.width),l=Math.max(0,o.height-s.height);a>l?s=lt(s,Math.min(o.width/s.width,Jn(s,r({visibleArea:s,type:"resize"})))):l>a&&(s=lt(s,Math.min(o.height/s.height,Jn(s,r({visibleArea:s,type:"resize"}))))),s=Ue(s=Ye(s,Zs(Xn(o,Ot(s)))),r({visibleArea:s,type:"move"}))}return{visibleArea:s,coordinates:o}}function rw(e){var t=e.imageSize,n=e.visibleArea,i=e.coordinates,r=n||t;return{left:(n?n.left:0)+r.width/2-i.width/2,top:(n?n.top:0)+r.height/2-i.height/2}}function ow(e){var t=e.imageSize,n=e.visibleArea,i=e.aspectRatio,r=e.sizeRestrictions,s=n||t,o=Math.min(i.maximum||1/0,Math.max(i.minimum||0,fe(s))),a=s.width<s.height?{width:.8*s.width,height:.8*s.width/o}:{height:.8*s.height,width:.8*s.height*o};return Lt(V(V({},a),{aspectRatio:i,sizeRestrictions:r}))}function aw(e){var t,n,i=e.imageSize,r=e.visibleArea,s=e.boundaries,o=e.aspectRatio,a=e.sizeRestrictions,l=e.stencilSize,c=r||i;return fe(c)>fe(s)?n=(t=l.height*c.height/s.height)*fe(l):t=(n=l.width*c.width/s.width)/fe(l),Lt({width:n,height:t,aspectRatio:o,sizeRestrictions:a})}function lw(e){var t=e.getAreaRestrictions,n=e.coordinates,i=e.imageSize,r=fe(e.boundaries);if(n){var s={height:Math.max(n.height,i.height),width:Math.max(n.width,i.width)},o=Fu({width:fe(s)>r?s.width:s.height*r,height:fe(s)>r?s.width/r:s.height},so(t())),a={left:n.left+n.width/2-o.width/2,top:n.top+n.height/2-o.height/2,width:o.width,height:o.height},l=Li(n,Ot(V({left:0,top:0},i))),c={};return!l.left&&!l.right&&a.width<=i.width&&(c.left=0,c.right=i.width),!l.top&&!l.bottom&&a.height<=i.height&&(c.top=0,c.bottom=i.height),Ue(a,c)}var u=fe(i);return o={height:u>r?i.height:i.width/r,width:u>r?i.height*r:i.width},{left:i.width/2-o.width/2,top:i.height/2-o.height/2,width:o.width,height:o.height}}function ss(e,t){return Hu(e,Ot(t))}function cw(e){var t=e.event,n=e.coordinates,i=e.visibleArea,r=e.sizeRestrictions,s=e.getAreaRestrictions,o=e.positionRestrictions,a=e.adjustStencil,l=t.scale,c=t.move,u=V({},i),h=V({},n),d=1,f=1,m=l.factor&&Math.abs(l.factor-1)>.001;u=Ye(u,{left:c.left||0,top:c.top||0});var v={stencil:{minimum:Math.max(r.minWidth?r.minWidth/h.width:0,r.minHeight?r.minHeight/h.height:0),maximum:Math.min(r.maxWidth?r.maxWidth/h.width:1/0,r.maxHeight?r.maxHeight/h.height:1/0,Jn(h,o))},area:{maximum:Jn(u,s({visibleArea:u,type:"resize"}))}};l.factor&&m&&(l.factor<1?(f=Math.max(l.factor,v.stencil.minimum))>1&&(f=1):l.factor>1&&(f=Math.min(l.factor,Math.min(v.area.maximum,v.stencil.maximum)))<1&&(f=1)),f&&(u=lt(u,f,l.center));var b=n.left-i.left,R=i.width+i.left-(n.width+n.left),x=n.top-i.top,T=i.height+i.top-(n.height+n.top);return u=Ue(u=Ye(u,Xn(u,{left:o.left!==void 0?o.left-b*f:void 0,top:o.top!==void 0?o.top-x*f:void 0,bottom:o.bottom!==void 0?o.bottom+T*f:void 0,right:o.right!==void 0?o.right+R*f:void 0})),s({visibleArea:u,type:"move"})),h.width=h.width*f,h.height=h.height*f,h.left=u.left+b*f,h.top=u.top+x*f,h=Ue(h,tr(Ot(u),o)),l.factor&&m&&a&&(l.factor>1?d=Math.min(v.area.maximum,l.factor)/f:l.factor<1&&(d=Math.max(h.height/u.height,h.width/u.width,l.factor/f)),d!==1&&(u=Ye(u=Ue(u=lt(u,d,l.factor>1?l.center:De(h)),s({visibleArea:u,type:"move"})),Zs(Xn(h,Ot(u)))))),{coordinates:h,visibleArea:u}}function uw(e){var t=e.aspectRatio,n=e.getAreaRestrictions,i=e.coordinates,r=e.visibleArea,s=e.sizeRestrictions,o=e.positionRestrictions,a=e.imageSize,l=e.previousImageSize,c=e.angle,u=V({},i),h=V({},r),d=Qt(De(V({left:0,top:0},l)),c);return(u=V(V({},Lt({sizeRestrictions:s,aspectRatio:t,width:u.width,height:u.height})),Qt(De(u),c))).left-=d.left-a.width/2+u.width/2,u.top-=d.top-a.height/2+u.height/2,h=lt(h,er(h,n({visibleArea:h,type:"resize"}))),{coordinates:u=Ue(u,o),visibleArea:h=Ue(h=Ye(h,Kn(De(u),De(i))),n({visibleArea:h,type:"move"}))}}function hw(e){var t=e.flip,n=e.previousFlip,i=e.rotate;e.aspectRatio;var r=e.getAreaRestrictions,s=e.coordinates,o=e.visibleArea,a=e.imageSize,l=V({},s),c=V({},o),u=n.horizontal!==t.horizontal,h=n.vertical!==t.vertical;if(u||h){var d=Qt({left:a.width/2,top:a.height/2},-i),f=Qt(De(l),-i),m=Qt({left:u?d.left-(f.left-d.left):f.left,top:h?d.top-(f.top-d.top):f.top},i);l=Ye(l,Kn(m,De(l))),f=Qt(De(c),-i),c=Ue(c=Ye(c,Kn(m=Qt({left:u?d.left-(f.left-d.left):f.left,top:h?d.top-(f.top-d.top):f.top},i),De(c))),r({visibleArea:c,type:"move"}))}return{coordinates:l,visibleArea:c}}function Ul(e){var t=e.directions,n=e.coordinates,i=e.positionRestrictions,r=i===void 0?{}:i,s=e.sizeRestrictions,o=e.preserveRatio,a=e.compensate,l=V({},t),c=St(n,l).width,u=St(n,l).height;c<0&&(l.left<0&&l.right<0?(l.left=-(n.width-s.minWidth)/(l.left/l.right),l.right=-(n.width-s.minWidth)/(l.right/l.left)):l.left<0?l.left=-(n.width-s.minWidth):l.right<0&&(l.right=-(n.width-s.minWidth))),u<0&&(l.top<0&&l.bottom<0?(l.top=-(n.height-s.minHeight)/(l.top/l.bottom),l.bottom=-(n.height-s.minHeight)/(l.bottom/l.top)):l.top<0?l.top=-(n.height-s.minHeight):l.bottom<0&&(l.bottom=-(n.height-s.minHeight)));var h=Li(St(n,l),r);a&&(h.left&&h.left>0&&h.right===0?(l.right+=h.left,l.left-=h.left):h.right&&h.right>0&&h.left===0&&(l.left+=h.right,l.right-=h.right),h.top&&h.top>0&&h.bottom===0?(l.bottom+=h.top,l.top-=h.top):h.bottom&&h.bottom>0&&h.top===0&&(l.top+=h.bottom,l.bottom-=h.bottom),h=Li(St(n,l),r));var d={width:1/0,height:1/0,left:1/0,right:1/0,top:1/0,bottom:1/0};if(At.forEach(function(v){var b=h[v];b&&l[v]&&(d[v]=Math.max(0,1-b/l[v]))}),o){var f=Math.min.apply(null,At.map(function(v){return d[v]}));f!==1/0&&At.forEach(function(v){l[v]*=f})}else At.forEach(function(v){d[v]!==1/0&&(l[v]*=d[v])});if(c=St(n,l).width,u=St(n,l).height,l.right+l.left&&(c>s.maxWidth?d.width=(s.maxWidth-n.width)/(l.right+l.left):c<s.minWidth&&(d.width=(s.minWidth-n.width)/(l.right+l.left))),l.bottom+l.top&&(u>s.maxHeight?d.height=(s.maxHeight-n.height)/(l.bottom+l.top):u<s.minHeight&&(d.height=(s.minHeight-n.height)/(l.bottom+l.top))),o){var m=Math.min(d.width,d.height);m!==1/0&&At.forEach(function(v){l[v]*=m})}else d.width!==1/0&&Yy.forEach(function(v){l[v]*=d.width}),d.height!==1/0&&Gy.forEach(function(v){l[v]*=d.height});return l}function rs(e,t,n){return t==0&&n==0?e/2:t==0?0:n==0?e:e*Math.abs(t/(t+n))}var dw=wt("vue-simple-handler"),fw=wt("vue-simple-handler-wrapper"),Xo={name:"SimpleHandler",components:{HandlerWrapper:Uu},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){var e,t=(st(e={},this.horizontalPosition,!!this.horizontalPosition),st(e,this.verticalPosition,!!this.verticalPosition),st(e,"".concat(this.horizontalPosition,"-").concat(this.verticalPosition),!!(this.verticalPosition&&this.horizontalPosition)),st(e,"hover",this.hover),e);return{default:Ie(dw(t),this.defaultClass,this.hover&&this.hoverClass),wrapper:Ie(fw(t),this.wrapperClass)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"]};Xo.render=function(e,t,n,i,r,s){var o=Ut("HandlerWrapper");return O(),ee(o,{class:s.classes.wrapper,"vertical-position":n.verticalPosition,"horizontal-position":n.horizontalPosition,disabled:n.disabled,onDrag:s.onDrag,onDragEnd:s.onDragEnd,onEnter:s.onEnter,onLeave:s.onLeave},{default:ge(function(){return[$("div",{class:s.classes.default},null,2)]}),_:1},8,["class","vertical-position","horizontal-position","disabled","onDrag","onDragEnd","onEnter","onLeave"])};var pw=wt("vue-simple-line"),mw=wt("vue-simple-line-wrapper"),Yo={name:"SimpleLine",components:{LineWrapper:Nu},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},position:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){return{root:Ie(pw(st({},this.position,!0)),this.defaultClass,this.hover&&this.hoverClass),wrapper:Ie(mw(st({},this.position,!0)),this.wrapperClass)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}},emits:["drag","drag-end"]};Yo.render=function(e,t,n,i,r,s){var o=Ut("LineWrapper");return O(),ee(o,{class:s.classes.wrapper,position:n.position,disabled:n.disabled,onDrag:s.onDrag,onDragEnd:s.onDragEnd,onEnter:s.onEnter,onLeave:s.onLeave},{default:ge(function(){return[$("div",{class:s.classes.root},null,2)]}),_:1},8,["class","position","disabled","onDrag","onDragEnd","onEnter","onLeave"])};var Rr=wt("vue-bounding-box"),gw=["east","west",null],vw=["south","north",null],Wu={name:"BoundingBox",props:{width:{type:Number},height:{type:Number},transitions:{type:Object},handlers:{type:Object,default:function(){return{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}}},handlersComponent:{type:[Object,String],default:function(){return Xo}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}},lines:{type:Object,default:function(){return{west:!0,north:!0,east:!0,south:!0}}},linesComponent:{type:[Object,String],default:function(){return Yo}},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},resizable:{type:Boolean,default:!0}},data:function(){var e=[];return gw.forEach(function(t){vw.forEach(function(n){if(t!==n){var i=Mu(t,n),r=i.name,s=i.classname;e.push({name:r,classname:s,verticalDirection:n,horizontalDirection:t})}})}),{points:e}},computed:{style:function(){var e={};return this.width&&this.height&&(e.width="".concat(this.width,"px"),e.height="".concat(this.height,"px"),this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction))),e},classes:function(){var e=this.handlersClasses,t=this.handlersWrappersClasses,n=this.linesClasses,i=this.linesWrappersClasses;return{root:Rr(),handlers:e,handlersWrappers:t,lines:n,linesWrappers:i}},lineNodes:function(){var e=this,t=[];return this.points.forEach(function(n){n.horizontalDirection&&n.verticalDirection||!e.lines[n.name]||t.push({name:n.name,component:e.linesComponent,class:Ie(e.classes.lines.default,e.classes.lines[n.name],!e.resizable&&e.classes.lines.disabled),wrapperClass:Ie(e.classes.linesWrappers.default,e.classes.linesWrappers[n.name],!e.resizable&&e.classes.linesWrappers.disabled),hoverClass:e.classes.lines.hover,verticalDirection:n.verticalDirection,horizontalDirection:n.horizontalDirection,disabled:!e.resizable})}),t},handlerNodes:function(){var e=this,t=[],n=this.width,i=this.height;return this.points.forEach(function(r){if(e.handlers[r.name]){var s={name:r.name,component:e.handlersComponent,class:Ie(e.classes.handlers.default,e.classes.handlers[r.name]),wrapperClass:Ie(e.classes.handlersWrappers.default,e.classes.handlersWrappers[r.name]),hoverClass:e.classes.handlers.hover,verticalDirection:r.verticalDirection,horizontalDirection:r.horizontalDirection,disabled:!e.resizable};if(n&&i){var o=r.horizontalDirection,a=r.verticalDirection,l=o==="east"?n:o==="west"?0:n/2,c=a==="south"?i:a==="north"?0:i/2;s.wrapperClass=Rr("handler"),s.wrapperStyle={transform:"translate(".concat(l,"px, ").concat(c,"px)")},e.transitions&&e.transitions.enabled&&(s.wrapperStyle.transition="".concat(e.transitions.time,"ms ").concat(e.transitions.timingFunction))}else s.wrapperClass=Rr("handler",st({},r.classname,!0));t.push(s)}}),t}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[]},methods:{onEnd:function(){this.$emit("resize-end")},onHandlerDrag:function(e,t,n){var i,r=e.shift(),s=r.left,o=r.top,a={left:0,right:0,top:0,bottom:0};t==="west"?a.left-=s:t==="east"&&(a.right+=s),n==="north"?a.top-=o:n==="south"&&(a.bottom+=o),!n&&t?i="width":n&&!t&&(i="height"),this.resizable&&this.$emit("resize",new Ky(a,{allowedDirections:{left:t==="west"||!t,right:t==="east"||!t,bottom:n==="south"||!n,top:n==="north"||!n},preserveAspectRatio:e.nativeEvent&&e.nativeEvent.shiftKey,respectDirection:i}))}},emits:["resize","resize-end"]};Wu.render=function(e,t,n,i,r,s){return O(),ee("div",{ref:"box",class:s.classes.root,style:s.style},[$t(e.$slots,"default"),$("div",null,[(O(!0),ee(xe,null,nt(s.lineNodes,function(o){return O(),ee(_s(o.component),{key:o.name,"default-class":o.class,"hover-class":o.hoverClass,"wrapper-class":o.wrapperClass,position:o.name,disabled:o.disabled,onDrag:function(a){return s.onHandlerDrag(a,o.horizontalDirection,o.verticalDirection)},onDragEnd:t[1]||(t[1]=function(a){return s.onEnd()})},null,8,["default-class","hover-class","wrapper-class","position","disabled","onDrag"])}),128))]),(O(!0),ee(xe,null,nt(s.handlerNodes,function(o){return O(),ee("div",{key:o.name,style:o.wrapperStyle,class:o.wrapperClass},[(O(),ee(_s(o.component),{"default-class":o.class,"hover-class":o.hoverClass,"wrapper-class":o.wrapperClass,"horizontal-position":o.horizontalDirection,"vertical-position":o.verticalDirection,disabled:o.disabled,onDrag:function(a){return s.onHandlerDrag(a,o.horizontalDirection,o.verticalDirection)},onDragEnd:t[2]||(t[2]=function(a){return s.onEnd()})},null,8,["default-class","hover-class","wrapper-class","horizontal-position","vertical-position","disabled","onDrag"]))],6)}),128))],6)};var yw=wt("vue-draggable-area"),qu={name:"DraggableArea",props:{movable:{type:Boolean,default:!0},activationDistance:{type:Number,default:20}},computed:{classnames:function(){return{default:yw()}}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[],this.touchStarted=!1},methods:{onTouchStart:function(e){if(e.cancelable){var t=this.movable&&e.touches.length===1;t&&(this.touches=bn(e.touches)),(this.touchStarted||t)&&(e.preventDefault(),e.stopPropagation())}},onTouchEnd:function(){this.touchStarted=!1,this.processEnd()},onTouchMove:function(e){this.touches.length>=1&&(this.touchStarted?(this.processMove(e,e.touches),e.preventDefault(),e.stopPropagation()):Du({x:this.touches[0].clientX,y:this.touches[0].clientY},{x:e.touches[0].clientX,y:e.touches[0].clientY})>this.activationDistance&&(this.initAnchor({clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}),this.touchStarted=!0))},onMouseDown:function(e){if(this.movable&&e.button===0){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.initAnchor(t),e.stopPropagation()}},onMouseMove:function(e){this.touches.length&&(this.processMove(e,[{fake:!0,clientX:e.clientX,clientY:e.clientY}]),e.preventDefault&&e.cancelable&&e.preventDefault(),e.stopPropagation())},onMouseUp:function(){this.processEnd()},initAnchor:function(e){var t=this.$refs.container.getBoundingClientRect(),n=t.left,i=t.top;this.anchor={x:e.clientX-n,y:e.clientY-i}},processMove:function(e,t){var n=bn(t);if(this.touches.length){var i=this.$refs.container.getBoundingClientRect(),r=i.left,s=i.top;this.touches.length===1&&n.length===1&&this.$emit("move",new Ko({left:n[0].clientX-(r+this.anchor.x),top:n[0].clientY-(s+this.anchor.y)}))}},processEnd:function(){this.touches.length&&this.$emit("move-end"),this.touches=[]}},emits:["move","move-end"]};qu.render=function(e,t,n,i,r,s){return O(),ee("div",{ref:"container",onTouchstart:t[1]||(t[1]=function(){return s.onTouchStart&&s.onTouchStart.apply(s,arguments)}),onMousedown:t[2]||(t[2]=function(){return s.onMouseDown&&s.onMouseDown.apply(s,arguments)})},[$t(e.$slots,"default")],544)};function Ar(e){var t,n;return{rotate:e.rotate||0,flip:{horizontal:((t=e==null?void 0:e.flip)===null||t===void 0?void 0:t.horizontal)||!1,vertical:((n=e==null?void 0:e.flip)===null||n===void 0?void 0:n.vertical)||!1}}}function ww(e){return new Promise(function(t,n){try{if(e)if(/^data:/i.test(e))t(function(l){l=l.replace(/^data:([^;]+);base64,/gim,"");for(var c=atob(l),u=c.length,h=new ArrayBuffer(u),d=new Uint8Array(h),f=0;f<u;f++)d[f]=c.charCodeAt(f);return h}(e));else if(/^blob:/i.test(e)){var i=new FileReader;i.onload=function(l){t(l.target.result)},s=e,o=function(l){i.readAsArrayBuffer(l)},(a=new XMLHttpRequest).open("GET",s,!0),a.responseType="blob",a.onload=function(){this.status!=200&&this.status!==0||o(this.response)},a.send()}else{var r=new XMLHttpRequest;r.onreadystatechange=function(){r.readyState===4&&(r.status===200||r.status===0?t(r.response):n("Warning: could not load an image to parse its orientation"),r=null)},r.onprogress=function(){r.getResponseHeader("content-type")!=="image/jpeg"&&r.abort()},r.withCredentials=!1,r.open("GET",e,!0),r.responseType="arraybuffer",r.send(null)}else n("Error: the image is empty")}catch(l){n(l)}var s,o,a})}function Vu(e){var t=e.rotate,n=e.flip,i=e.scaleX,r=e.scaleY,s="";return s+=" rotate("+t+"deg) ",s+=" scaleX("+i*(n.horizontal?-1:1)+") ",s+=" scaleY("+r*(n.vertical?-1:1)+") "}function bw(e){try{var t,n=new DataView(e),i=void 0,r=void 0,s=void 0,o=void 0;if(n.getUint8(0)===255&&n.getUint8(1)===216)for(var a=n.byteLength,l=2;l+1<a;){if(n.getUint8(l)===255&&n.getUint8(l+1)===225){s=l;break}l++}if(s&&(i=s+10,function(f,m,v){var b,R="";for(b=m,v+=m;b<v;b++)R+=String.fromCharCode(f.getUint8(b));return R}(n,s+4,4)==="Exif")){var c=n.getUint16(i);if(((r=c===18761)||c===19789)&&n.getUint16(i+2,r)===42){var u=n.getUint32(i+4,r);u>=8&&(o=i+u)}}if(o){for(var h=n.getUint16(o,r),d=0;d<h;d++)if(l=o+12*d+2,n.getUint16(l,r)===274){l+=8,t=n.getUint16(l,r),n.setUint16(l,1,r);break}}return t}catch{return null}}function Nl(e,t){var n=t.getBoundingClientRect(),i=n.left,r=n.top,s={left:0,top:0},o=0;return e.forEach(function(a){s.left+=(a.clientX-i)/e.length,s.top+=(a.clientY-r)/e.length}),e.forEach(function(a){o+=Du({x:s.left,y:s.top},{x:a.clientX-i,y:a.clientY-r})}),{centerMass:s,spread:o,count:e.length}}var Ku={props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0},eventsFilter:{type:Function,required:!1}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeUnmount:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},created:function(){this.transforming=!1,this.debouncedProcessEnd=no(this.processEnd),this.touches=[]},methods:{processMove:function(e,t){if(this.touches.length){if(this.touches.length===1&&t.length===1)this.$emit("move",new Ti({left:this.touches[0].clientX-t[0].clientX,top:this.touches[0].clientY-t[0].clientY}));else if(this.touches.length>1&&this.touchResize){var n=Nl(t,this.$refs.container),i=this.oldGeometricProperties;i.count===n.count&&i.count>1&&this.$emit("resize",new Ti({left:i.centerMass.left-n.centerMass.left,top:i.centerMass.top-n.centerMass.top},{factor:i.spread/n.spread,center:n.centerMass})),this.oldGeometricProperties=n}this.touches=t}},processEnd:function(){this.transforming&&(this.transforming=!1,this.$emit("transform-end"))},processStart:function(){this.transforming=!0,this.debouncedProcessEnd.clear()},processEvent:function(e){return this.eventsFilter?this.eventsFilter(e,this.transforming)!==!1:(e.preventDefault(),e.stopPropagation(),!0)},onTouchStart:function(e){if(e.cancelable&&(this.touchMove||this.touchResize&&e.touches.length>1)&&this.processEvent(e)){var t=this.$refs.container,n=t.getBoundingClientRect(),i=n.left,r=n.top,s=n.bottom,o=n.right;this.touches=bn(e.touches).filter(function(a){return a.clientX>i&&a.clientX<o&&a.clientY>r&&a.clientY<s}),this.oldGeometricProperties=Nl(this.touches,t)}},onTouchEnd:function(e){e.touches.length===0&&(this.touches=[],this.processEnd())},onTouchMove:function(e){var t=this;if(this.touches.length){var n=bn(e.touches).filter(function(i){return!i.identifier||t.touches.find(function(r){return r.identifier===i.identifier})});this.processEvent(e)&&(this.processMove(e,n),this.processStart())}},onMouseDown:function(e){if(this.mouseMove&&"buttons"in e&&e.buttons===1&&this.processEvent(e)){var t={fake:!0,clientX:e.clientX,clientY:e.clientY};this.touches=[t],this.processStart()}},onMouseMove:function(e){this.touches.length&&this.processEvent(e)&&this.processMove(e,[{clientX:e.clientX,clientY:e.clientY}])},onMouseUp:function(){this.touches=[],this.processEnd()},onWheel:function(e){if(this.wheelResize&&this.processEvent(e)){var t=this.$refs.container.getBoundingClientRect(),n=t.left,i=t.top,r=1+this.wheelResize.ratio*(o=e.deltaY||e.detail||e.wheelDelta,(a=+o)==0||Lu(a)?a:a>0?1:-1),s={left:e.clientX-n,top:e.clientY-i};this.$emit("resize",new Ti({},{factor:r,center:s})),this.touches.length||this.debouncedProcessEnd()}var o,a}},emits:["resize","move","transform-end"]};Ku.render=function(e,t,n,i,r,s){return O(),ee("div",{ref:"container",onTouchstart:t[1]||(t[1]=function(){return s.onTouchStart&&s.onTouchStart.apply(s,arguments)}),onMousedown:t[2]||(t[2]=function(){return s.onMouseDown&&s.onMouseDown.apply(s,arguments)}),onWheel:t[3]||(t[3]=function(){return s.onWheel&&s.onWheel.apply(s,arguments)})},[$t(e.$slots,"default")],544)};var oo={components:{TransformableImage:Ku},props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0}},emits:["resize","move"]};oo.render=function(e,t,n,i,r,s){var o=Ut("transformable-image");return O(),ee(o,{"touch-move":n.touchMove,"touch-resize":n.touchResize,"mouse-move":n.mouseMove,"wheel-resize":n.wheelResize,onMove:t[1]||(t[1]=function(a){return e.$emit("move",a)}),onResize:t[2]||(t[2]=function(a){return e.$emit("resize",a)})},{default:ge(function(){return[$t(e.$slots,"default")]}),_:3},8,["touch-move","touch-resize","mouse-move","wheel-resize"])};var os=wt("vue-preview"),Ju={props:{coordinates:{type:Object},transitions:{type:Object},image:{type:Object,default:function(){return{}}},imageClass:{type:String},width:{type:Number},height:{type:Number},fill:{type:Boolean}},data:function(){return{calculatedImageSize:{width:0,height:0},calculatedSize:{width:0,height:0}}},computed:{classes:function(){return{root:os({fill:this.fill}),wrapper:os("wrapper"),imageWrapper:os("image-wrapper"),image:Ie(os("image"),this.imageClass)}},style:function(){if(this.fill)return{};var e={};return this.width&&(e.width="".concat(this.size.width,"px")),this.height&&(e.height="".concat(this.size.height,"px")),this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),e},wrapperStyle:function(){var e={width:"".concat(this.size.width,"px"),height:"".concat(this.size.height,"px"),left:"calc(50% - ".concat(this.size.width/2,"px)"),top:"calc(50% - ".concat(this.size.height/2,"px)")};return this.transitions&&this.transitions.enabled&&(e.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),e},imageStyle:function(){if(this.coordinates&&this.image){var e=this.coordinates.width/this.size.width,t=he(he({rotate:0,flip:{horizontal:!1,vertical:!1}},this.image.transforms),{},{scaleX:1/e,scaleY:1/e}),n=this.imageSize.width,i=this.imageSize.height,r=Bu({width:n,height:i},t.rotate),s={width:"".concat(n,"px"),height:"".concat(i,"px"),left:"0px",top:"0px"},o={rotate:{left:(n-r.width)*t.scaleX/2,top:(i-r.height)*t.scaleY/2},scale:{left:(1-t.scaleX)*n/2,top:(1-t.scaleY)*i/2}};return s.transform=`translate(
				`.concat(-this.coordinates.left/e-o.rotate.left-o.scale.left,"px,").concat(-this.coordinates.top/e-o.rotate.top-o.scale.top,"px) ")+Vu(t),this.transitions&&this.transitions.enabled&&(s.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),s}return{}},size:function(){return{width:this.width||this.calculatedSize.width,height:this.height||this.calculatedSize.height}},imageSize:function(){return{width:this.image.width||this.calculatedImageSize.width,height:this.image.height||this.calculatedImageSize.height}}},watch:{image:function(e){(e.width||e.height)&&this.onChangeImage()}},mounted:function(){var e=this;this.onChangeImage(),this.$refs.image.addEventListener("load",function(){e.refreshImage()}),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh)},methods:{refreshImage:function(){var e=this.$refs.image;this.calculatedImageSize.height=e.naturalHeight,this.calculatedImageSize.width=e.naturalWidth},refresh:function(){var e=this.$refs.root;this.width||(this.calculatedSize.width=e.clientWidth),this.height||(this.calculatedSize.height=e.clientHeight)},onChangeImage:function(){var e=this.$refs.image;e&&e.complete&&this.refreshImage(),this.refresh()}}};Ju.render=function(e,t,n,i,r,s){return O(),ee("div",{ref:"root",class:s.classes.root,style:s.style},[$("div",{ref:"wrapper",class:s.classes.wrapper,style:s.wrapperStyle},[zs($("img",{ref:"image",src:n.image&&n.image.src,class:s.classes.image,style:s.imageStyle},null,14,["src"]),[[ko,n.image&&n.image.src]])],6)],6)};var Xu={components:{Preview:Ju},inheritAttrs:!1};Xu.render=function(e,t,n,i,r,s){var o=Ut("preview");return O(),ee(o,Ns(e.$attrs,{fill:!0}),null,16)};var Tr=wt("vue-rectangle-stencil"),Yu={name:"RectangleStencil",components:{StencilPreview:Xu,BoundingBox:Wu,DraggableArea:qu},props:{image:{type:Object},coordinates:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object},handlersComponent:{type:[Object,String],default:function(){return Xo}},lines:{type:Object},linesComponent:{type:[Object,String],default:function(){return Yo}},aspectRatio:{type:[Number,String]},minAspectRatio:{type:[Number,String]},maxAspectRatio:{type:[Number,String]},movable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},transitions:{type:Object},movingClass:{type:String},resizingClass:{type:String},previewClass:{type:String},boundingBoxClass:{type:String},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}}},data:function(){return{moving:!1,resizing:!1}},computed:{classes:function(){return{stencil:Ie(Tr({movable:this.movable,moving:this.moving,resizing:this.resizing}),this.moving&&this.movingClass,this.resizing&&this.resizingClass),preview:Ie(Tr("preview"),this.previewClass),boundingBox:Ie(Tr("bounding-box"),this.boundingBoxClass)}},style:function(){var e=this.stencilCoordinates,t=e.height,n=e.width,i=e.left,r=e.top,s={width:"".concat(n,"px"),height:"".concat(t,"px"),transform:"translate(".concat(i,"px, ").concat(r,"px)")};return this.transitions&&this.transitions.enabled&&(s.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),s}},methods:{onMove:function(e){this.$emit("move",e),this.moving=!0},onMoveEnd:function(){this.$emit("move-end"),this.moving=!1},onResize:function(e){this.$emit("resize",e),this.resizing=!0},onResizeEnd:function(){this.$emit("resize-end"),this.resizing=!1},aspectRatios:function(){return{minimum:this.aspectRatio||this.minAspectRatio,maximum:this.aspectRatio||this.maxAspectRatio}}},emits:["resize","resize-end","move","move-end"]};Yu.render=function(e,t,n,i,r,s){var o=Ut("stencil-preview"),a=Ut("draggable-area"),l=Ut("bounding-box");return O(),ee("div",{class:s.classes.stencil,style:s.style},[$(l,{width:n.stencilCoordinates.width,height:n.stencilCoordinates.height,transitions:n.transitions,class:s.classes.boundingBox,handlers:n.handlers,"handlers-component":n.handlersComponent,"handlers-classes":n.handlersClasses,"handlers-wrappers-classes":n.handlersWrappersClasses,lines:n.lines,"lines-component":n.linesComponent,"lines-classes":n.linesClasses,"lines-wrappers-classes":n.linesWrappersClasses,resizable:n.resizable,onResize:s.onResize,onResizeEnd:s.onResizeEnd},{default:ge(function(){return[$(a,{movable:n.movable,onMove:s.onMove,onMoveEnd:s.onMoveEnd},{default:ge(function(){return[$(o,{image:n.image,coordinates:n.coordinates,width:n.stencilCoordinates.width,height:n.stencilCoordinates.height,class:s.classes.preview,transitions:n.transitions},null,8,["image","coordinates","width","height","class","transitions"])]}),_:1},8,["movable","onMove","onMoveEnd"])]}),_:1},8,["width","height","transitions","class","handlers","handlers-component","handlers-classes","handlers-wrappers-classes","lines","lines-component","lines-classes","lines-wrappers-classes","resizable","onResize","onResizeEnd"])],6)};var _w=["transitions"],jt=wt("vue-advanced-cropper"),Gu={name:"Cropper",components:{BackgroundWrapper:oo},props:{src:{type:String,default:null},stencilComponent:{type:[Object,String],default:function(){return Yu}},backgroundWrapperComponent:{type:[Object,String],default:function(){return oo}},stencilProps:{type:Object,default:function(){return{}}},autoZoom:{type:Boolean,default:!1},imageClass:{type:String},boundariesClass:{type:String},backgroundClass:{type:String},foregroundClass:{type:String},minWidth:{type:[Number,String]},minHeight:{type:[Number,String]},maxWidth:{type:[Number,String]},maxHeight:{type:[Number,String]},debounce:{type:[Boolean,Number],default:500},transitions:{type:Boolean,default:!0},checkOrientation:{type:Boolean,default:!0},canvas:{type:[Object,Boolean],default:!0},crossOrigin:{type:[Boolean,String],default:void 0},transitionTime:{type:Number,default:300},imageRestriction:{type:String,default:"fit-area",validator:function(e){return Zy.indexOf(e)!==-1}},roundResult:{type:Boolean,default:!0},defaultSize:{type:[Function,Object]},defaultPosition:{type:[Function,Object]},defaultVisibleArea:{type:[Function,Object]},defaultTransforms:{type:[Function,Object]},defaultBoundaries:{type:[Function,String],validator:function(e){return!(typeof e=="string"&&e!=="fill"&&e!=="fit")}},priority:{type:String,default:"coordinates"},stencilSize:{type:[Object,Function]},resizeImage:{type:[Boolean,Object],default:!0},moveImage:{type:[Boolean,Object],default:!0},autoZoomAlgorithm:{type:Function},resizeAlgorithm:{type:Function,default:function(e){var t=e.event,n=e.coordinates,i=e.aspectRatio,r=e.positionRestrictions,s=e.sizeRestrictions,o=V(V({},n),{right:n.left+n.width,bottom:n.top+n.height}),a=t.params||{},l=V({},t.directions),c=a.allowedDirections||{left:!0,right:!0,bottom:!0,top:!0};s.widthFrozen&&(l.left=0,l.right=0),s.heightFrozen&&(l.top=0,l.bottom=0),At.forEach(function(C){c[C]||(l[C]=0)});var u=St(o,l=Ul({coordinates:o,directions:l,sizeRestrictions:s,positionRestrictions:r})).width,h=St(o,l).height,d=a.preserveRatio?fe(o):Sr(u/h,i);if(d){var f=a.respectDirection;if(f||(f=o.width>=o.height||d===1?"width":"height"),f==="width"){var m=u/d-o.height;if(c.top&&c.bottom){var v=l.top,b=l.bottom;l.bottom=rs(m,b,v),l.top=rs(m,v,b)}else c.bottom?l.bottom=m:c.top?l.top=m:c.right?l.right=0:c.left&&(l.left=0)}else if(f==="height"){var R=o.width-h*d;if(c.left&&c.right){var x=l.left,T=l.right;l.left=-rs(R,x,T),l.right=-rs(R,T,x)}else c.left?l.left=-R:c.right?l.right=-R:c.top?l.top=0:c.bottom&&(l.bottom=0)}l=Ul({directions:l,coordinates:o,sizeRestrictions:s,positionRestrictions:r,preserveRatio:!0,compensate:a.compensate})}return u=St(o,l).width,h=St(o,l).height,(d=a.preserveRatio?fe(o):Sr(u/h,i))&&Math.abs(d-u/h)>.001&&At.forEach(function(C){c[C]||(l[C]=0)}),ro({event:new Ko({left:-l.left,top:-l.top}),coordinates:{width:n.width+l.right+l.left,height:n.height+l.top+l.bottom,left:n.left,top:n.top},positionRestrictions:r})}},moveAlgorithm:{type:Function,default:ro},initStretcher:{type:Function,default:function(e){var t=e.stretcher,n=e.imageSize,i=fe(n);t.style.width=n.width+"px",t.style.height=t.clientWidth/i+"px",t.style.width=t.clientWidth+"px"}},fitCoordinates:{type:Function,default:function(e){var t=e.visibleArea,n=e.coordinates,i=e.aspectRatio,r=e.sizeRestrictions,s=e.positionRestrictions,o=V(V({},n),Lt({width:n.width,height:n.height,aspectRatio:i,sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minHeight:Math.min(t.height,r.minHeight),minWidth:Math.min(t.width,r.minWidth)}}));return o=Ue(o=Ye(o,Kn(De(n),De(o))),tr(Ot(t),s))}},fitVisibleArea:{type:Function,default:function(e){var t=e.visibleArea,n=e.boundaries,i=e.getAreaRestrictions,r=e.coordinates,s=V({},t);s.height=s.width/fe(n),s.top+=(t.height-s.height)/2,(r.height-s.height>0||r.width-s.width>0)&&(s=lt(s,Math.max(r.height/s.height,r.width/s.width)));var o=Zs(Xn(r,Ot(s=lt(s,er(s,i({visibleArea:s,type:"resize"}))))));return s.width<r.width&&(o.left=0),s.height<r.height&&(o.top=0),s=Ue(s=Ye(s,o),i({visibleArea:s,type:"move"}))}},areaRestrictionsAlgorithm:{type:Function,default:function(e){var t=e.visibleArea,n=e.boundaries,i=e.imageSize,r=e.imageRestriction,s=e.type,o={};return r==="fill-area"?o={left:0,top:0,right:i.width,bottom:i.height}:r==="fit-area"&&(fe(n)>fe(i)?(o={top:0,bottom:i.height},t&&s==="move"&&(t.width>i.width?(o.left=-(t.width-i.width)/2,o.right=i.width-o.left):(o.left=0,o.right=i.width))):(o={left:0,right:i.width},t&&s==="move"&&(t.height>i.height?(o.top=-(t.height-i.height)/2,o.bottom=i.height-o.top):(o.top=0,o.bottom=i.height)))),o}},sizeRestrictionsAlgorithm:{type:Function,default:function(e){return{minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight}}},positionRestrictionsAlgorithm:{type:Function,default:function(e){var t=e.imageSize,n={};return e.imageRestriction!=="none"&&(n={left:0,top:0,right:t.width,bottom:t.height}),n}}},data:function(){return{transitionsActive:!1,imageLoaded:!1,imageAttributes:{width:null,height:null,crossOrigin:null,src:null},defaultImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},appliedImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},boundaries:{width:0,height:0},visibleArea:null,coordinates:he({},Ml)}},computed:{image:function(){return{src:this.imageAttributes.src,width:this.imageAttributes.width,height:this.imageAttributes.height,transforms:this.imageTransforms}},imageTransforms:function(){return{rotate:this.appliedImageTransforms.rotate,flip:{horizontal:this.appliedImageTransforms.flip.horizontal,vertical:this.appliedImageTransforms.flip.vertical},translateX:this.visibleArea?this.visibleArea.left/this.coefficient:0,translateY:this.visibleArea?this.visibleArea.top/this.coefficient:0,scaleX:1/this.coefficient,scaleY:1/this.coefficient}},imageSize:function(){var e=function(t){return t*Math.PI/180}(this.imageTransforms.rotate);return{width:Math.abs(this.imageAttributes.width*Math.cos(e))+Math.abs(this.imageAttributes.height*Math.sin(e)),height:Math.abs(this.imageAttributes.width*Math.sin(e))+Math.abs(this.imageAttributes.height*Math.cos(e))}},initialized:function(){return!!(this.visibleArea&&this.imageLoaded)},settings:function(){var e=io(this.resizeImage,{touch:!0,wheel:{ratio:.1},adjustStencil:!0},{touch:!1,wheel:!1,adjustStencil:!1});return{moveImage:io(this.moveImage,{touch:!0,mouse:!0},{touch:!1,mouse:!1}),resizeImage:e}},coefficient:function(){return this.visibleArea?this.visibleArea.width/this.boundaries.width:0},areaRestrictions:function(){return this.imageLoaded?this.areaRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction,boundaries:this.boundaries}):{}},transitionsOptions:function(){return{enabled:this.transitionsActive,timingFunction:"ease-in-out",time:350}},sizeRestrictions:function(){if(this.boundaries.width&&this.boundaries.height&&this.imageSize.width&&this.imageSize.height){var e=this.sizeRestrictionsAlgorithm({imageSize:this.imageSize,minWidth:ze(this.minWidth)?0:is(this.minWidth),minHeight:ze(this.minHeight)?0:is(this.minHeight),maxWidth:ze(this.maxWidth)?1/0:is(this.maxWidth),maxHeight:ze(this.maxHeight)?1/0:is(this.maxHeight)});if(e=function(i){var r=i.areaRestrictions,s=i.sizeRestrictions;i.imageSize;var o=i.boundaries,a=i.positionRestrictions;i.imageRestriction;var l=V(V({},s),{minWidth:s.minWidth!==void 0?s.minWidth:0,minHeight:s.minHeight!==void 0?s.minHeight:0,maxWidth:s.maxWidth!==void 0?s.maxWidth:1/0,maxHeight:s.maxHeight!==void 0?s.maxHeight:1/0});a.left!==void 0&&a.right!==void 0&&(l.maxWidth=Math.min(l.maxWidth,a.right-a.left)),a.bottom!==void 0&&a.top!==void 0&&(l.maxHeight=Math.min(l.maxHeight,a.bottom-a.top));var c=so(r),u=Fu(o,c);return c.width<1/0&&(!l.maxWidth||l.maxWidth>u.width)&&(l.maxWidth=Math.min(l.maxWidth,u.width)),c.height<1/0&&(!l.maxHeight||l.maxHeight>u.height)&&(l.maxHeight=Math.min(l.maxHeight,u.height)),l.minWidth>l.maxWidth&&(l.minWidth=l.maxWidth,l.widthFrozen=!0),l.minHeight>l.maxHeight&&(l.minHeight=l.maxHeight,l.heightFrozen=!0),l}({sizeRestrictions:e,areaRestrictions:this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}),imageSize:this.imageSize,boundaries:this.boundaries,positionRestrictions:this.positionRestrictions,imageRestriction:this.imageRestriction,visibleArea:this.visibleArea,stencilSize:this.getStencilSize()}),this.visibleArea&&this.stencilSize){var t=this.getStencilSize(),n=so(this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}));e.maxWidth=Math.min(e.maxWidth,n.width*t.width/this.boundaries.width),e.maxHeight=Math.min(e.maxHeight,n.height*t.height/this.boundaries.height),e.maxWidth<e.minWidth&&(e.minWidth=e.maxWidth),e.maxHeight<e.minHeight&&(e.minHeight=e.maxHeight)}return e}return{minWidth:0,minHeight:0,maxWidth:0,maxHeight:0}},positionRestrictions:function(){return this.positionRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction})},classes:function(){return{cropper:jt(),image:Ie(jt("image"),this.imageClass),stencil:jt("stencil"),boundaries:Ie(jt("boundaries"),this.boundariesClass),stretcher:Ie(jt("stretcher")),background:Ie(jt("background"),this.backgroundClass),foreground:Ie(jt("foreground"),this.foregroundClass),imageWrapper:Ie(jt("image-wrapper")),cropperWrapper:Ie(jt("cropper-wrapper"))}},stencilCoordinates:function(){if(this.initialized){var e=this.coordinates,t=e.width,n=e.height,i=e.left,r=e.top;return{width:t/this.coefficient,height:n/this.coefficient,left:(i-this.visibleArea.left)/this.coefficient,top:(r-this.visibleArea.top)/this.coefficient}}return this.defaultCoordinates()},boundariesStyle:function(){var e={width:this.boundaries.width?"".concat(Math.round(this.boundaries.width),"px"):"auto",height:this.boundaries.height?"".concat(Math.round(this.boundaries.height),"px"):"auto",transition:"opacity ".concat(this.transitionTime,"ms"),pointerEvents:this.imageLoaded?"all":"none"};return this.imageLoaded||(e.opacity="0"),e},imageStyle:function(){var e=this.imageAttributes.width>this.imageAttributes.height?{width:Math.min(1024,this.imageAttributes.width),height:Math.min(1024,this.imageAttributes.width)/(this.imageAttributes.width/this.imageAttributes.height)}:{height:Math.min(1024,this.imageAttributes.height),width:Math.min(1024,this.imageAttributes.height)*(this.imageAttributes.width/this.imageAttributes.height)},t={left:(e.width-this.imageSize.width)/(2*this.coefficient),top:(e.height-this.imageSize.height)/(2*this.coefficient)},n={left:(1-1/this.coefficient)*e.width/2,top:(1-1/this.coefficient)*e.height/2},i=he(he({},this.imageTransforms),{},{scaleX:this.imageTransforms.scaleX*(this.imageAttributes.width/e.width),scaleY:this.imageTransforms.scaleY*(this.imageAttributes.height/e.height)}),r={width:"".concat(e.width,"px"),height:"".concat(e.height,"px"),left:"0px",top:"0px",transform:"translate(".concat(-t.left-n.left-this.imageTransforms.translateX,"px, ").concat(-t.top-n.top-this.imageTransforms.translateY,"px)")+Vu(i)};return this.transitionsOptions.enabled&&(r.transition="".concat(this.transitionsOptions.time,"ms ").concat(this.transitionsOptions.timingFunction)),r}},watch:{src:function(){this.onChangeImage()},stencilComponent:function(){var e=this;this.$nextTick(function(){e.resetCoordinates(),e.runAutoZoom("setCoordinates"),e.onChange()})},minWidth:function(){this.onPropsChange()},maxWidth:function(){this.onPropsChange()},minHeight:function(){this.onPropsChange()},maxHeight:function(){this.onPropsChange()},imageRestriction:function(){this.reset()},stencilProps:function(e,t){["aspectRatio","minAspectRatio","maxAspectRatio"].find(function(n){return e[n]!==t[n]})&&this.$nextTick(this.onPropsChange)}},created:function(){this.debouncedUpdate=no(this.update,this.debounce),this.debouncedDisableTransitions=no(this.disableTransitions,this.transitionsOptions.time),this.awaiting=!1},mounted:function(){this.$refs.image.addEventListener("load",this.onSuccessLoadImage),this.$refs.image.addEventListener("error",this.onFailLoadImage),this.onChangeImage(),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},unmounted:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh),this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.debouncedUpdate.clear(),this.debouncedDisableTransitions.clear()},methods:{getResult:function(){var e=this.initialized?this.prepareResult(he({},this.coordinates)):this.defaultCoordinates(),t={rotate:this.imageTransforms.rotate%360,flip:he({},this.imageTransforms.flip)};if(this.src&&this.imageLoaded){var n=this;return{image:this.image,coordinates:e,visibleArea:this.visibleArea?he({},this.visibleArea):null,imageTransforms:t,get canvas(){return n.canvas?n.getCanvas():void 0}}}return{image:this.image,coordinates:e,visibleArea:this.visibleArea?he({},this.visibleArea):null,canvas:void 0,imageTransforms:t}},zoom:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n.transitions,r=i===void 0||i;this.onManipulateImage(new Ti({},{factor:1/e,center:t}),{normalize:!1,transitions:r})},move:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n.transitions,r=i===void 0||i;this.onManipulateImage(new Ti({left:e||0,top:t||0}),{normalize:!1,transitions:r})},setCoordinates:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.autoZoom,r=i===void 0||i,s=n.transitions,o=s===void 0||s;this.$nextTick(function(){t.imageLoaded?(t.transitionsActive||(o&&t.enableTransitions(),t.coordinates=t.applyTransform(e),r&&t.runAutoZoom("setCoordinates"),o&&t.debouncedDisableTransitions()),t.onChange()):t.delayedTransforms=e})},refresh:function(){var e=this,t=this.$refs.image;if(this.src&&t)return this.initialized?this.updateVisibleArea().then(function(){e.onChange()}):this.resetVisibleArea().then(function(){e.onChange()})},reset:function(){var e=this;return this.resetVisibleArea().then(function(){e.onChange(!1)})},awaitRender:function(e){var t=this;this.awaiting||(this.awaiting=!0,this.$nextTick(function(){e(),t.awaiting=!1}))},prepareResult:function(e){return this.roundResult?function(t){var n=t.coordinates,i=t.sizeRestrictions,r=t.positionRestrictions,s={width:Math.round(n.width),height:Math.round(n.height),left:Math.round(n.left),top:Math.round(n.top)};return s.width>i.maxWidth?s.width=Math.floor(n.width):s.width<i.minWidth&&(s.width=Math.ceil(n.width)),s.height>i.maxHeight?s.height=Math.floor(n.height):s.height<i.minHeight&&(s.height=Math.ceil(n.height)),Ue(s,r)}(he(he({},this.getPublicProperties()),{},{positionRestrictions:ss(this.positionRestrictions,this.visibleArea),coordinates:e})):e},processAutoZoom:function(e,t,n,i){var r=this.autoZoomAlgorithm;r||(r=this.stencilSize?nw:this.autoZoom?iw:sw);var s=r({event:{type:e,params:i},visibleArea:t,coordinates:n,boundaries:this.boundaries,aspectRatio:this.getAspectRatio(),positionRestrictions:this.positionRestrictions,getAreaRestrictions:this.getAreaRestrictions,sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize()});return he(he({},s),{},{changed:!zl(s.visibleArea,t)||!zl(s.coordinates,n)})},runAutoZoom:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.transitions,i=n!==void 0&&n,r=qy(t,_w),s=this.processAutoZoom(e,this.visibleArea,this.coordinates,r),o=s.visibleArea,a=s.coordinates,l=s.changed;i&&l&&this.enableTransitions(),this.visibleArea=o,this.coordinates=a,i&&l&&this.debouncedDisableTransitions()},normalizeEvent:function(e){return function(t){var n=t.event,i=t.visibleArea,r=t.coefficient;if(n.type==="manipulateImage")return V(V({},n),{move:{left:n.move&&n.move.left?r*n.move.left:0,top:n.move&&n.move.top?r*n.move.top:0},scale:{factor:n.scale&&n.scale.factor?n.scale.factor:1,center:n.scale&&n.scale.center?{left:n.scale.center.left*r+i.left,top:n.scale.center.top*r+i.top}:null}});if(n.type==="resize"){var s=V(V({},n),{directions:V({},n.directions)});return At.forEach(function(a){s.directions[a]*=r}),s}if(n.type==="move"){var o=V(V({},n),{directions:V({},n.directions)});return Qy.forEach(function(a){o.directions[a]*=r}),o}return n}(he(he({},this.getPublicProperties()),{},{event:e}))},getCanvas:function(){if(this.$refs.canvas){var e=this.$refs.canvas,t=this.$refs.image,n=this.imageTransforms.rotate!==0||this.imageTransforms.flip.horizontal||this.imageTransforms.flip.vertical?function(a,l,c){var u=c.rotate,h=c.flip,d={width:l.naturalWidth,height:l.naturalHeight},f=Bu(d,u),m=a.getContext("2d");a.height=f.height,a.width=f.width,m.save();var v=Qt(De(V({left:0,top:0},d)),u);return m.translate(-(v.left-f.width/2),-(v.top-f.height/2)),m.rotate(u*Math.PI/180),m.translate(h.horizontal?d.width:0,h.vertical?d.height:0),m.scale(h.horizontal?-1:1,h.vertical?-1:1),m.drawImage(l,0,0,d.width,d.height),m.restore(),a}(this.$refs.sourceCanvas,t,this.imageTransforms):t,i=he({minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,maxArea:this.maxCanvasSize,imageSmoothingEnabled:!0,imageSmoothingQuality:"high",fillColor:"transparent"},this.canvas),r=function(a){return a.find(function(l){return c=l,!Number.isNaN(parseFloat(c))&&isFinite(c);var c})},s=Lt({sizeRestrictions:{minWidth:r([i.width,i.minWidth])||0,minHeight:r([i.height,i.minHeight])||0,maxWidth:r([i.width,i.maxWidth])||1/0,maxHeight:r([i.height,i.maxHeight])||1/0},width:this.coordinates.width,height:this.coordinates.height,aspectRatio:{minimum:this.coordinates.width/this.coordinates.height,maximum:this.coordinates.width/this.coordinates.height}});if(i.maxArea&&s.width*s.height>i.maxArea){var o=Math.sqrt(i.maxArea/(s.width*s.height));s={width:Math.round(o*s.width),height:Math.round(o*s.height)}}return function(a,l,c,u,h){a.width=u?u.width:c.width,a.height=u?u.height:c.height;var d=a.getContext("2d");d.clearRect(0,0,a.width,a.height),h&&(h.imageSmoothingEnabled&&(d.imageSmoothingEnabled=h.imageSmoothingEnabled),h.imageSmoothingQuality&&(d.imageSmoothingQuality=h.imageSmoothingQuality),h.fillColor&&(d.fillStyle=h.fillColor,d.fillRect(0,0,a.width,a.height),d.save()));var f=c.left<0?-c.left:0,m=c.top<0?-c.top:0;d.drawImage(l,c.left+f,c.top+m,c.width,c.height,f,m,a.width,a.height)}(e,n,this.coordinates,s,i),e}},update:function(){this.$emit("change",this.getResult())},applyTransform:function(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],n=this.visibleArea&&t?ew(this.sizeRestrictions,this.visibleArea):this.sizeRestrictions,i=this.visibleArea&&t?ss(this.positionRestrictions,this.visibleArea):this.positionRestrictions;return tw({transform:e,coordinates:this.coordinates,imageSize:this.imageSize,sizeRestrictions:n,positionRestrictions:i,aspectRatio:this.getAspectRatio(),visibleArea:this.visibleArea})},resetCoordinates:function(){var e=this;if(this.$refs.image){this.$refs.cropper,this.$refs.image;var t=this.defaultSize;t||(t=this.stencilSize?aw:ow);var n=this.sizeRestrictions;n.minWidth,n.minHeight,n.maxWidth,n.maxHeight;var i=Pn(t)?t({boundaries:this.boundaries,imageSize:this.imageSize,aspectRatio:this.getAspectRatio(),sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize(),visibleArea:this.visibleArea}):t,r=this.defaultPosition||rw,s=[i,function(o){var a=o.coordinates;return he({},Pn(r)?r({coordinates:a,imageSize:e.imageSize,visibleArea:e.visibleArea}):e.defaultPosition)}];this.delayedTransforms&&s.push.apply(s,bn(Array.isArray(this.delayedTransforms)?this.delayedTransforms:[this.delayedTransforms])),this.coordinates=this.applyTransform(s,!0),this.delayedTransforms=null}},clearImage:function(){var e=this;this.imageLoaded=!1,setTimeout(function(){var t=e.$refs.stretcher;t&&(t.style.height="auto",t.style.width="auto"),e.coordinates=e.defaultCoordinates(),e.boundaries={width:0,height:0}},this.transitionTime)},enableTransitions:function(){this.transitions&&(this.transitionsActive=!0)},disableTransitions:function(){this.transitionsActive=!1},updateBoundaries:function(){var e=this,t=this.$refs.stretcher,n=this.$refs.cropper;return this.initStretcher({cropper:n,stretcher:t,imageSize:this.imageSize}),this.$nextTick().then(function(){var i={cropper:n,imageSize:e.imageSize};if(Pn(e.defaultBoundaries)?e.boundaries=e.defaultBoundaries(i):e.defaultBoundaries==="fit"?e.boundaries=function(r){var s=r.cropper,o=r.imageSize,a=s.clientHeight,l=s.clientWidth,c=a,u=o.width*a/o.height;return u>l&&(u=l,c=o.height*l/o.width),{width:u,height:c}}(i):e.boundaries=function(r){var s=r.cropper;return{width:s.clientWidth,height:s.clientHeight}}(i),!e.boundaries.width||!e.boundaries.height)throw new Error("It's impossible to fit the cropper in the current container")})},resetVisibleArea:function(){var e=this;return this.appliedImageTransforms=he(he({},this.defaultImageTransforms),{},{flip:he({},this.defaultImageTransforms.flip)}),this.updateBoundaries().then(function(){e.priority!=="visible-area"&&(e.visibleArea=null,e.resetCoordinates());var t,n,i,r,s,o,a=e.defaultVisibleArea||lw;e.visibleArea=Pn(a)?a({imageSize:e.imageSize,boundaries:e.boundaries,coordinates:e.priority!=="visible-area"?e.coordinates:null,getAreaRestrictions:e.getAreaRestrictions,stencilSize:e.getStencilSize()}):e.defaultVisibleArea,e.visibleArea=(t={visibleArea:e.visibleArea,boundaries:e.boundaries,getAreaRestrictions:e.getAreaRestrictions},n=t.visibleArea,i=t.boundaries,r=t.getAreaRestrictions,s=V({},n),o=fe(i),s.width/s.height!==o&&(s.height=s.width/o),Ue(s,r({visibleArea:s,type:"move"}))),e.priority==="visible-area"?e.resetCoordinates():e.coordinates=e.fitCoordinates({visibleArea:e.visibleArea,coordinates:e.coordinates,aspectRatio:e.getAspectRatio(),positionRestrictions:e.positionRestrictions,sizeRestrictions:e.sizeRestrictions}),e.runAutoZoom("resetVisibleArea")}).catch(function(){e.visibleArea=null})},updateVisibleArea:function(){var e=this;return this.updateBoundaries().then(function(){e.visibleArea=e.fitVisibleArea({imageSize:e.imageSize,boundaries:e.boundaries,visibleArea:e.visibleArea,coordinates:e.coordinates,getAreaRestrictions:e.getAreaRestrictions}),e.coordinates=e.fitCoordinates({visibleArea:e.visibleArea,coordinates:e.coordinates,aspectRatio:e.getAspectRatio(),positionRestrictions:e.positionRestrictions,sizeRestrictions:e.sizeRestrictions}),e.runAutoZoom("updateVisibleArea")}).catch(function(){e.visibleArea=null})},onChange:function(){var e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];e&&this.debounce?this.debouncedUpdate():this.update()},onChangeImage:function(){var e,t=this;if(this.imageLoaded=!1,this.delayedTransforms=null,this.src){if(function(r){if(jl(r))return!1;var s=window.location,o=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(r)||[],a={protocol:o[1]||"",host:o[2]||"",port:o[3]||""},l=function(c){return c.port||((c.protocol||s.protocol)==="http"?80:433)};return!(!a.protocol&&!a.host&&!a.port||a.protocol&&a.protocol==s.protocol&&a.host&&a.host==s.host&&a.host&&l(a)==l(s))}(this.src)){var n=ze(this.crossOrigin)?this.canvas:this.crossOrigin;n===!0&&(n="anonymous"),this.imageAttributes.crossOrigin=n||null}if(this.checkOrientation){var i=(e=this.src,new Promise(function(r){ww(e).then(function(s){var o=bw(s);r(s?{source:e,arrayBuffer:s,orientation:o}:{source:e,arrayBuffer:null,orientation:null})}).catch(function(s){console.warn(s),r({source:e,arrayBuffer:null,orientation:null})})}));setTimeout(function(){i.then(t.onParseImage)},this.transitionTime)}else setTimeout(function(){t.onParseImage({source:t.src})},this.transitionTime)}else this.clearImage()},onFailLoadImage:function(){this.imageAttributes.src&&(this.clearImage(),this.$emit("error"))},onSuccessLoadImage:function(){var e=this,t=this.$refs.image;t&&!this.imageLoaded&&(this.imageAttributes.height=t.naturalHeight,this.imageAttributes.width=t.naturalWidth,this.imageLoaded=!0,this.resetVisibleArea().then(function(){e.$emit("ready"),e.onChange(!1)}))},onParseImage:function(e){var t=this,n=e.source,i=e.arrayBuffer,r=e.orientation;this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.imageAttributes.revoke=!1,i&&r&&r>1?zu(n)||!jl(n)?(this.imageAttributes.src=URL.createObjectURL(new Blob([i])),this.imageAttributes.revoke=!0):this.imageAttributes.src=function(s){for(var o=[],a=new Uint8Array(s);a.length>0;){var l=a.subarray(0,8192);o.push(String.fromCharCode.apply(null,Array.from?Array.from(l):l.slice())),a=a.subarray(8192)}return"data:image/jpeg;base64,"+btoa(o.join(""))}(i):this.imageAttributes.src=n,Pn(this.defaultTransforms)?this.appliedImageTransforms=Ar(this.defaultTransforms()):ms(this.defaultTransforms)?this.appliedImageTransforms=Ar(this.defaultTransforms):this.appliedImageTransforms=function(s){var o=Ar({});if(s)switch(s){case 2:o.flip.horizontal=!0;break;case 3:o.rotate=-180;break;case 4:o.flip.vertical=!0;break;case 5:o.rotate=90,o.flip.vertical=!0;break;case 6:o.rotate=90;break;case 7:o.rotate=90,o.flip.horizontal=!0;break;case 8:o.rotate=-90}return o}(r),this.defaultImageTransforms=he(he({},this.appliedImageTransforms),{},{flip:he({},this.appliedImageTransforms.flip)}),this.$nextTick(function(){var s=t.$refs.image;s&&s.complete&&(function(o){return!!o.naturalWidth}(s)?t.onSuccessLoadImage():t.onFailLoadImage())})},onResizeEnd:function(){this.runAutoZoom("resize",{transitions:!0})},onMoveEnd:function(){this.runAutoZoom("move",{transitions:!0})},onMove:function(e){var t=this;this.transitionsOptions.enabled||this.awaitRender(function(){t.coordinates=t.moveAlgorithm(he(he({},t.getPublicProperties()),{},{positionRestrictions:ss(t.positionRestrictions,t.visibleArea),coordinates:t.coordinates,event:t.normalizeEvent(e)})),t.onChange()})},onResize:function(e){var t=this;this.transitionsOptions.enabled||this.stencilSize&&!this.autoZoom||this.awaitRender(function(){var n=t.sizeRestrictions,i=Math.min(t.coordinates.width,t.coordinates.height,20*t.coefficient);t.coordinates=t.resizeAlgorithm(he(he({},t.getPublicProperties()),{},{positionRestrictions:ss(t.positionRestrictions,t.visibleArea),sizeRestrictions:{maxWidth:Math.min(n.maxWidth,t.visibleArea.width),maxHeight:Math.min(n.maxHeight,t.visibleArea.height),minWidth:Math.max(n.minWidth,i),minHeight:Math.max(n.minHeight,i)},event:t.normalizeEvent(e)})),t.onChange(),t.ticking=!1})},onManipulateImage:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.transitionsOptions.enabled){var n=t.transitions,i=n!==void 0&&n,r=t.normalize,s=r===void 0||r;i&&this.enableTransitions();var o=cw(he(he({},this.getPublicProperties()),{},{event:s?this.normalizeEvent(e):e,getAreaRestrictions:this.getAreaRestrictions,imageRestriction:this.imageRestriction,adjustStencil:!this.stencilSize&&this.settings.resizeImage.adjustStencil})),a=o.visibleArea,l=o.coordinates;this.visibleArea=a,this.coordinates=l,this.runAutoZoom("manipulateImage"),this.onChange(),i&&this.debouncedDisableTransitions()}},onPropsChange:function(){this.coordinates=this.applyTransform(this.coordinates,!0),this.onChange(!1)},getAreaRestrictions:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.visibleArea,n=e.type,i=n===void 0?"move":n;return this.areaRestrictionsAlgorithm({boundaries:this.boundaries,imageSize:this.imageSize,imageRestriction:this.imageRestriction,visibleArea:t,type:i})},getAspectRatio:function(e){var t,n,i=this.stencilProps,r=i.aspectRatio,s=i.minAspectRatio,o=i.maxAspectRatio;if(this.$refs.stencil&&this.$refs.stencil.aspectRatios){var a=this.$refs.stencil.aspectRatios();t=a.minimum,n=a.maximum}if(ze(t)&&(t=ze(r)?s:r),ze(n)&&(n=ze(r)?o:r),!e&&(ze(t)||ze(n))){var l=this.getStencilSize(),c=l?fe(l):null;ze(t)&&(t=Il(c)?c:void 0),ze(n)&&(n=Il(c)?c:void 0)}return{minimum:t,maximum:n}},getStencilSize:function(){if(this.stencilSize)return e={currentStencilSize:{width:this.stencilCoordinates.width,height:this.stencilCoordinates.height},stencilSize:this.stencilSize,boundaries:this.boundaries,coefficient:this.coefficient,coordinates:this.coordinates,aspectRatio:this.getAspectRatio(!0)},t=e.boundaries,n=e.stencilSize,i=e.aspectRatio,Sr(fe(r=Pn(n)?n({boundaries:t,aspectRatio:i}):n),i)&&(r=Lt({sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minWidth:0,minHeight:0},width:r.width,height:r.height,aspectRatio:{minimum:i.minimum,maximum:i.maximum}})),(r.width>t.width||r.height>t.height)&&(r=Lt({sizeRestrictions:{maxWidth:t.width,maxHeight:t.height,minWidth:0,minHeight:0},width:r.width,height:r.height,aspectRatio:{minimum:fe(r),maximum:fe(r)}})),r;var e,t,n,i,r},getPublicProperties:function(){return{coefficient:this.coefficient,visibleArea:this.visibleArea,coordinates:this.coordinates,boundaries:this.boundaries,sizeRestrictions:this.sizeRestrictions,positionRestrictions:this.positionRestrictions,aspectRatio:this.getAspectRatio(),imageRestriction:this.imageRestriction}},defaultCoordinates:function(){return he({},Ml)},flip:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n.transitions,r=i===void 0||i;if(!this.transitionsActive){r&&this.enableTransitions();var s=he({},this.imageTransforms.flip),o=hw({flip:{horizontal:e?!s.horizontal:s.horizontal,vertical:t?!s.vertical:s.vertical},previousFlip:s,rotate:this.imageTransforms.rotate,visibleArea:this.visibleArea,coordinates:this.coordinates,imageSize:this.imageSize,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),a=o.visibleArea,l=o.coordinates;e&&(this.appliedImageTransforms.flip.horizontal=!this.appliedImageTransforms.flip.horizontal),t&&(this.appliedImageTransforms.flip.vertical=!this.appliedImageTransforms.flip.vertical),this.visibleArea=a,this.coordinates=l,this.onChange(),r&&this.debouncedDisableTransitions()}},rotate:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.transitions,i=n===void 0||n;if(!this.transitionsActive){i&&this.enableTransitions();var r=he({},this.imageSize);this.appliedImageTransforms.rotate+=e;var s=uw({visibleArea:this.visibleArea,coordinates:this.coordinates,previousImageSize:r,imageSize:this.imageSize,angle:e,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),o=s.visibleArea,a=s.coordinates,l=this.processAutoZoom("rotateImage",o,a);o=l.visibleArea,a=l.coordinates,this.visibleArea=o,this.coordinates=a,this.onChange(),i&&this.debouncedDisableTransitions()}}},emits:["change","error","ready"]},xw={key:0,ref:"canvas",style:{display:"none"}},Ew={key:1,ref:"sourceCanvas",style:{display:"none"}};Gu.render=function(e,t,n,i,r,s){return O(),ee("div",{ref:"cropper",class:s.classes.cropper},[$("div",{ref:"stretcher",class:s.classes.stretcher},null,2),$("div",{class:s.classes.boundaries,style:s.boundariesStyle},[(O(),ee(_s(n.backgroundWrapperComponent),{class:s.classes.cropperWrapper,"wheel-resize":s.settings.resizeImage.wheel,"touch-resize":s.settings.resizeImage.touch,"touch-move":s.settings.moveImage.touch,"mouse-move":s.settings.moveImage.mouse,onMove:s.onManipulateImage,onResize:s.onManipulateImage},{default:ge(function(){return[$("div",{class:s.classes.background,style:s.boundariesStyle},null,6),$("div",{class:s.classes.imageWrapper},[$("img",{ref:"image",crossorigin:r.imageAttributes.crossOrigin,src:r.imageAttributes.src,class:s.classes.image,style:s.imageStyle,onMousedown:t[1]||(t[1]=Af(function(){},["prevent"]))},null,46,["crossorigin","src"])],2),$("div",{class:s.classes.foreground,style:s.boundariesStyle},null,6),zs((O(),ee(_s(n.stencilComponent),Ns({ref:"stencil",image:s.image,coordinates:r.coordinates,"stencil-coordinates":s.stencilCoordinates,transitions:s.transitionsOptions},n.stencilProps,{onResize:s.onResize,onResizeEnd:s.onResizeEnd,onMove:s.onMove,onMoveEnd:s.onMoveEnd}),null,16,["image","coordinates","stencil-coordinates","transitions","onResize","onResizeEnd","onMove","onMoveEnd"])),[[ko,r.imageLoaded]]),n.canvas?(O(),ee("canvas",xw,null,512)):Te("",!0),n.canvas?(O(),ee("canvas",Ew,null,512)):Te("",!0)]}),_:1},8,["class","wheel-resize","touch-resize","touch-move","mouse-move","onMove","onResize"]))],6)],2)};const Sw={class:"flex items-center flex-col"},Rw=we({__name:"Cropp",props:{src:{}},emits:["croppedImageBlob"],setup(e,{emit:t}){const n=ce(null),i=async()=>{const{canvas:o}=n.value.getResult();if(!o){s("croppedImageBlob",null);return}const a=await new Promise(l=>o.toBlob(l,"image/jpeg"));s("croppedImageBlob",a)},r=e,s=t;return(o,a)=>(O(),H("div",Sw,[$(F(Gu),{ref_key:"cropperRef",ref:n,class:"flex w-[300px] h-[300px] sm:w-[400px] sm:h-[400px]",src:r.src,"auto-zoom":!0,"stencil-size":{width:250,height:250},"image-restriction":"stencil"},null,8,["src"]),$(Ft,{onClick:i,text:"Загрузить аватар",style:"m-1 p-2 font-medium text-gray-500 rounded-[10px] hover:shadow-shadowDrop hover:ring-[1px] hover:ring-cyan-300"})]))}}),Aw={class:"text-red-500 font-semibold text-[23px]"},Tw=we({__name:"DangerText",props:{dangerText:{}},setup(e){return(t,n)=>(O(),H("div",null,[w("h1",Aw,ie(t.dangerText),1)]))}}),Cw=["type"],Ow=we({__name:"UploadInput",props:{type:{}},emits:["loadingAvatar"],setup(e,{emit:t}){const n=r=>{var o;const s=(o=r.target.files)==null?void 0:o[0];if(s){const a=new FileReader;a.onload=function(l){var c;i("loadingAvatar",{preloadFile:(c=l.target)==null?void 0:c.result,avatar:s})},a.readAsDataURL(s)}},i=t;return(r,s)=>(O(),H("input",{type:r.type,accept:".jpeg, .png, .jpg",onChange:n,class:"hidden"},null,40,Cw))}}),$w={key:0,class:"fixed z-50 top-0 w-[100%] h-[100%]"},kw={class:"absolute top-[50%] left-[50%] translate-x-[-50%] translate-y-[-50%]"},Pw={class:"flex flex-col items-center bg-white rounded-[10px]"},jw=we({__name:"UploadAvatar",setup(e){const t=xn(),n=ce(null),i=ce(""),r=ce(null),s=async c=>{const u=Math.floor(Math.random()*9e9+1e9);let h;if(n.value){const{data:d,error:f}=await Ae.storage.from("images").upload("public/"+u,c);f&&console.error(f),d&&(h=d.path,await Ae.from("users").update({avatar_url:h}).match({id:t.user.id})),i.value="",t.modal=!1,n.value=null,r.value=null}else i.value="Загрузите изображение"};vt(n,()=>{i.value=""});const o=c=>{r.value=c.preloadFile,n.value=c.avatar},a=()=>{const c=document.getElementById("file-input");c&&c.click()},l=Re(()=>{var c,u;return((c=n.value)==null?void 0:c.name)!==void 0?(u=n.value)==null?void 0:u.name:"Выберите аватар"});return(c,u)=>(O(),ee(jc,{to:"body"},[F(t).modal?(O(),H("div",$w,[w("div",{class:"w-[100%] h-[100%] bg-black opacity-[0.5]",onClick:u[0]||(u[0]=h=>F(t).modal=!1)}),w("div",kw,[w("div",Pw,[w("div",null,[$(Ow,{id:"file-input",onLoadingAvatar:u[1]||(u[1]=h=>o(h)),type:"file"}),$(Ft,{onClick:u[2]||(u[2]=h=>a()),text:l.value,style:"m-1 p-2 font-medium text-gray-500 rounded-[10px] hover:shadow-shadowDrop hover:ring-[1px] hover:ring-cyan-300"},null,8,["text"])]),$(Tw,{dangerText:i.value},null,8,["dangerText"]),r.value?(O(),ee(Rw,{key:0,src:r.value,onCroppedImageBlob:u[3]||(u[3]=h=>s(h))},null,8,["src"])):Te("",!0)])])])):Te("",!0)]))}}),Qu=()=>{window.scrollTo({top:0,behavior:"smooth"})},Iw={class:"flex flex-col justify-center max-w-[1340px] mx-auto"},Mw={__name:"App",setup(e){const t=xn(),n=i=>{i.key===" "&&i.target===document.body&&i.preventDefault()};return ei(()=>{t.getUser(),document.addEventListener("keydown",n)}),(i,r)=>(O(),H(xe,null,[w("div",Iw,[$(Uy),$(Wy),$(jw),$(F(nu))]),w("div",{class:"fixed z-50 bottom-1 right-1 text-white cursor-pointer",onClick:r[0]||(r[0]=s=>F(Qu)())},[$(vn,{width:70,height:70,name:"icon-arrow-up"})])],64))}},zw={},Lw={class:"grid gap-[30px] p-[20px] 2xl:grid-cols-6 xl:grid-cols-5 md:grid-cols-4 sm:grid-cols-3 grid-cols-2"};function Dw(e,t){return O(),H("div",Lw,[$t(e.$slots,"default")])}const Zu=Hi(zw,[["render",Dw]]),Uw=["onClick","onMouseover"],Nw={class:"relative z-0 rounded-[15px] overflow-hidden"},Fw=["src"],Bw={class:"flex flex-col items-center w-full"},Hw={class:"font-medium text-[#ccc7c7]"},eh=we({__name:"Card",props:{anime:{},hovered:{}},emits:["over","leave","push"],setup(e,{emit:t}){const n=t,i=o=>{n("over",o)},r=o=>{n("leave",o)},s=o=>{n("push",o)};return(o,a)=>(O(!0),H(xe,null,nt(o.anime,l=>(O(),H("article",{key:l,onClick:c=>s(l),onMouseover:c=>i(l),onMouseleave:a[0]||(a[0]=c=>r(null)),class:"flex flex-col items-center gap-3 cursor-pointer"},[w("div",Nw,[w("img",{src:`https://dl-20240330-7.anilib.moe${l.posters.original.url}`,class:"w-full h-auto"},null,8,Fw),w("div",{class:Je(["flex absolute z-10 top-0 left-0 w-full h-full duration-300 items-center justify-center text-transparent",{"bg-cardOpacity text-white":o.hovered===l}])},[$(vn,{width:50,height:50,name:"icon-play"})],2)]),w("div",Bw,[w("h2",{class:Je(["font-medium w-full text-white duration-300 whitespace-nowrap text-ellipsis overflow-hidden",{"text-red-500":o.hovered===l}])},ie(l.names.ru),3),w("p",Hw,ie(l.season.year),1)])],40,Uw))),128))}}),Ww=we({__name:"AnimeList",props:{anime:{}},emits:["getAnimeFromApi","page"],setup(e,{emit:t}){const n=qs(),i=e,r=ce(null),s=t,o=()=>{try{s("getAnimeFromApi")}catch(c){console.error("Ошибка при загрузке данных:",c)}},a=()=>{window.scrollY+window.innerHeight>=document.documentElement.scrollHeight-170&&(s("page"),o())};ei(()=>{window.addEventListener("scroll",a,{passive:!0}),i.anime.length===0&&o()}),Eo(()=>{window.removeEventListener("scroll",a)});const l=c=>{n.push({name:"anime",params:{id:c,episode:"1"}})};return(c,u)=>(O(),ee(Zu,null,{default:ge(()=>[$(eh,{anime:i==null?void 0:i.anime,hovered:r.value,onOver:u[0]||(u[0]=h=>r.value=h),onLeave:u[1]||(u[1]=h=>r.value=null),onPush:u[2]||(u[2]=h=>l(h.id))},null,8,["anime","hovered"])]),_:1}))}}),qw=we({__name:"AnimeCatalog",setup(e){const t=xn(),n=new Map,i=s=>t.aniList=s.reduce((o,a)=>n.get(a.id)?o:(n.set(a.id,!0),[...o,a]),t.aniList),r=async()=>{const s=await As.get(`${Fg}${t.animePage}&limit=${t.animeCount}`);return i(s.data.list)};return(s,o)=>{var a,l;return O(),H("div",null,[$(Ww,{user:(l=(a=F(t))==null?void 0:a.user)==null?void 0:l.id,anime:F(t).aniList,onGetAnimeFromApi:r,onPage:o[0]||(o[0]=c=>F(t).animePage++)},null,8,["user","anime"])])}}}),Vw="/assets/noimg-33df41e4.jpeg";var Fl=function(){return Math.random().toString(36).substring(2)},ht=we({name:"ContentLoader",props:{width:{type:[Number,String]},height:{type:[Number,String]},viewBox:{type:String},preserveAspectRatio:{type:String,default:"xMidYMid meet"},speed:{type:Number,default:2},baseUrl:{type:String,default:""},primaryColor:{type:String,default:"#f9f9f9"},secondaryColor:{type:String,default:"#ecebeb"},primaryOpacity:{type:Number,default:1},secondaryOpacity:{type:Number,default:1},uniqueKey:{type:String},animate:{type:Boolean,default:!0}},setup:function(t){var n=Re(function(){return t.uniqueKey?"".concat(t.uniqueKey,"-idClip"):Fl()}),i=Re(function(){return t.uniqueKey?"".concat(t.uniqueKey,"-idGradient"):Fl()}),r=Re(function(){var a;return(a=t.width)!==null&&a!==void 0?a:400}),s=Re(function(){var a;return(a=t.height)!==null&&a!==void 0?a:130}),o=Re(function(){var a;return(a=t.viewBox)!==null&&a!==void 0?a:"0 0 ".concat(r.value," ").concat(s.value)});return{idClip:n,idGradient:i,computedViewBox:o}},render:function(){return $("svg",{width:this.width,height:this.height,viewBox:this.computedViewBox,version:"1.1",preserveAspectRatio:this.preserveAspectRatio},[$("rect",{style:{fill:"url(".concat(this.baseUrl,"#").concat(this.idGradient,")")},"clip-path":"url(".concat(this.baseUrl,"#").concat(this.idClip,")"),x:"0",y:"0",width:"100%",height:"100%"},null),$("defs",null,[$("clipPath",{id:this.idClip},[this.$slots.default?this.$slots.default():$("rect",{x:"0",y:"0",rx:"5",ry:"5",width:"100%",height:"100%"},null)]),$("linearGradient",{id:this.idGradient},[$("stop",{offset:"0%","stop-color":this.primaryColor,"stop-opacity":this.primaryOpacity},[this.animate?$("animate",{attributeName:"offset",values:"-2; 1",dur:"".concat(this.speed,"s"),repeatCount:"indefinite"},null):null]),$("stop",{offset:"50%","stop-color":this.secondaryColor,"stop-opacity":this.secondaryOpacity},[this.animate?$("animate",{attributeName:"offset",values:"-1.5; 1.5",dur:"".concat(this.speed,"s"),repeatCount:"indefinite"},null):null]),$("stop",{offset:"100%","stop-color":this.primaryColor,"stop-opacity":this.primaryOpacity},[this.animate?$("animate",{attributeName:"offset",values:"-1; 2",dur:"".concat(this.speed,"s"),repeatCount:"indefinite"},null):null])])])])}});const Kw={class:"w-[100%] flex flex-row gap-0 md:gap-5 p-3 text-[#d8d8d8] text-[20px]"},Jw={class:"max-w-[300px] h-full rounded-[10px] overflow-hidden hidden lg:block"},Xw=w("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"371",height:"387"},null,-1),Yw={class:"w-[100%] flex flex-col gap-5 p-[10px] mb-2"},Gw={class:"flex flex-col gap-5"},Qw={class:"rounded-[10px] flex w-[100%]"},Zw=w("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"500",height:"30"},null,-1),eb={class:"rounded-[10px] flex w-[100%]"},tb=w("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"300",height:"20"},null,-1),nb={class:"rounded-[10px] flex w-[100%]"},ib=w("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"100",height:"20"},null,-1),sb={class:"rounded-[10px] flex w-[100%]"},rb=w("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"400",height:"20"},null,-1),ob={class:"rounded-[10px] flex w-[100%]"},ab=w("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"430",height:"20"},null,-1),lb={class:"rounded-[10px] flex w-[100%]"},cb=w("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"350",height:"20"},null,-1),ub={class:"rounded-[10px] flex w-[100%]"},hb=w("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"450",height:"20"},null,-1),db={class:"rounded-[10px] flex w-[100%]"},fb=w("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"500",height:"20"},null,-1),pb={class:"rounded-[10px] flex w-[100%]"},mb=w("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"300",height:"20"},null,-1),gb={class:"rounded-[10px] flex w-[100%]"},vb=w("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"200",height:"20"},null,-1),yb={class:"rounded-[10px] overflow-hidden max-w-[700px] relative"},wb=["src"],bb=w("span",{class:"w-[100%] h-[100%] absolute top-0 left-0 bg-white"},null,-1),_b=we({__name:"SkeletonAnimePage",setup(e){return(t,n)=>(O(),H("div",Kw,[w("div",Jw,[$(F(ht),{speed:3,width:371,height:387,animate:!0},{default:ge(()=>[Xw]),_:1})]),w("div",Yw,[w("div",Gw,[w("p",Qw,[$(F(ht),{speed:2,width:500,height:40},{default:ge(()=>[Zw]),_:1})]),w("p",eb,[$(F(ht),{speed:2,width:300,height:20},{default:ge(()=>[tb]),_:1})]),w("p",nb,[$(F(ht),{speed:2,width:100,height:20},{default:ge(()=>[ib]),_:1})]),w("p",sb,[$(F(ht),{speed:2,width:400,height:20},{default:ge(()=>[rb]),_:1})]),w("p",ob,[$(F(ht),{speed:2,width:430,height:20},{default:ge(()=>[ab]),_:1})]),w("p",lb,[$(F(ht),{speed:2,width:350,height:20},{default:ge(()=>[cb]),_:1})]),w("p",ub,[$(F(ht),{speed:2,width:450,height:20},{default:ge(()=>[hb]),_:1})]),w("p",db,[$(F(ht),{speed:2,width:500,height:20},{default:ge(()=>[fb]),_:1})]),w("p",pb,[$(F(ht),{speed:2,width:300,height:20},{default:ge(()=>[mb]),_:1})]),w("p",gb,[$(F(ht),{speed:2,width:200,height:20},{default:ge(()=>[vb]),_:1})])]),w("div",yb,[w("img",{src:F(Vw),alt:""},null,8,wb),bb])])]))}}),xb={class:"flex flex-col w-full text-white text-[18px] text-center rounded-[10px] overflow-hidden"},Eb={class:"w-full"},Sb={key:0,class:"border-t-[2px] border-white bg-slate-400 animate-slide-up"},Rb={class:"flex flex-col"},Ab=["onClick"],Tb=we({__name:"DropDown",props:{status:{},header:{}},emits:["sendStatus"],setup(e,{emit:t}){const n=e,i=ce(!1),r=ce(n.header),s=t,o=a=>{i.value=!1,s("sendStatus",a)};return(a,l)=>(O(),H("div",xb,[w("div",{class:"flex w-full p-2 bg-slate-400 cursor-pointer",onClick:l[0]||(l[0]=c=>i.value=!i.value)},[w("span",Eb,ie(r.value),1)]),i.value?(O(),H("div",Sb,[w("ol",Rb,[(O(!0),H(xe,null,nt(n.status,c=>(O(),H("li",{key:c,class:"p-2 cursor-pointer hover:bg-slate-500 duration-short",onClick:u=>(o(c),r.value=c)},ie(c),9,Ab))),128))])])):Te("",!0)]))}});const ao=Hi(Tb,[["__scopeId","data-v-062ee0f2"]]),Cb=async e=>{try{await Ae.from("animeStatusList").insert({animeId:e.animeId,userId:e.userId,nameAnime:e.nameAnime,img:e.img?"https://dl-20211030-963.anilib.top"+e.img:null,status:e.status})}catch(t){console.log(t)}},Ob={class:"text-[30px]"},$b={class:"flex flex-row gap-3 text-gray-500 items-center text-[16px]"},kb={class:"border-[1px] border-gray-500 rounded-[10px] px-2"},Pb=w("p",{class:"w-[5px] h-[5px] rounded-full bg-gray-500"},null,-1),jb=w("p",{class:"w-[5px] h-[5px] rounded-full bg-gray-500"},null,-1),Ib={class:"flex flex-row gap-5 flex-wrap"},Mb=w("li",null,"Жанры:",-1),zb={class:"flex flex-row gap-5 flex-wrap"},Lb=w("li",null,"Озвучка:",-1),Db=we({__name:"Content",props:{anime:{},length:{},lastUpdate:{}},setup(e){return(t,n)=>{var i,r,s,o,a,l,c,u,h,d;return O(),H("div",null,[w("div",null,[w("h1",Ob,ie((i=t.anime)==null?void 0:i.names.ru),1),w("p",null,ie((r=t.anime)==null?void 0:r.names.en),1)]),w("div",$b,[w("span",kb,ie((s=t.anime)==null?void 0:s.status.string),1),Pb,w("span",null,ie((o=t.anime)==null?void 0:o.season.year),1),jb,w("span",null,ie((a=t.anime)==null?void 0:a.type.string),1)]),w("ol",Ib,[Mb,(O(!0),H(xe,null,nt((l=t.anime)==null?void 0:l.genres,f=>(O(),H("li",{key:f},ie(f),1))),128))]),w("ol",zb,[Lb,(O(!0),H(xe,null,nt((c=t.anime)==null?void 0:c.team.voice,f=>(O(),H("li",{key:f},ie(f),1))),128))]),w("div",null,[w("span",null,"Количество эпизодов: "+ie(t.length),1),Lc(" из "),w("span",null,ie((h=(u=t.anime)==null?void 0:u.type)==null?void 0:h.episodes),1),w("p",null,"Последнее обновление: "+ie(t.lastUpdate),1)]),w("p",null,"Описание: "+ie((d=t.anime)==null?void 0:d.description),1)])}}}),Ub={class:"w-[100%] flex flex-row gap-0 md:gap-5 p-3 text-white text-[20px]"},Nb={class:"max-w-[300px] h-full flex flex-col gap-5"},Fb=["src"],Bb={class:"w-[100%] h-full flex flex-col gap-5 p-[10px] mb-2"},Hb={class:"flex flex-col gap-5 bg-slate-600 p-3 rounded-[10px]"},Wb=w("span",null,"Коментарии",-1),qb={class:"flex flex-row gap-3"},Vb={class:"flex flex-col justify-center items-center"},Kb={class:"flex flex-col grow border-b-[1px] border-white justify-between"},Jb={key:0,class:"flex justify-end"},Xb=["onClick"],Yb={class:"flex flex-col justify-center items-center"},Gb={class:"flex flex-col grow justify-between"},Qb={class:"flex justify-end"},Zb=["onClick"],e0={key:0,class:"m-auto"},t0={key:1,class:"flex flex-col gap-3 items-start"},n0=w("span",null,"Напиши отзыв!",-1),i0={class:"flex flex-row w-full grow gap-3 items-center"},s0={class:"flex flex-col justify-center items-center"},r0=w("span",{class:"text-[20px] text-white text-center font-medium"},"Похожие Аниме",-1),o0=we({__name:"AnimePage",setup(e){const t=ad(()=>ti(()=>import("./Player-c8882b8a.js"),["assets/Player-c8882b8a.js","assets/Player-9677f7a6.css"])),n=xn(),i=iu(),r=qs(),s=ce(null),o=ce(null),a=ce(null),l=ce(""),c=async()=>{const x=await As.get(`${Bg}${i.params.id}`);console.log(x.data),s.value=x.data;const T=Object.values(x.data.genres).join(","),C=await As.get(`${Wg}${T}&limit=20`);o.value=C.data.list.slice(1)};ei(async()=>{await c(),await b()}),vt(i,async()=>{await c(),await b()});const u=x=>{const T=new Date(x*1e3),C=T.getFullYear(),z=("0"+(T.getMonth()+1)).slice(-2);return`${("0"+T.getDate()).slice(-2)}.${z}.${C}`},h=Re(()=>{var x,T;return s.value?Object.keys((T=(x=s.value)==null?void 0:x.player)==null?void 0:T.list).length:0}),d=_n(["Просмотрено","Смотрю","Запланировано","Пересматриваю","Выходит","Заброшено"]),f=async x=>{var z,U,G,q,B,se;const{data:T}=await Ae.from("animeStatusList").select().filter("animeId","eq",(z=s.value)==null?void 0:z.id).filter("userId","eq",(U=n.user)==null?void 0:U.id).single();if(T){console.log("уже есть");return}const C={animeId:(G=s.value)==null?void 0:G.id,userId:(q=n.user)==null?void 0:q.id,nameAnime:(B=s.value)==null?void 0:B.names.ru,img:(se=s.value)==null?void 0:se.posters.original.url,status:x};Cb(C)},m=async()=>{var x,T,C,z;try{const{data:U,error:G}=await Ae.from("animeCommentaries").insert({animeId:(x=s.value)==null?void 0:x.id,userId:(T=n.user)==null?void 0:T.id,userName:(C=n.user)==null?void 0:C.name,img:(z=n.user)==null?void 0:z.avatar_url,commentary:l.value,parentId:Math.floor(Math.random()*1e18)});return G?console.log("ошибка:",G.message):U}catch(U){console.log("ошибка:",U)}},v=ce([]);Ae.channel("animeCommentaries").on("postgres_changes",{event:"*",schema:"public",table:"animeCommentaries"},x=>{console.log(x)}).subscribe();async function b(){var x;try{const{data:T,error:C}=await Ae.from("animeCommentaries").select().filter("animeId","eq",(x=s.value)==null?void 0:x.id);C&&console.log("ошибка:",C),console.log(T),v.value=T}catch(T){console.log("ошибка:",T)}}const R=async(x,T,C)=>{var G,q,B,se;const{data:z,error:U}=await Ae.from("animeCommentaries").select().filter("parentId","eq",C).single();console.log(C),console.log(z),console.log(U);try{const{data:ve,error:Pe}=await Ae.from("animeCommentaries").insert({animeId:(G=s.value)==null?void 0:G.id,commentary:`${T+": "+l.value}`,userId:x,img:(q=n.user)==null?void 0:q.avatar_url,userName:T,parentId:C,answerId:(B=n.user)==null?void 0:B.id,answerName:(se=n.user)==null?void 0:se.name,childrenId:Math.floor(Math.random()*1e18)});if(Pe)return console.log("ошибка:",Pe.message);console.log(ve)}catch(ve){console.log("ошибка:",ve)}};return(x,T)=>{var C,z,U,G,q,B,se,ve,Pe,We,bt,qe,re;return O(),H(xe,null,[s.value?Te("",!0):(O(),ee(_b,{key:0})),zs(w("div",Ub,[w("div",Nb,[w("img",{class:"hidden md:block rounded-[10px]",src:s.value?`https://dl-20211030-963.anilib.top${(C=s.value)==null?void 0:C.posters.original.url}`:"",alt:""},null,8,Fb),(z=F(n))!=null&&z.user?(O(),ee(ao,{key:0,class:"hidden md:block",status:d,header:"Добавить в список",onSendStatus:T[0]||(T[0]=Y=>f(Y))},null,8,["status"])):Te("",!0)]),w("div",Bb,[$(Db,{anime:s.value,length:h.value,lastUpdate:u((U=s.value)==null?void 0:U.updated)},null,8,["anime","length","lastUpdate"]),$(F(t),{user:(G=F(n))==null?void 0:G.user,previewUrl:"https://dl-20211030-963.anilib.top",seriaUrl:"https://cache.libria.fun",AnimePlay:(q=s.value)==null?void 0:q.player,animeName:(B=s.value)==null?void 0:B.names.ru,animeId:(se=s.value)==null?void 0:se.id,episode:Number(F(i).params.episode),onUpdateEpisode:T[1]||(T[1]=Y=>{var te;return F(r).push({name:"anime",params:{id:(te=s.value)==null?void 0:te.id,episode:Y}})})},null,8,["user","previewUrl","seriaUrl","AnimePlay","animeName","animeId","episode"]),(ve=F(n))!=null&&ve.user?(O(),ee(ao,{key:0,class:"max-md:block hidden mt-2",status:d,header:"Добавить в список",onSendStatus:T[2]||(T[2]=Y=>f(Y))},null,8,["status"])):Te("",!0),w("div",Hb,[Wb,(O(!0),H(xe,null,nt(v.value.filter(Y=>Y.childrenId===null),Y=>{var te;return O(),H("div",{class:"flex flex-col gap-2",key:Y},[w("div",qb,[w("div",Vb,[$(Ai,{img:Y.img,style:"w-[50px] h-[50px]"},null,8,["img"]),w("span",null,ie(Y.userName),1)]),w("div",Kb,[w("span",null,ie(Y.commentary),1),(te=F(n))!=null&&te.user?(O(),H("div",Jb,[w("span",{class:"text-[15px] self-end cursor-pointer",onClick:je=>R(Y.userId,Y.userName,Y.parentId)},"Ответить",8,Xb)])):Te("",!0)])]),(O(!0),H(xe,null,nt(v.value.filter(je=>je.childrenId!==null&&je.parentId===Y.parentId),je=>{var ct,Qe;return O(),H("div",{class:"pl-[10%] flex flex-row gap-3 justify-center items-center",key:je},[w("div",Yb,[$(Ai,{img:(Qe=(ct=F(n))==null?void 0:ct.user)==null?void 0:Qe.avatar_url,style:"w-[30px] h-[30px]"},null,8,["img"]),w("span",null,ie(je.userName),1)]),w("div",Gb,[w("span",null,ie(je.commentary),1),w("div",Qb,[w("span",{class:"text-[15px] self-end cursor-pointer",onClick:Ve=>R(je.userId,je.userName,Y.parentId)},"Ответить",8,Zb)])])])}),128))])}),128)),v.value.length===0?(O(),H("span",e0,"Пока комментариев нет, будь одним из первых и напиши свой комментарий!")):Te("",!0),(Pe=F(n))!=null&&Pe.user?(O(),H("div",t0,[n0,w("div",i0,[w("div",s0,[$(Ai,{img:(bt=(We=F(n))==null?void 0:We.user)==null?void 0:bt.avatar_url,style:"w-[50px] h-[50px]"},null,8,["img"]),w("span",null,ie((re=(qe=F(n))==null?void 0:qe.user)==null?void 0:re.name),1)]),$(ps,{style:"text-black",modelValue:l.value,"onUpdate:modelValue":T[3]||(T[3]=Y=>l.value=Y),placeholder:"Комментарий",type:"text"},null,8,["modelValue"])]),$(Ft,{onClick:m,text:"Отправить",style:"hover:shadow-shadowDrop p-1 hover:bg-slate-500 rounded-[15px]"})])):Te("",!0)])])],512),[[ko,s.value]]),r0,$(Zu,null,{default:ge(()=>[$(eh,{anime:o.value,hovered:a.value,onOver:T[4]||(T[4]=Y=>a.value=Y),onLeave:T[5]||(T[5]=Y=>a.value=null),onPush:T[6]||(T[6]=Y=>(F(r).push({name:"anime",params:{id:Y.id,episode:"1"}}),F(Qu)()))},null,8,["anime","hovered"])]),_:1})],64)}}}),a0={},l0={class:"flex justify-center items-center w-[100%] h-[100%]"},c0=w("img",{src:"https://webitnow.co.il/wp-content/uploads/עמודי-404-מה-עושים-1170x640.jpg",alt:""},null,-1),u0=[c0];function h0(e,t){return O(),H("div",l0,u0)}const d0=Hi(a0,[["render",h0]]),f0={class:"relative flex flex-row w-[80%] sm:w-[60%] p-[20px] shadow-shadowDrop rounded-[10px]"},p0={class:"justify-between flex flex-col sm:flex-row gap-2 w-full"},m0={key:0},g0={class:"flex flex-col text-white flex-wrap text-[18px]"},v0={class:"flex flex-col items-center"},y0={class:"text-[#e4e4e4] font-normal text-[20px]"},w0=we({__name:"Profile",props:{user:{},statusAnime:{},labelStatus:{},history:{}},emits:["loadAvatar","deleteAvatar"],setup(e){const t=e,n=ce(!1);let i=null;const r=()=>{n.value=!0,clearTimeout(i)},s=()=>{i=setTimeout(()=>{n.value=!1},500)},o=()=>{n.value=!1},a=()=>{clearTimeout(i)},l=()=>{i=setTimeout(()=>{n.value=!1},500)};return Eo(()=>{clearTimeout(i)}),(c,u)=>{var h,d;return O(),H("div",f0,[w("div",p0,[t.user?(O(),H("div",m0,[w("ol",g0,[(O(!0),H(xe,null,nt(t.labelStatus,f=>(O(),H("li",{class:"leading-[25px]",key:f},ie(f)+" - "+ie(c.statusAnime[f]||0),1))),128))])])):Te("",!0),w("div",v0,[$(Ai,{style:"max-w-[100px] max-h-[100px] sm:max-w-[150px] sm:max-h-[150px]",img:(h=t.user)==null?void 0:h.avatar_url,onMouseenter:r,onMouseleave:s},null,8,["img"]),w("span",y0,ie((d=c.user)==null?void 0:d.name),1)])]),n.value?(O(),ee(Iu,{key:0,onMouseleave:l,onMouseenter:a,onClick:o,style:"right-0 top-[90%]"},{default:ge(()=>[$(Ri,{onClick:u[0]||(u[0]=f=>c.$emit("loadAvatar",!0))},{default:ge(()=>[$(vn,{name:"icon-load"}),$(Ft,{text:"Загрузить Фотографию",style:"font-normal p-0"})]),_:1}),$(Ri,{onClick:u[1]||(u[1]=f=>c.$emit("deleteAvatar"))},{default:ge(()=>[$(vn,{name:"icon-delete"}),$(Ft,{text:"Удалить фотографию",style:"font-normal p-0"})]),_:1})]),_:1})):Te("",!0)])}}}),Bl="/assets/noAnime-bd89d146.png",b0={class:"flex flex-col gap-5 mb-[30px]"},_0=w("span",{class:"text-white text-[18px]"},"История просмотра",-1),x0=["onClick"],E0=["src"],S0={class:"absolute bottom-0 left-0 flex flex-col bg-white w-[100%]"},R0={class:"relative flex"},A0=w("span",{class:"w-full flex h-[5px] bg-slate-300"},null,-1),T0={class:"px-2"},C0={class:"text-[18px] w-full whitespace-nowrap text-ellipsis overflow-hidden"},O0=we({__name:"HistoryAnime",props:{img:{},anime:{}},emits:["pushing"],setup(e,{emit:t}){const n=t,i=e,r=(s,o)=>{n("pushing",{id:s,episode:o})};return(s,o)=>(O(),H("div",b0,[_0,(O(!0),H(xe,null,nt(i.anime,a=>(O(),H("div",{key:a,class:"relative cursor-pointer flex gap-5 rounded-[10px] overflow-hidden max-h-[44 0px]",onClick:l=>r(a.animeId,a.episode)},[w("img",{src:a.img===null?i.img:a.img,alt:"",class:"w-[100%] object-contain"},null,8,E0),w("div",S0,[w("div",R0,[A0,w("span",{class:"h-[5px] bg-red-500 absolute top-0 left-0",style:$s(`width: ${a.current_Time/a.duration_Time*100}%`)},null,4)]),w("div",T0,[w("h1",C0,ie(a.nameAnime),1),w("h3",null,"Серия: "+ie(a.episode),1)])])],8,x0))),128))]))}}),$0={class:"flex flex-col gap-3 w-full"},k0={key:0,class:"gap-2 flex flex-col cursor-pointer"},P0=["onClick"],j0={class:"flex flex-row w-full justify-between gap-2"},I0=["src"],M0={class:"flex flex-col w-full justify-between gap-5"},z0={class:"max-h-[100px] whitespace-wrap overflow-hidden"},L0={key:1,class:"flex justify-center items-center w-full"},D0=["src"],U0=we({__name:"AnimeStatuses",props:{labelStatus:{},filterList:{},noimg:{},status:{}},emits:["pushing"],setup(e,{emit:t}){const n=e,i=t,r=(s,o)=>{i("pushing",{id:s,episode:o})};return console.log(n.status),(s,o)=>(O(!0),H(xe,null,nt(s.labelStatus.filter(a=>a!=="История просмотра"&&a===s.status),a=>(O(),H("div",{class:"text-white min-h-[50vh] text-[18px] flex gap-5 mb-[30px]",key:a},[w("div",$0,[w("span",null,ie(a),1),s.filterList(a).length>0?(O(),H("div",k0,[(O(!0),H(xe,null,nt(s.filterList(a),l=>(O(),H("div",{key:l,onClick:c=>r(l.animeId,1)},[w("div",j0,[w("img",{src:l.img,class:"max-w-[100px] rounded-[10px]"},null,8,I0),w("div",M0,[w("span",z0,ie(l.nameAnime),1),w("span",null,ie(l.status),1)])])],8,P0))),128))])):(O(),H("div",L0,[w("img",{src:s.noimg,alt:"",class:"rounded-[10px]"},null,8,D0)]))])]))),128))}}),N0={class:"flex flex-col w-[100%] justify-center items-center mt-3"},F0={class:"flex flex-col gap-5 mt-10 w-[80%] sm:w-[60%]"},B0=we({__name:"ProfileView",setup(e){const t=qs(),n=iu(),i=xn(),r=ce(null),s=ce([]),o=ce(!0),a=Re(()=>c()),l=async()=>{await Ae.from("users").update({avatar_url:null}).match({id:n.params.id})};function c(){return n.params.status}const u=()=>{a.value==="История просмотра"?o.value=!0:o.value=!1};vt(n,()=>{c(),u()});const h=async()=>{const{data:z}=await Ae.from("animeUserList").select().eq("userId",n.params.id);r.value=z,z.reduce(U=>(U.push({animeId:0,created_at:"",id:0,img:"",nameAnime:"",status:"История просмотра",userId:i.user.id}),U),s.value)},d=async()=>{const{data:z}=await Ae.from("animeStatusList").select().eq("userId",n.params.id);s.value.push(...z)};let f;const m=async()=>{if(!i.user||i.user.id.toString()!==n.params.id){f=setTimeout(async()=>{t.push("/")},3e3);return}await h(),await d()};ei(async()=>{u(),await m()}),vt(()=>i.user,async()=>{clearTimeout(f),await m()});const v=Re(()=>{var z;return(z=r.value)==null?void 0:z.filter(U=>U.updated!==null).sort((U,G)=>{const q=new Date(U.updated);return new Date(G.updated).getTime()-q.getTime()})}),b=["История просмотра","Смотрю","Просмотрено","Запланировано","Пересматриваю","Выходит","Заброшено"],R=Re(()=>{var z;return(z=s.value)!=null&&z.length?s.value.reduce((U,G)=>U[G.status]?{...U,[G.status]:U[G.status]+1}:{...U,[G.status]:1},{}):{}}),x=z=>z==="История просмотра"?null:s.value.filter(U=>U.status===z),T=z=>{t.push({name:"anime",params:{id:z.id,episode:z.episode}})},C=z=>{var U;t.push({name:"lk",params:{id:(U=i==null?void 0:i.user)==null?void 0:U.id,status:z}})};return(z,U)=>{var G,q;return O(),H("div",N0,[$(w0,{user:((q=(G=F(i))==null?void 0:G.user)==null?void 0:q.id)===Number(F(n).params.id)?F(i).user:null,onLoadAvatar:U[0]||(U[0]=B=>F(i).modal=B),onDeleteAvatar:U[1]||(U[1]=B=>l()),statusAnime:R.value,labelStatus:b,history:v.value},null,8,["user","statusAnime","history"]),w("div",F0,[$(ao,{status:b,header:a.value?a.value:"Аниме список",onSendStatus:U[2]||(U[2]=B=>C(B))},null,8,["header"]),o.value?(O(),ee(O0,{key:0,onPushing:U[3]||(U[3]=B=>T(B)),anime:v.value,img:F(Bl)},null,8,["anime","img"])):Te("",!0),o.value?Te("",!0):(O(),ee(U0,{key:1,onPushing:U[4]||(U[4]=B=>T(B)),filterList:x,labelStatus:b,noimg:F(Bl),status:F(n).params.status},null,8,["noimg","status"]))])])}}}),H0=Up({history:np("/"),routes:[{path:"/",name:"AnimeCatalog",component:qw},{path:"/anime/:id/:episode",name:"anime",component:o0},{path:"/:pathMatch(.*)*",name:"NoFound",component:d0},{path:"/lk/:id/:status",name:"lk",component:B0}]}),Go=Of(Mw);Go.use(Pf());Go.use(H0);Go.mount("#app");export{xe as F,Hi as _,w as a,nt as b,H as c,we as d,Te as e,$ as f,vn as g,Re as h,Af as i,ee as j,Je as k,Bl as l,ei as m,$s as n,O as o,vt as p,xc as q,ce as r,Ae as s,ie as t,F as u,Ia as v,zs as w,ko as x};
